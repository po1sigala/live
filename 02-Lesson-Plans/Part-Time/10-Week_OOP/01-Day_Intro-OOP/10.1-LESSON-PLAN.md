# 10.1 Part-Time Lesson Plan: Object-Oriented Programming (OOP)

## Instructors and TAs: Please take the Mid-Course Instructional Staff Survey

Trilogy as a company values transparency and data-driven change quite highly. As we grow, we know there will be areas that need improvement. It‚Äôs hard for us to know what these areas are unless we‚Äôre asking questions. Your candid input truly matters to us, as you are vital members of the Trilogy team. In addition to the individual feedback at the end of lesson plans, we would appreciate your feedback at the following link:
[https://forms.gle/yPfrY4CjNeAqbVKD6](https://forms.gle/yPfrY4CjNeAqbVKD6)

## Overview 

In this class, we will be covering some very important topics regarding object-oriented programming, including constructors, prototypes, polymorphism, and promises. 

## Instructor Notes

* In this lesson, students will complete activities `01-Ins_Constructors` through `10-Stu_Promises-2`

* Be sure to prepare and read over the activities before your class begins. Try and anticipate questions students may have, especially on these core OOP topics!

* Remind students to do a `git pull` of the class repo to have today's activities ready and open in VS Code. 

* If you are comfortable doing so, live code the solutions to the activities. If not, no worries. Use the solutions provided and follow the prompts and talking points for review. 

* Let students know that the Bonus for each activity is meant to give them "food for thought." Rather than extra coding practice, it is a self-study on related topics that are beyond the scope of this unit for those who want to dig deeper and further their knowledge on this topic.

## Learning Objectives

By the end of class, students will be able to:

* Use constructor functions to create new objects.

* Use prototypical inheritance to add methods to objects.

* Explain polymorphism through method overloading.

* Implement Promise.all() to wait for multiple API calls.

## Slide Deck

* [Unit 10 Slide Deck](https://docs.google.com/presentation/d/1Heou5UD956vYb1d4YDCi4GobFCcz4geNifZmz0KISgg/edit?usp=sharing)

## Time Tracker
| Start  | #   | Activity Name                                | Duration |
| ------ | --- | -------------------------------------------- | -------- |
| 6:30PM | 1   | Instructor Do: Stoke Curiosity               | 0:10     |
| 6:40PM | 2   | Instructor Demo: Constructors                | 0:05     |
| 6:45PM | 3   | Student Do: Constructors                     | 0:15     |
| 7:00PM | 4   | Instructor Review: Constructors              | 0:10     |
| 7:10PM | 5   | Instructor Demo: Prototypes                  | 0:05     |
| 7:15PM | 6   | Student Do: Prototypes                       | 0:15     |
| 7:30PM | 7   | Instructor Review: Prototypes                | 0:10     |
| 7:40PM | 8   | Instructor Demo: Polymorphism                | 0:05     |
| 7:45PM | 9   | Student Do: Polymorphism                     | 0:15     |
| 8:00PM | 10  | BREAK                                        | 0:15     |
| 8:15PM | 11  | Instructor Review: Polymorphism              | 0:10     |
| 8:25PM | 12  | Instructor Demo: Promises                    | 0:05     |
| 8:30PM | 13  | Student Do: Promises                         | 0:15     |
| 8:45PM | 14  | Instructor Review: Promises                  | 0:10     |
| 8:55PM | 15  | Instructor Demo: Promise.all()               | 0:05     |
| 9:00PM | 16  | Student Do: Promise.all()                    | 0:15     |
| 9:15PM | 17  | Instructor Review: Promise.all()             | 0:15     |
| 9:30PM | 18  | END                                          | 0:00     |

---

## Class Instruction

### 1. Instructor Do: Stoke Curiosity (10 min)

* Welcome students to class.

* Open the [slide deck](https://docs.google.com/presentation/d/1Heou5UD956vYb1d4YDCi4GobFCcz4geNifZmz0KISgg/edit?usp=sharing) and follow these prompts on their corresponding slides:

  * **Constructors**
  
    * This unit will be an introduction to Object-Oriented Programming (OOP). In today's class, we will cover objects and constructors.

  *  **What is programming?**: So what exactly is programming?
  
    * Programming is designing and building of an executable program that will accomplish a specific computing task. Essentially, programming is problem solving.

  *  **What problems do we solve?**: What problems do programmers solve?

  * **Algorithms and Automation** 
  
    * Programming allows for us to solve almost any task or problem on a computer. There are two primary categories: Algorithms and Automation.

  * **What is DRY?**: What does DRY mean?
  
    * DRY stands for ‚ÄúDon‚Äôt Repeat Yourself!‚Äù. Rewriting code wastes time, memory, and can confuse later readers and/or contributors to your code.

  * **What is an object?**
  
    * Objects in JavaScript are unordered collections of related data built on a key:value structure where values can be any data-type, including functions. 

  * **Why are objects important in Javascript**: What makes objects so important?

  * **Everything is an object!**
  
    * Well, almost everything. Arrays, Date, Math, even functions are objects! Primitive types are NOT objects.
  
  * **How do we create Objects**
  
    * We can use object literals, the `new` keyword and constructors 

  * **What is object-oriented programming?**
    
    * OOP is a programming paradigm or pattern of programming centered around objects. Problems are thought of in a way in which a collection of objects work together to solve a problem.

  * **How can we learn to use OOP?**
  
    * When we use objects to model real world things we want to represent in code, and provide functionality that would otherwise be hard or impossible - we begin to see the value of OOP.

    * We can try the following strategies to learn OOP:

      1. Read the docs and practice with the provided examples.
    
      2. Reverse-engineer finished code to see how it was created.
    
      3. Build something from scratch.
    
      4. Debug a broken app using Chrome DevTools.
    
      5. And most importantly, ask questions!

  * **Mini Project**

    * This unit's mini-project will be building a Word Guessing CLI game!

* Navigate to `01-Class-Content/10-OOP/01-Activities/28-Stu_Mini-Project/README.md` in your command line and demonstrate the following:

  * In this assignment we are going to take what we have learned with object oriented programming and build a Word Guess command-line game.

  * This is a fun way for us to use classes in conjunction with `inquirer` and `Node.js` to demonstrate our skills

* Ask the class the following questions (‚òùÔ∏è) and call on students for the answers (üôã):

  * ‚òùÔ∏è What are we learning?

  * üôã We are learning Object Oriented programming and how to use ES6 classes and constructor functions to build a command line app

  * ‚òùÔ∏è How does this project build off or extend previously learned material?

  * üôã This will build upon our knowledge of Node.js and newer ES6 syntax.

  * ‚òùÔ∏è How does this project relate to your career goals?

  * üôã Building an app like this is an exercise in building application using javascript outside of the browser. This is the fundamental characteristic of back end development, and we are just starting to scratch the surface.

* Answer any questions before proceeding to the next activity.

### 2. Instructor Demo: Constructors (5 min) 

* Navigate to `01-Ins_Constructors` and run `node index.js` from the command line and demonstrate the following: 

  * üîë When we run the program, we see the following output in the console.

  ```
  Woof!
  ```

* Open `01-Ins_Constructors/index.js` in your IDE and demonstrate the following:

  * üîë We create a constructor function called `Animal` that takes in two parameters, `raining` and `noise`.

  ```js
  function Animal(raining, noise) {
  ```

  * üîë We pass the `raining` and `noise` parameters into the object's keys as their value.

  ```js
  this.raining = raining;
  this.noise = noise;
  ```

  * üîë The third key is a function called `makeNoise()`. The function checks if the `raining` key's value is `true`. If it is, it will log the value of the key's `noise` in the console.

  ```js
  this.makeNoise = function() {
    if (this.raining === true) {
      console.log(this.noise);
    }
  };
  ```

  * When we run `node catsDogs.js` in the console, the `dog` and `cat` objects are created and the `makeNoise()` method is called on them.

  ```js
  let dog = new Animal(true, "Woof!");
  let cat = new Animal(false, "Meow!");

  dog.makeNoise();
  cat.makeNoise();
  ```

  * Only the `dog`'s "Woof!" will be logged in the console since its `raining` value is set to `true`.

  * However, if we set the `raining` value of `cat` to `true` and call the `makeNoise()` method, it will make it "Meow!" in the console.

  ```js
  cat.raining = true;
  cat.makeNoise();
  ```

  * Not only that, but since both `dogs.raining` and `cats.raining` are set to `true`, the `massHysteria()` method will now print out its message in the console. 

* Run `node index.js` from the command line again to demonstrate the following:

  * Now we see the "Meow!" as well as "DOGS AND CATS LIVING TOGETHER! MASS HYSTERIA!" in the console.

  ```
  Woof!
  Meow!
  DOGS AND CATS LIVING TOGETHER! MASS HYSTERIA!
  ```

* Ask the class the following questions (‚òùÔ∏è) and call on students for the answers (üôã):

  * ‚òùÔ∏è How would we build this?

  * üôã We could build our own objects with those three keys, "raining", "noise", and "makeNoise" for starters.

* Answer any questions before proceeding to the next activity.

* In preparation for the activity, ask TAs to start directing students to the activity instructions found in `02-Stu_Constructors/README.md`.

### 3. Student Do: Constructors (15 min) 

* Direct students to the activity instructions found in `02-Stu_Constructors/README.md`.

* Break your students into pairs that will work together on this activity.

```md
# üèóÔ∏è Create objects using a constructor function

Work with a partner to implement the following user story:

* As a developer, I want to create new objects quickly using a constructor function.

## Acceptance Criteria

* It's done when the constructor function is named `Developer` and it takes in two parameters, `name` and `tech`.

* It's done when the parameters are passed into the object's keys as their values.

* It's done when the object's third key is a method called `introduction()` that prints a message in the console introducing its `name` and what `tech` they like.

* It's done when I create a new object using the `Developer` constructor with a `name` and `tech` of my choice.

* It's done when the introduction of my new object is printed in the console.

## üí° Hints

How can we use template literals to print an introduction like "Hi, my name is Rita and I love JavaScript!"?

## üèÜ Bonus

If you have completed this activity, work through the following challenge with your partner to further your knowledge:

* What are some built-in JavaScript constructors for native objects?

Use [Google](https://www.google.com) or another search engine to research this.
```

* While breaking everyone into groups, be sure to remind students and the rest of the instructional staff that questions on Slack or otherwise are welcome and will be handled. It's a good way for your team to prioritize students that need extra help while circulating through room.

### 4. Instructor Review: Constructors (10 min) 

* Ask the class the following questions (‚òùÔ∏è) and call on students for the answers (üôã):

  * ‚òùÔ∏è How comfortable do you feel with constructors? (Poll via Fist to Five, Slack, or Zoom)

* Assure students that we will cover the solution to help solidify their understanding. If questions remain, remind them to use office hours to get extra help!

* Use the prompts and talking points below to review the following key (üîë) points:

  * ‚úîÔ∏è Constructor function

  * ‚úîÔ∏è `introduction()` method

* Open `02-Stu_Constructors/Solved/index.js` in your IDE and explain the following: 

  * üîë We create a constructor function named `Developer` that takes in two parameters, `name` and `tech`.

  ```js
  function Developer(name, tech) {

  }
  ```

  * We pass in the `name` and `tech` parameters into the object's keys as their values.

  ```js
  this.name = name;
  this.tech = tech;
  ```

  * üîë The third key is a method called `introduction()` and we use template literals to print the message in the console.

  ```js
  this.introduction = () => {
    console.log(`Hi, my name is ${this.name} and I love ${this.tech}!`);
  };
  ```

  * We create a new object to test out the `Developer` constructor. You could've used any name and technology you wanted. For our example, we will use "Rita".

  ```js
  const rita = new Developer('Rita', 'JavaScript');
  ```

  * We call the `introduction()` method on `rita` to print the message int he console.

  ```js
  rita.introduction()
  ```

* Run `node index.js` from your command line and demonstrate the following:

  * We see Rita's introduction in the console!

  ```
  Hi, my name is Rita and I love JavaScript!
  ```

* Ask the class the following questions (‚òùÔ∏è) and call on students for the answers (üôã):

  * ‚òùÔ∏è How can we add a method to a constructor?

  * üôã We must add methods to an object constructor inside the constructor function. We cannot add a new method the same way we add a new method to an existing object.

* Answer any questions before proceeding to the next activity.

### 5. Instructor Demo: Prototypes (5 min) 

* Open [03-Ins_Prototypes](../../../../01-Class-Content/10-OOP/01-Activities/03-Ins_Prototypes/prototype-demo.js) in your browser and demonstrate the following:

* Run `node prototype-demo` from the command line and demonstrate the following: 

  * We create an array, and console log it. Next, we call the `.forEach` and `.map` methods on it.

  ```js
  myArray = [2, 4, 6, 8];
  console.log(myArray);

  myArray.forEach((num) => console.log(num));

  myArray.map((x) => console.log(x * 2));
  ```
  
  * üîë Next we console log the string `Hello`. We then call `"Hello.toLowerCase"`

  ```js

  console.log("Hello");
  console.log("Hello".toLowerCase());

  console.log(1337);
  console.log((1337).toString());
  ```

  * We created a constructor function named `Movie`, which will take in two arguments, `title` and `releaseYear`.

  ```js
  function Movie(title, releaseYear) {
    this.title = title;
    this.releaseYear = releaseYear;
  }
  ```

  * üîë A few things to keep in mind about what we see here:
    * Objects, arrays, and primitives all have a `.prototype.`
    * The `.prototype.` has methods and properties attached to it.
    * Prototype methods are declared once in memory, but all instances have access to those methods.
    * Instance methods only exist on that instance, while prototype methods exist on all instances.

* Ask the class the following questions (‚òùÔ∏è) and call on students for the answers (üôã):

  * ‚òùÔ∏è Where did the `.toLowerCase` come from?

  * üôã While those two methods did not show up when we console logged our string, the prototype has these methods built in. Arrays, Objects, even primitives all have a prototype which they take their structure and methods from. Any of of these that you create will have the prototype methods available to it via the `.prototype.`. i.e., `Array.prototype.forEach()`

* Answer any questions before proceeding to the next activity.

* In preparation for the activity, ask TAs to start directing students to the activity instructions found in [04-Stu__Prototypes](../../../../01-Class-Content/10-OOP/01-Activities/04-Stu_-Prototypes/README.md).

### 6. Student Do: Prototypes (15 min)

* Direct students to the activity instructions found in [04-Stu_Prototypes](../../../../01-Class-Content/10-OOP/01-Activities/04-Stu_Prototypes/README.md).

* Break your students into pairs that will work together on this activity.

```md
# üìê Add Comments to Implementation of Prototypes

Work with a partner to add comments describing the functionality of the code found in [Unsolved](./Unsolved/rpg-prototypes.js).

## üìù Notes

Refer to the documentation: 

[MDN Docs on prototypes](https://developer.mozilla.org/en-US/docs/Learn/JavaScript/Objects/Object_prototypes)

---

## üèÜ Bonus

If you have completed this activity, work through the following challenge with your partner to further your knowledge:

* What is the difference between adding a method inside the constructor versus adding it to the prototype?

Use [Google](https://www.google.com) or another search engine to research this.
```

* While breaking everyone into groups, be sure to remind students and the rest of the instructional staff that questions on Slack or otherwise are welcome and will be handled. It's a good way for your team to prioritize students that need extra help while circulating through room.

### 7. Instructor Review: Prototypes (10 min) 

* Ask the class the following questions (‚òùÔ∏è) and call on students for the answers (üôã):

  * ‚òùÔ∏è How comfortable do you feel with prototypes? (Poll via Fist to Five, Slack, or Zoom)

* Assure students that we will cover the solution to help solidify their understanding. If questions remain, remind them to use office hours to get extra help!

* Use the prompts and talking points below to review the following key (üîë) points:

  * ‚úîÔ∏è In this activity we set up a constructor function for a character

  * ‚úîÔ∏è We use the `this` keyword which refers to the instance of the object. Another way to think of the this keyword is "referring to the nearest object instance that is being declared"


* Open [rpg-prototypes](../../../../01-Class-Content/10-OOP/01-Activities/04-Stu_Prototypes/Solved/rpg-prototypes.js) in your IDE and explain the following: 

  * This function is a constructor called `Character` that will take in 6 arguments. We assign those arguments to keys in our constructor.

  ```js
  function Character(name, profession, gender, age, strength, hitpoints) {
    this.name = name;
    this.profession = profession;
    this.gender = gender;
    this.age = age;
    this.strength = strength;
    this.hitpoints = hitpoints;
  }
  ```

  * `printStats` is a method that is added to the prototype of `Character`. We do this to avoid re-declaring the method in memory each time we create an instance of `Character`, we can define the method once on the prototype and simply point each instance to it.

  ```js
  Character.prototype.printStats = function () {
    console.log(`
      Name: ${this.name}
      Profession: ${this.profession}
      Age: ${this.age}
      Strength: ${this.strength}
      HitPoints: ${this.hitpoints}
    `);
    console.log('\n-------------\n');
  };
  ```

  * We add an `isAlive` which determines if "hitpoints" are less than zero and returns a boolean depending on if the character is alive or not.

  ```js
  Character.prototype.isAlive = function () {
    if (this.hitpoints > 0) {
      console.log(`${this.name} is still alive!`);
      console.log('\n-------------\n');
      return true;
    }
    console.log(`${this.name} has died!`);
    return false;
  };
  ```

  * We also add two other functions to our `prototype`. The `attack` method takes in a second object and decreases their "hitpoints" by this character's strength. The `levelUp` method increases `this` character's stats when called.

  ```js
  Character.prototype.attack = function(character2) {
    character2.hitpoints -= this.strength;
  };

  Character.prototype.levelUp = function() {
    this.age += 1;
    this.strength += 5;
    this.hitpoints += 25;
  };
  ```

  * üîë Finally we can use our constructor to create two characters, calling their methods from the prototype that we added.


  ```js
  var warrior = new Character("Crusher", "Warrior", "Male", 25, 10, 75);
  var rogue = new Character("Dodger", "Rogue", "Female", 23, 20, 50);

  warrior.printStats();
  rogue.printStats();

  rogue.attack(warrior);
  warrior.printStats();
  warrior.isAlive();

  rogue.levelUp();
  rogue.printStats();
  ```

* Ask the class the following questions (‚òùÔ∏è) and call on students for the answers (üôã):

  * ‚òùÔ∏è Why don't we just declare the methods in the constructor?

  * üôã When we bind a function using the `this` keyword, the method only exists on that instance of the object. For any method bound to `this`, it will be re declared with each new instance of an object.

  * ‚òùÔ∏è How does the prototype help us solve this problem?

  * üôã The prototype allows us to declare methods that will be attached to all instances of an object of that prototype. Because the method is applied to the prototype, it is only stored in memory once for all instances.

  * ‚òùÔ∏è What can we do if we don't completely understand this?

  * üôã @TODO We can refer to supplemental material, read the [MDN Docs](https://developer.mozilla.org/en-US/docs/Learn/JavaScript/Objects/Object_prototypes) and stick around for Office Hours to ask for help.

* Answer any questions before proceeding to the next activity.

### 8. Instructor Demo: Polymorphism (5 min)

* Open [05-Ins-Polymorphism](../../../../01-Class-Content/10-OOP/01-Activities/05-Ins-Polymorphism/index.js) in your browser and demonstrate the following:

* Run `node index.js` from the command line and demonstrate the following: 

  * üîë When we run this file, we notice some output in the terminal. We have the value of `x` and possibly `y`.

  * üîë This example uses a concept in polymorphism called method overloading. Method overloading allows a constructor to have a single method that behaves differently based on what what kind of data is provided to that method as an argument.

  * In this example, we have an `area` method that will return the area of a square, or the area of a rectangle based on how many arguments are passed into it.  

  ```js
  const OverloadDemo = function () {
    this.area = function (x, y) {
      console.log('this.area -> x', x);
      !y
        ? console.log('this.area -> y Not provided')
        : console.log('this.area -> y', y);

      if (y) {
        return `the area of the rectangle is ${x * y} sq units`;
      }
      return `the area of the square is ${Math.pow(x, 2)} sq units`;
    };
  };

  const square = new OverloadDemo();
  console.log('square.area(5)', square.area(5, 7));
  // console.log('square.area(5)', square.area(5));
  ```
  * This is made possible by the concept of Polymorphism. In OOP, it is the ability to create a variable, a function, or an object that has more than one form. 
  
  * One important thing to notice in this example is that the data is being passed directly to the method instead of relying on data inside the constructor.

* Ask the class the following questions (‚òùÔ∏è) and call on students for the answers (üôã):

  * ‚òùÔ∏è How would we build this?

  * üôã We could look up some examples of method overloading in other programing languages and see how we could achieve similar functionality in javascript.

* Answer any questions before proceeding to the next activity.

* In preparation for the activity, ask TAs to start directing students to the activity instructions found in [06-Stu-Polymorphism].

### 9. Student Do: Polymorphism (15 min)

* Direct students to the activity instructions found in `06-Stu-Polymorphism`.

* Break your students into pairs that will work together on this activity.

```md
# üêõ Implement Polymorphism Using Method Overloading

Work with a partner to resolve the following issue(s):

* As a developer, I want to understand the concept of polymorphism by writing code that utilizes method overloading.

## Expected Behavior

* When the user passes in a number grade, like `95`, into the `displayGrade` method, the method should return a string indicating the letter grade, like `A`.

* When the user passes in a letter grade, like `B`, into the `displayGrade` method, the method should return a string indicating the range of the grade percentage, like `80-89`. 

## Actual Behavior

When the user passes in a number grade or letter grade, the method returns `undefined`

## Steps to Reproduce the Problem

1. Run `node index.js` from the command line.

---

## üí° Hints

* We are given an `inRange` helper function. How might that come in handy?

* How can we use switch statements to help code out the solution? 

## üèÜ Bonus

If you have completed this activity, work through the following challenge with your partner to further your knowledge:

* Think of another method that you could implement that would use the parameters of the method to behave a certain way. How could you check the number of arguments that were passed to a method?

Use [Google](https://www.google.com) or another search engine to research this.
```

* While breaking everyone into groups, be sure to remind students and the rest of the instructional staff that questions on Slack or otherwise are welcome and will be handled. It's a good way for your team to prioritize students that need extra help while circulating through room.

### 10. BREAK (15 min)

### 11. Instructor Review: Implement Polymorphism Using Method Overloading (10 min)

* Ask the class the following questions (‚òùÔ∏è) and call on students for the answers (üôã):

  * ‚òùÔ∏è How comfortable do you feel with polymorphism and method overloading? (Poll via Fist to Five, Slack, or Zoom)

* Assure students that we will cover the solution to help solidify their understanding. If questions remain, remind them to use office hours to get extra help!

* Use the prompts and talking points (üîë) below to review the following key points:

  * ‚úîÔ∏è Polymorphism

  * ‚úîÔ∏è Method overloading

* Open `06-Stu-Polymorphism/Solved/index.js` in your IDE and explain the following: 

  * When we open this file at the top of the file we see a helper function and also a constructor called `Student`.

    ```js
    function Student(first, last, age) {
      this.firstName = first;
      this.lastName = last;
      this.age = age;
    ```

  *  We also see a method on the `Student` constructor called `displayGrade`. Our task was to flesh out this method by checking the data type for the value of `grade`. 
  
  * üîë  We respond differently depending on whether or not it is a string or a number.

    ```js
    this.displayGrade = function (grade) {
      const input = grade;
      let response;
      if (!input) {
        throw new Error('no grade provided');
      }
      // Return a letter grade if a number grade was passed
      // Ex. 95 => 'A'
      if (typeof input === 'number') {
        if (inRange(input, 90, 100)) {
          response = 'A';
        }
        if (inRange(input, 80, 89)) {
          response = 'B';
        }
        if (inRange(input, 70, 79)) {
          response = 'C';
        }
        if (inRange(input, 60, 69)) {
          response = 'D';
        }
        if (input < 60) {
          response = 'F';
        }

        return response;
      }
      // Return a range if a letter grade was passed
      // Ex. 'A' => '90 - 100'
      if (typeof input === 'string') {
        switch (input) {
          case 'A':
            response = '90 - 100';
            break;
          case 'B':
            response = '80 - 89';
            break;
          case 'C':
            response = '70 - 79';
            break;
          case 'D':
            response = '60 - 69';
            break;
          case 'F':
            response = '0 - 59';
            break;
          default:
            response = '0';
            break;
        }
        return response;
      }
    };
    ```

    * First we check to see if there is no input for grade, if so we immediately throw an error

      ```js
      if (!input) {
        throw new Error('no grade provided');
      }
      ```
    
    * Lets check out our helper function that will help us find out if a number falls within a certain range. This function will return a `boolean` value.

      ```js
      const inRange = (x, min, max) => (x - min) * (x - max) <= 0;
      ```

    * We check to see if the input is of type `number`, and if so we set up a series of if statements to assign different letter grades to the variable `response` depending on the range the number falls in. Finally we return the variable `response` if the input passed was a `number`.

      ```js
      let response;
      if (typeof input === 'number') {

        // check range using `inRange` helper function

        return response;
      }
      ```
    
    * The other if statement we set up was for when the input passed was of type `string`. If so, we then set up a switch statement to handle different cases of letter grades. Finally, depending on the case, we assign a new value to response and return it at the end.

      ```js
      if (typeof input === 'string') {

        // switch statement

        return response;
      }
      ```

    * Finally, we create an instance of the `Student` and test our `displayGrade` method by passing it a `grade` of `"A"`

      ```js
      const John = new Student('John', 'Appleseed', '30');
      console.log('John.displayGrade();', John.displayGrade('A')); // 90 - 100
      ```

* Ask the class the following questions (‚òùÔ∏è) and call on students for the answers (üôã):

  * ‚òùÔ∏è What is the core concept behind method overloading?

  * üôã Method overloading allows a method to behave differently depending on the parameters that are passed to it.

  * ‚òùÔ∏è What can we do if we don't completely understand this?

  * üôã We can refer to supplemental material and stick around for office hours to ask for help.

* Answer any questions before proceeding to the next activity.

### 12. Instructor Demo: Promises (5 min)

* Open [07-Ins-Promises](../.../../../01-Class-Content/10-OOP/01-Activities/07-Ins-Promises/index.js) in your IDE and demonstrate the following:

* Run `node index.js` from the command line and demonstrate the following: 

  * üîë When we run the file, we notice that we get an error with an output of "Child has bad grades"

  * üîë If we examine the code we can also see that there is a promise that is either being rejected or resolved based on some some condition.

  * üîë Promises in code follow the same logic they do in real life.

  * In our case we are examining a function that mirrors an example of a real life promise. The parents have promised to get their kid a Nintendo Switch if they get good grades in school. We can see the output change based on the value of `goodGrades` being true or false.

  ```js
  const goodGrades = false;

  // Promise
  const willGetSwitch = new Promise((resolve, reject) => {
    // Check for a desireable outcome, if so resolve the promise
    if (goodGrades) {
      const reward = {
        name: 'Nintendo Switch',
        desired: true,
      };
      resolve(reward);

      // Otherwise reject the promise
    } else {
      const issue = new Error('Child has bad grades');
      reject(issue);
    }
  });
  ```

* Ask the class the following questions (‚òùÔ∏è) and call on students for the answers (üôã):

  * ‚òùÔ∏è How would we build this?

  * üôã We can build this by returning a promise that resolves if the student has good grades and rejects if they have bad grades

* Answer any questions before proceeding to the next activity.

* In preparation for the activity, ask TAs to start directing students to the activity instructions found in [08-Stu-Promises](../../../../01-Class-Content/10-OOP/01-Activities/08-Stu-Promises/README.md)`.

### 13. Student Do: Promises (15 min)

* Direct students to the activity instructions found in [08-Stu-Promises](../../../../01-Class-Content/10-OOP/01-Activities/08-Stu-Promises/README.md)`.

* Break your students into pairs that will work together on this activity.

```md
# üèóÔ∏è Refactor Function to use Promises

Work with a partner to implement the following user story:

* As a developer, I want to be able to write asynchronous functions in a cleaner and easier to read fashion using promises.

* As a developer, I want to have the ability to refactor functions that use callbacks to instead return a promise. 

## Acceptance Criteria

* It's done when I refactor the function using callbacks, `practiceCoding`, inside of `practiceCodingPromise`.

* It's done when `practiceCodingPromise` returns a promise.

* It is complete when the function `practiceCodingPromise` is called using the `.then()` and `.catch()` methods. 


## üí° Hints

* How can we use the resolve method to handle a fulfillment of the promise?
* How can we use the reject method to handle the failure of a promise?
* How do promises in real life relate to promises in javascript?

## üèÜ Bonus

If you have completed this activity, work through the following challenge with your partner to further your knowledge:

* How could we resolve multiple promises at once?

Use [Google](https://www.google.com) or another search engine to research this.

---
¬© 2020 Trilogy Education Services, LLC, a 2U, Inc. brand. Confidential and Proprietary. All Rights Reserved.
```

* While breaking everyone into groups, be sure to remind students and the rest of the instructional staff that questions on Slack or otherwise are welcome and will be handled. It's a good way for your team to prioritize students that need extra help while circulating through room.

### 14. Instructor Review: Promises (10 min)

* Ask the class the following questions (‚òùÔ∏è) and call on students for the answers (üôã):

  * ‚òùÔ∏è How comfortable do you feel with promises? (Poll via Fist to Five, Slack, or Zoom)

* Assure students that we will cover the solution to help solidify their understanding. If questions remain, remind them to use office hours to get extra help!

* Use the prompts and talking points below to review the following key (üîë) points:

  * ‚úîÔ∏è Promises are objects that represent the eventual completion or failure of an asynchronous task and its return value.

  * ‚úîÔ∏è Promises are great for allowing us to return handlers instead of the return value itself.

  * ‚úîÔ∏è There only three states that a promise can be in
    * *pending*: initial state that is neither resolved or rejected
    * *fulfilled*: operation was resolved or successful
    * *rejected* the operation was rejected and failed
  
  * Promises can be chained and we have most likely used them already without realizing it

* Open [08-Stu-Promises](../../../../01-Class-Content/10-OOP/01-Activities/08-Stu-Promises/Solved/index.js) in your IDE and explain the following: 

  * We notice that we capture input from the student by setting it to a variable at the top of our application

    ```js
    const userInput = process.argv[2];
    console.log('Current user activity:', userInput);
    ```

  * We also want to check to see if the user forgot to provide any input at the begging of the application so that we can inform them of how to use the app. `process.exit()` will end execution of the program when called.

  ```js
  if (!userInput) {
    console.error(
      '\nPlease pass in the current activity of the student \nUsage: `node index <action>`'
    );
    process.exit();
  }
  ```

  * Our program relies on checking to see if the student is coding. We check if the current student action is anything other than "coding" and store the boolean result in a variable called `studentDistracted`.

  ```js
  const studentDistracted = userInput !== 'coding';
  ```

  * We are provided with a function that uses callbacks and our job is to refactor this into a function that returns a promise.

  ```js
  const callback = (message) => console.log(message);
  const errorCallback = (message) => console.log(message);

  const practiceCoding = (cb, errCb) => {
    if (studentDistracted) {
      errCb({
        issue: 'Distracted',
        message: 'Coding stopped',
      });
    } else {
      cb('We are coding!');
    }
  };

  practiceCoding(callback, errorCallback);
  ```

  * We refactor this code by declaring a function that returns a promise:

  ```js
  const practiceCodingPromise = () =>
    new Promise((resolve, reject) =>
      studentDistracted
        ? reject(new Error('Coding stopped - Student is distracted'))
        : resolve('We are coding!')
    );
  ```

  * üîë The promise calls the reject method in the event that the student is distracted. Otherwise, we resolve the promise because the student is coding which is our desired outcome.

  * Finally, we call our new function using a `.then()` to define the code that ought to run after the promise has been resolved, and a `.catch()` to decide how to handle any errors. 

* Ask the class the following questions (‚òùÔ∏è) and call on students for the answers (üôã):

  * ‚òùÔ∏è Why might we want to use promises over callbacks?

  * üôã While there are many reasons to use promises, one of the benefits is avoiding the excessive indentation in your code. This is sometimes referred to as "callback hell". Promises are easier to read and manage.

  * ‚òùÔ∏è What can we do if we don't completely understand this?

  * üôã We can refer to supplemental material, read the [documentation on MDN](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise) regarding promises, and stick around for Office Hours to ask for help.

* Answer any questions before proceeding to the next activity.

### 15. Instructor Demo: All about Promises (5 min)

* Open [09-Ins-Promises-2](01-Class-Content/10-OOP/01-Activities/09-Ins-Promises-2/index.js) in your IDE and demonstrate the following:

* Run `node index` from the command line and demonstrate the following: 

  * üîë When we run our `index` file, we notice a few things. We are logging the output of a promise that hasn't been fully resolved or rejected yet.

  ```bash
  Status of p3: Promise { <pending> }
  ```

  * üîë We also notice that we get a response from a `Promise.all()` being invoked. The results of `Promise.all()` include the results of all the promises that we pass in as an array.
  
  * One thing of note is that in this case, all three promises that we passed into our `Promise.all()` call were resolved and not rejected. If one of these were to fail, the `Promise.all()` would stop and return the result of the rejected promise. 

* Ask the class the following questions (‚òùÔ∏è) and call on students for the answers (üôã):

  * ‚òùÔ∏è How would we build this?

  * üôã We could start be declaring a few promise functions that we can later pass into our `Promise.all()`. Then we would invoke `Promise.all([promise1, promise2, promise3])` by passing in an array of the promises that we created previously.

* Answer any questions before proceeding to the next activity.

* In preparation for the activity, ask TAs to start directing students to the activity instructions found in [10-Stu-Promises-2](../../../../01-Class-Content/10-OOP/01-Activities/10-Stu-Promises-2/README.md).

### 16. Student Do: Implement `Promise.all()` (15 min)

* Direct students to the activity instructions found in `@TODO/folder/file`.

* Break your students into pairs that will work together on this activity.

```md
# üìñ Implement Promise.all() to Wait for Multiple API Calls

Work with a partner to implement the following user story:

* As a developer, I want to be able to wait for the results of multiple API calls before I display the end result.

## Acceptance Criteria

* It's done when the `callAPI` promise is rejected if the request is too long

* It's done when the `callAPI` promise is resolved if the API request is responded to within 10 seconds

* It's done when a single console log captures when all promises in an array have been resolved

* It's done when proper error handling has been put in place in case a promise in the array is rejected

## üìù Notes

Refer to the documentation: 

[MDN Web Docs on Promise.all()](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise/all)

---

## üí° Hints

* How are `.then()` and `.catch()` used in conjunction with promises?

## üèÜ Bonus

If you have completed this activity, work through the following challenge with your partner to further your knowledge:

* What is the state of each promise after the `setTimeout` has began but before it has ended?

Use [Google](https://www.google.com) or another search engine to research this.
```

* While breaking everyone into groups, be sure to remind students and the rest of the instructional staff that questions on Slack or otherwise are welcome and will be handled. It's a good way for your team to prioritize students that need extra help while circulating through room.

### 17. Instructor Review: Implement `Promise.all()` (15 min)

* Ask the class the following questions (‚òùÔ∏è) and call on students for the answers (üôã):

  * ‚òùÔ∏è How comfortable do you feel with `Promise.all()`? (Poll via Fist to Five, Slack, or Zoom)

* Assure students that we will cover the solution to help solidify their understanding. If questions remain, remind them to use office hours to get extra help!

* Use the prompts and talking points below to review the following key (üîë) points:

  * ‚úîÔ∏è The Promise object has multiple methods, one of which is the `.all()` method. This allows us to wait for all the promises involved to be resolved or rejected before we preform some other action.

  * ‚úîÔ∏è `Promise.all()` is useful when we have more than one promise and we would benefit from knowing when the operations for each promise have been resolved or completed. Imagine calling to three different third-party APIs. It would be nice if we had a way to wait for all the results to come back before we do something else. Enter `Promise.all()`.

* Open [10-Stu-Promises-2](../../../../01-Class-Content/10-OOP/01-Activities/10-Stu-Promises-2/Solved/index.js) in your IDE and explain the following: 

  * First we examine skeleton for a promise function that will resolve after a certain amount of time.

  ```js
  const callAPI = (duration) =>
  new Promise((resolve, reject) => {
    setTimeout(() => {
      // Check if the request duration is longer than maxDuration, if so call the reject() function with a new error, "Request timed out"
      // Otherwise, call resolve() with a message `Response received: ${duration}ms`
    }, duration);
  });
  ```

  * üîë The key to any promise is implementing resolve and reject. First we set up a conditional statement to check whether the duration of the API call is of greater length than the `maxDuration`. If so, we reject the promise, otherwise we resolve the promise:

    ```js
    const callAPI = (duration) =>
    new Promise((resolve, reject) => {
      setTimeout(() => {
        // If the request is taking too long we reject the promise
        if (duration >= maxDuration) {
          reject(new Error(`This request timed out`));
        } else {
          // If the request time is acceptable, we resolve the promise
          resolve(`Response received: ${duration}ms`);
        }
      }, duration);
    });
    ```

  * `Promise.all()` accepts and array as an argument. In preparation, we declare an empty array in memory to slot our other promises into at a later time. We named this variable `promises`.

  ```js
  const promises = [];
  ```

  * Next, we want to populate that `promises` array with some promises. Let's start by mapping over each API call duration and pushing an instance of `callAPI(duration)` for each individual API call duration:

  ```js
  apiCallDurations.map((duration) => promises.push(callAPI(duration)));
  console.log('Promises array before the timeouts have finished: ', promises);
  ```

  * üîë  We also included a console log to peek at our promises array to see what they look like before they have finished.

  * Finally, we actually call `Promise.all()` and also add our `.then` and `.catch`. If the API calls were successful, we want to log out the response from our API calls in our `.then()`. If anything went wrong, we want to catch it and log it out in our `.catch`:

  ```js
  Promise.all(promises)
    .then((response) => console.log('Response from Promise.all():', response))
    .catch((err) => console.error(err));
  ```


* Ask the class the following questions (‚òùÔ∏è) and call on students for the answers (üôã):

  * ‚òùÔ∏è What other use cases can you think of for `Promise.all()`.

  * üôã We could use `Promise.all()` when creating an application that has to send out a newsletter or email to several users at the same time.

  * ‚òùÔ∏è What can we do if we don't completely understand this?

  * üôã @TODO We can refer to supplemental material, read the [MDN documentation](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise) and stick around for Office Hours to ask for help.

* Answer any questions before ending the class.

### 18. END (0 min)

How did today‚Äôs lesson go? Your feedback is important. Please take 5 minutes to complete [this anonymous survey](https://forms.gle/RfcVyXiMmZQut6aJ6).

- - -

@TODO ¬© <year> Trilogy Education Services, LLC, a 2U, Inc. brand. Confidential and Proprietary. All Rights Reserved.
