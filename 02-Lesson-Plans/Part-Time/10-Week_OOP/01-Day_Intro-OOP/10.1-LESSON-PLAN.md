# 10.1 Part-Time Lesson Plan: Object-Oriented Programming (OOP)

## Instructors and TAs: Please take the Mid-Course Instructional Staff Survey

Trilogy as a company values transparency and data-driven change quite highly. As we grow, we know there will be areas that need improvement. It‚Äôs hard for us to know what these areas are unless we‚Äôre asking questions. Your candid input truly matters to us, as you are vital members of the Trilogy team. In addition to the individual feedback at the end of lesson plans, we would appreciate your feedback at the following link:
[https://forms.gle/yPfrY4CjNeAqbVKD6](https://forms.gle/yPfrY4CjNeAqbVKD6)

## Overview 

In this class, we will be covering some very important topics regarding object-oriented programming, including constructors, prototypes, polymorphism, and promises. 

## Instructor Notes

* In this lesson, students will complete activities `01-Ins_Constructors` through `10-Stu_Promise-All`.

* Be sure to prepare and read over the activities before your class begins. Try and anticipate questions students may have, especially on these core OOP topics!

* Remind students to do a `git pull` of the class repo to have today's activities ready and open in VS Code. 

* If you are comfortable doing so, live code the solutions to the activities. If not, no worries. Use the solutions provided and follow the prompts and talking points for review. 

* Let students know that the Bonus for each activity is meant to give them "food for thought." Rather than extra coding practice, it is a self-study on related topics that are beyond the scope of this unit for those who want to dig deeper and further their knowledge on this topic.

## Learning Objectives

By the end of class, students will be able to:

* Use constructor functions to create new objects.

* Use prototypical inheritance to add methods to objects.

* Explain polymorphism through method overloading.

* Implement Promise.all() to wait for multiple API calls.

## Slide Deck

* [Unit 10 Slide Deck](https://docs.google.com/presentation/d/1Heou5UD956vYb1d4YDCi4GobFCcz4geNifZmz0KISgg/edit?usp=sharing)

## Time Tracker
| Start  | #   | Activity Name                                | Duration |
| ------ | --- | -------------------------------------------- | -------- |
| 6:30PM | 1   | Instructor Do: Stoke Curiosity               | 0:10     |
| 6:40PM | 2   | Instructor Demo: Constructors                | 0:05     |
| 6:45PM | 3   | Student Do: Constructors                     | 0:15     |
| 7:00PM | 4   | Instructor Review: Constructors              | 0:10     |
| 7:10PM | 5   | Instructor Demo: Prototypes                  | 0:05     |
| 7:15PM | 6   | Student Do: Prototypes                       | 0:15     |
| 7:30PM | 7   | Instructor Review: Prototypes                | 0:10     |
| 7:40PM | 8   | Instructor Demo: Polymorphism                | 0:05     |
| 7:45PM | 9   | Student Do: Polymorphism                     | 0:15     |
| 8:00PM | 10  | BREAK                                        | 0:15     |
| 8:15PM | 11  | Instructor Review: Polymorphism              | 0:10     |
| 8:25PM | 12  | Instructor Demo: Promises                    | 0:05     |
| 8:30PM | 13  | Student Do: Promises                         | 0:15     |
| 8:45PM | 14  | Instructor Review: Promises                  | 0:10     |
| 8:55PM | 15  | Instructor Demo: Promise.all()               | 0:05     |
| 9:00PM | 16  | Student Do: Promise.all()                    | 0:15     |
| 9:15PM | 17  | Instructor Review: Promise.all()             | 0:15     |
| 9:30PM | 18  | END                                          | 0:00     |

---

## Class Instruction

### 1. Instructor Do: Stoke Curiosity (10 min)

* Welcome students to class.

* Open the [slide deck](https://docs.google.com/presentation/d/1Heou5UD956vYb1d4YDCi4GobFCcz4geNifZmz0KISgg/edit?usp=sharing) and follow these prompts on their corresponding slides:

  * **Constructors**
  
    * This unit will be an introduction to Object-Oriented Programming (OOP). In today's class, we will cover objects and constructors.

  * **What is programming?**: So what exactly is programming?
  
    * Programming is designing and building of an executable program that will accomplish a specific computing task. Essentially, programming is problem solving.

  * **What problems do we solve?**: What problems do programmers solve?

  * **Algorithms and Automation** 
  
    * Programming allows for us to solve almost any task or problem on a computer. There are two primary categories: Algorithms and Automation.

  * **What is DRY?**: What does DRY mean?
  
    * DRY stands for ‚ÄúDon‚Äôt Repeat Yourself!‚Äù. Rewriting code wastes time, memory, and can confuse later readers and/or contributors to your code.

  * **What is an object?**
  
    * Objects in JavaScript are unordered collections of related data built on a key:value structure where values can be any data-type, including functions. 

  * **Why are objects important in Javascript**: What makes objects so important?

  * **Everything is an object!**
  
    * Well, almost everything. Arrays, Date, Math, even functions are objects! Primitive types are NOT objects.
  
  * **How do we create Objects**
  
    * We can use object literals, the `new` keyword and constructors 

  * **What is object-oriented programming?**
    
    * OOP is a programming paradigm or pattern of programming centered around objects. Problems are thought of in a way in which a collection of objects work together to solve a problem.

  * **How can we learn to use OOP?**
  
    * When we use objects to model real world things we want to represent in code, and provide functionality that would otherwise be hard or impossible - we begin to see the value of OOP.

    * We can try the following strategies to learn OOP:

      1. Read the docs and practice with the provided examples.
    
      2. Reverse-engineer finished code to see how it was created.
    
      3. Build something from scratch.
    
      4. Debug a broken app using Chrome DevTools.
    
      5. And most importantly, ask questions!

  * **Mini Project**

    * This unit's mini-project will be building a Word Guessing CLI game!

* Navigate to `01-Class-Content/10-OOP/01-Activities/28-Stu_Mini-Project/Main` and run `npm install` in your command line.

* Run `npm start` to start the Word Guessing CLI game and demonstrate the following:

  * In this assignment we are going to take what we have learned with object oriented programming and build a Word Guess command-line game.

  * This is a fun way for us to use classes in conjunction with `inquirer` and `Node.js` to demonstrate our skills.

  * We are given 10 chances to guess letters in order to complete the word.

* Ask the class the following questions (‚òùÔ∏è) and call on students for the answers (üôã):

  * ‚òùÔ∏è What are we learning?

  * üôã We are utilizing Object Oriented Programming, ES6 classes and constructor functions to build a command line app.

  * ‚òùÔ∏è How does this project build off or extend previously learned material?

  * üôã This will build upon our knowledge of Node.js and newer ES6 syntax.

  * ‚òùÔ∏è How does this project relate to your career goals?

  * üôã Building an app like this is an exercise in building application using javascript outside of the browser. This is the fundamental characteristic of back end development, and we are just starting to scratch the surface.

* Answer any questions before proceeding to the next activity.

### 2. Instructor Demo: Constructors (5 min) 

* Navigate to `01-Ins_Constructors` and run `node index.js` from the command line to demonstrate the following: 

  * üîë When we run the program, we see the following output in the console.

  ```
  Woof!
  ```

* Open `01-Ins_Constructors/index.js` in your IDE and explain the following:

  * üîë We create a constructor function called `Animal` that takes in two parameters, `raining` and `noise`.

  ```js
  function Animal(raining, noise) {
  ```

  * üîë We pass the `raining` and `noise` parameters into the object's keys as their value.

  ```js
  this.raining = raining;
  this.noise = noise;
  ```

  * üîë The third key is a function called `makeNoise()`. The function checks if the `raining` key's value is `true`. If it is, it will log the value of the key's `noise` in the console.

  ```js
  this.makeNoise = function() {
    if (this.raining === true) {
      console.log(this.noise);
    }
  };
  ```

  * When we run `node catsDogs.js` in the console, the `dog` and `cat` objects are created and the `makeNoise()` method is called on them.

  ```js
  let dog = new Animal(true, "Woof!");
  let cat = new Animal(false, "Meow!");

  dog.makeNoise();
  cat.makeNoise();
  ```

  * Only the `dog`'s "Woof!" will be logged in the console since its `raining` value is set to `true`.

  * However, if we set the `raining` value of `cat` to `true` and call the `makeNoise()` method, it will make it "Meow!" in the console.

  ```js
  cat.raining = true;
  cat.makeNoise();
  ```

  * Not only that, but since both `dogs.raining` and `cats.raining` are set to `true`, the `massHysteria()` method will now print out its message in the console. 

* Run `node index.js` from the command line again to demonstrate the following:

  * Now we see the "Meow!" as well as "DOGS AND CATS LIVING TOGETHER! MASS HYSTERIA!" in the console.

  ```
  Woof!
  Meow!
  DOGS AND CATS LIVING TOGETHER! MASS HYSTERIA!
  ```

* Ask the class the following questions (‚òùÔ∏è) and call on students for the answers (üôã):

  * ‚òùÔ∏è How could we use constructor functions in our applications?

  * üôã We can use constructor functions to create objects quickly and easily.

* Answer any questions before proceeding to the next activity.

* In preparation for the activity, ask TAs to start directing students to the activity instructions found in `02-Stu_Constructors/README.md`.

### 3. Student Do: Constructors (15 min) 

* Direct students to the activity instructions found in `02-Stu_Constructors/README.md`.

* Break your students into pairs that will work together on this activity.

```md
# üèóÔ∏è Create objects using a constructor function

Work with a partner to implement the following user story:

* As a developer, I want to create new objects quickly using a constructor function.

## Acceptance Criteria

* It's done when the constructor function is named `Developer` and it takes in two parameters, `name` and `tech`.

* It's done when the parameters are passed into the object's keys as their values.

* It's done when the object's third key is a method called `introduction()` that prints a message in the console introducing its `name` and what `tech` they like.

* It's done when I create a new object using the `Developer` constructor with a `name` and `tech` of my choice.

* It's done when the introduction of my new object is printed in the console.

## üí° Hints

How can we use template literals to print an introduction like "Hi, my name is Rita and I love JavaScript!"?

## üèÜ Bonus

If you have completed this activity, work through the following challenge with your partner to further your knowledge:

* What are some built-in JavaScript constructors for native objects?

Use [Google](https://www.google.com) or another search engine to research this.
```

* While breaking everyone into groups, be sure to remind students and the rest of the instructional staff that questions on Slack or otherwise are welcome and will be handled. It's a good way for your team to prioritize students that need extra help while circulating through room.

### 4. Instructor Review: Constructors (10 min) 

* Ask the class the following questions (‚òùÔ∏è) and call on students for the answers (üôã):

  * ‚òùÔ∏è How comfortable do you feel with constructors? (Poll via Fist to Five, Slack, or Zoom)

* Assure students that we will cover the solution to help solidify their understanding. If questions remain, remind them to use office hours to get extra help!

* Use the prompts and talking points below to review the following key (üîë) points:

  * ‚úîÔ∏è Constructor function

  * ‚úîÔ∏è `introduction()` method

* Open `02-Stu_Constructors/Solved/index.js` in your IDE and explain the following: 

  * üîë We create a constructor function named `Developer` that takes in two parameters, `name` and `tech`.

  ```js
  function Developer(name, tech) {

  }
  ```

  * We pass in the `name` and `tech` parameters into the object's keys as their values.

  ```js
  this.name = name;
  this.tech = tech;
  ```

  * üîë The third key is a method called `introduction()` and we use template literals to print the message in the console.

  ```js
  this.introduction = () => {
    console.log(`Hi, my name is ${this.name} and I love ${this.tech}!`);
  };
  ```

  * We create a new object to test out the `Developer` constructor. You could've used any name and technology you wanted. For our example, we will use "Rita".

  ```js
  const rita = new Developer('Rita', 'JavaScript');
  ```

  * We call the `introduction()` method on `rita` to print the message int he console.

  ```js
  rita.introduction()
  ```

* Run `node index.js` from your command line and demonstrate the following:

  * We see Rita's introduction in the console!

  ```
  Hi, my name is Rita and I love JavaScript!
  ```

* Ask the class the following questions (‚òùÔ∏è) and call on students for the answers (üôã):

  * ‚òùÔ∏è How can we add a method to a constructor?

  * üôã We must add methods to an object constructor inside the constructor function. Or we can use the `prototype` property to add methods to existing constructors.

* Answer any questions before proceeding to the next activity.

### 5. Instructor Demo: Prototypes (5 min) 

* Open DevTools in Google Chrome and demonstrate the following:

  * üîë Everything in JavaScript is an object! `String`s, `Date`s, `Number`s, `Array`s, `Object`s.. they are all standard built-in objects in JavaScript. 
  
  * üîë Objects in JavaScript have a `prototype` object. A link is made between the object instance and its prototype (its `__proto__` property, which is derived from the prototype property on the constructor). Properties and methods are found by walking up the chain of prototypes.

  * üîë For example, in our DevTools, let's create a new array.

  ```js
  myArray = [2, 4, 6, 8];
  ```

  * Next, let's start typing `myArray.`. Once we type the period, we see a list of properties and methods defined on `myArray`'s prototype object, which is `Array.prototype`. If we click on `__proto__`, we can see the full list of inherited methods. Among them is the `forEach()` method.

  * Let's apply that method to our `myArray` array.

  ```js
  myArray.forEach((num) => console.log(num));
  ```

  * The result will be every number in the array logging in the console. We were able to use the `Array.prototype.forEach()` method because `myArray` was derived from the build-in Array object.
  
  * üîë Not only that, but we can access methods and properties further up the prototype chain. In DevTools, let's create a `person` object with the occupation of "Full-Stack Web Developer", which is a `string`. 

  ```js
  const person = {
    name: 'Eric',
    age: 28,
    occupation: 'Full-Stack Web Developer',
  };
  ```
  
  * `person` is an Object, but when we type `person.occupation.__proto__` in the console, we see it returns `String¬†{"", constructor: ∆í, anchor: ∆í, big: ∆í, blink: ∆í,¬†‚Ä¶}` which you can expand. Since, `occupation` is `string`, it has access to the `String` prototype. Of the many methods available, let's try `toLowerCase()` to convert the `occupation` into all lower case.

  ```js
  person.occupation.toLowerCase();
  ```

  * But these are all built-in methods of JavaScript. What if we wanted to make our own prototype methods?

  * In DevTools, create a constructor function named `Movie`, which will take in two arguments, `title` and `releaseYear`.

  ```js
  function Movie(title, releaseYear) {
    this.title = title;
    this.releaseYear = releaseYear;
  }
  ```

  * Create a movie using the constructor function.

  ```js
  const superman = new Movie('Superman', 1978);
  ```

  * Let's say we want to modify the `prototype` property of this constructor function by adding a method that will then be available on all object instances created from the constructor. This method, `logInfo()`, will log information about the movies in the console.

  ```js
  Movie.prototype.logInfo = function () {
    console.log(`${this.title} was released in ${this.releaseYear}`);
  };
  ```

  * To test it out, call the method on the `superman` object.

  ```js
  superman.logInfo(); // => Superman was released in 1978
  ```

  * The best thing about this is that this new method is now available on all object instances derived from the `Movie` constructor. 
  
  * And although we added this new method to the constructor's prototype **after** we created the `superman` instance object from the constructor, the method was still available on the `superman` object instance!

* Ask the class the following questions (‚òùÔ∏è) and call on students for the answers (üôã):

  * ‚òùÔ∏è How can we check if an object has the specified property as its own property or if it's been inherited?

  * üôã We can use the `hasOwnProperty()` method. It will return a `Boolean`. For example, if we check `superman.hasOwnProperty('logInfo')` it will return `false` because this method is not a direct method of the object. Instead, if we check `Movie.prototype.hasOwnProperty('logInfo')`, this is return `true`.

* Answer any questions before proceeding to the next activity.

* In preparation for the activity, ask TAs to start directing students to the activity instructions found in `04-Stu_Prototypes/README.md`.

### 6. Student Do: Prototypes (15 min)

* Direct students to the activity instructions found in `04-Stu_Prototypes/README.md`.

* Break your students into pairs that will work together on this activity.

```md
# üìê Add Comments to Implementation of Prototypes

Work with a partner to add comments describing the functionality of the code found in [index.js](./Unsolved/index.js).

## üìù Notes

Refer to the documentation: 

[MDN Web Docs on prototypes](https://developer.mozilla.org/en-US/docs/Learn/JavaScript/Objects/Object_prototypes)

## üèÜ Bonus

If you have completed this activity, work through the following challenge with your partner to further your knowledge:

* What is the difference between adding a method inside the constructor versus adding it to the prototype?

Use [Google](https://www.google.com) or another search engine to research this.
```

* While breaking everyone into groups, be sure to remind students and the rest of the instructional staff that questions on Slack or otherwise are welcome and will be handled. It's a good way for your team to prioritize students who need extra help.

### 7. Instructor Review: Prototypes (10 min) 

* Ask the class the following questions (‚òùÔ∏è) and call on students for the answers (üôã):

  * ‚òùÔ∏è How comfortable do you feel with prototypes? (Poll via Fist to Five, Slack, or Zoom)

* Assure students that we will cover the solution to help solidify their understanding. If questions remain, remind them to use office hours to get extra help!

* Use the prompts and talking points (üîë) below to review the following key points:

  * ‚úîÔ∏è `.prototype`

* Open `04-Stu_Prototypes/Solved/index.js` in your IDE and explain the following: 

  * This function is a `constructor` called `Character` that will take in 5 arguments. We assign those arguments to keys in our `constructor`.

  ```js
  function Character(name, type, age, strength, hitpoints) {
    this.name = name;
    this.type = type;
    this.age = age;
    this.strength = strength;
    this.hitpoints = hitpoints;
  }
  ```

  * üîë `printStats()` is a method that is added to the `prototype` of `Character`. We do this to avoid re-declaring the method in memory each time we create an instance of `Character`. We can define the method once on the `prototype` and simply point each instance to it.

  ```js
  Character.prototype.printStats = function () {
    console.log(
      `Name: ${this.name}\nProfession: ${this.type}\nAge: ${this.age}\nStrength: ${this.strength}\nHitPoints: ${this.hitpoints}`
    );
    console.log('\n-------------\n');
  };
  ```

  * We add an `isAlive()` prototype method which determines if "hitpoints" are greater than zero and returns a boolean depending on whether the character is alive or not.

  ```js
  Character.prototype.isAlive = function () {
    if (this.hitpoints > 0) {
      console.log(`${this.name} is still alive!`);
      console.log('\n-------------\n');
      return true;
    }
    console.log(`${this.name} has died!`);
    return false;
  };
  ```

  * We also add two other functions to our `prototype`. The `attack()` method takes in a second object and decreases their "hitpoints" by this character's strength. The `levelUp()` method increases `this` character's stats when called.

  ```js
  Character.prototype.attack = function(character2) {
    character2.hitpoints -= this.strength;
  };

  Character.prototype.levelUp = function() {
    this.age += 1;
    this.strength += 5;
    this.hitpoints += 25;
  };
  ```

  * Finally we can use our constructor function to create two characters and make them "fight" in our console by calling their prototype methods.

  ```js
  const warrior = new Character('Crusher', 'Warrior', 25, 10, 75);
  const rogue = new Character('Dodger', 'Rogue', 23, 20, 50);

  warrior.printStats();
  rogue.printStats();

  rogue.attack(warrior);

  warrior.printStats(); // => Crusher HitPoints: 55
  warrior.isAlive(); // => Crusher is still alive!

  rogue.levelUp();
  rogue.printStats(); // => Dodger HitPoints: 75
  ```

* Ask the class the following questions (‚òùÔ∏è) and call on students for the answers (üôã):

  * ‚òùÔ∏è Why don't we just declare the methods in the constructor?

  * üôã When we bind a function using the `this` keyword, the method only exists on that instance of the object. For any method bound to `this`, it will be re-declared with each new instance of an object.

  * ‚òùÔ∏è How does the prototype help us solve this problem?

  * üôã The prototype allows us to declare methods that will be attached to all instances of an object of that prototype. Because the method is applied to the prototype, it is only stored in memory once for all instances.

  * ‚òùÔ∏è What can we do if we don't completely understand this?

  * üôã We can refer to supplemental material, read the [MDN Web Docs on Object Prototypes](https://developer.mozilla.org/en-US/docs/Learn/JavaScript/Objects/Object_prototypes) and stick around for Office Hours to ask for help.

* Answer any questions before proceeding to the next activity.

### 8. Instructor Demo: Polymorphism (5 min)

* Navigate to `05-Ins_Polymorphism/` and run `node index.js` from the command line to demonstrate the following: 

  * üîë We see that `x = 5` and `y = 7`, so the area of the rectangle is calculated to be 35 sq units.

  * üîë But then we see that `x = 5` and `y is not provided`. That implies that this is a square, so the area of the square is 25 sq units.

* Open `05-Ins_Polymorphism/index.js` in your IDE and explain the following:

  * üîë This example uses a concept in polymorphism called method overloading. Method overloading allows a constructor to have a single method that behaves differently based on what what kind of data is provided to that method as an argument.

  * In this example, we have an `area` method that will return the area of a rectangle based on how many arguments are passed into it.

  ```js
  const OverloadDemo = function () {
    this.area = function (x, y) {
      console.log('x = ', x);
    }
  ```

  * We use a conditional statement to check if `y` is passed in. If there is no `y` argument, then we log `y is not provided` into the console along with the area of the square.

  ```js
  if (!y) {
    console.log('y is not provided');
    return `\nThe area of the square is ${Math.pow(x, 2)} sq units`;
  }
  ```

  * Otherwise, we log the value of `y` along with the area of the rectangle.

  ```js
  console.log('y = ', y);
  return `\nThe area of the rectangle is ${x * y} sq units`;
  ```

  * This is made possible by the concept of Polymorphism. In OOP, it is the ability to create a variable, a function, or an object that has more than one form. 
  
  * One important thing to notice in this example is that the data is being passed directly to the method instead of relying on data inside the constructor.

* Ask the class the following questions (‚òùÔ∏è) and call on students for the answers (üôã):

  * ‚òùÔ∏è How would we implement method overload in our application?

  * üôã We will need to use either a `if` statement or `switch` statement to determine what is returned by the method.

* Answer any questions before proceeding to the next activity.

* In preparation for the activity, ask TAs to start directing students to the activity instructions found in `06-Stu_Polymorphism/README.md`.

### 9. Student Do: Polymorphism (15 min)

* Direct students to the activity instructions found in `06-Stu_Polymorphism/README.md`.

* Break your students into pairs that will work together on this activity.

```md
# üêõ Implement Polymorphism Using Method Overloading

Work with a partner to resolve the following issue(s):

* As a developer, I want to understand the concept of polymorphism by writing code that utilizes method overloading.

## Expected Behavior

* When the user passes in a number grade, like `95`, into the `displayGrade` method, the method should return a string indicating the letter grade, like `A`.

* When the user passes in a letter grade, like `B`, into the `displayGrade` method, the method should return a string indicating the range of the grade percentage, like `80-89`. 

## Actual Behavior

When the user passes in a number grade or letter grade, the method returns `undefined`

## Steps to Reproduce the Problem

1. Run `node index.js` from the command line.

---

## üí° Hints

* We are given an `inRange` helper function. How might that come in handy?

* How can we use switch statements to help code out the solution? 

## üèÜ Bonus

If you have completed this activity, work through the following challenge with your partner to further your knowledge:

* Think of another method that you could implement that would use the parameters of the method to behave a certain way. How could you check the number of arguments that were passed to a method?

Use [Google](https://www.google.com) or another search engine to research this.
```

* While breaking everyone into groups, be sure to remind students and the rest of the instructional staff that questions on Slack or otherwise are welcome and will be handled. It's a good way for your team to prioritize students that need extra help while circulating through room.

### 10. BREAK (15 min)

### 11. Instructor Review: Polymorphism (10 min)

* Ask the class the following questions (‚òùÔ∏è) and call on students for the answers (üôã):

  * ‚òùÔ∏è How comfortable do you feel with polymorphism and method overloading? (Poll via Fist to Five, Slack, or Zoom)

* Assure students that we will cover the solution to help solidify their understanding. If questions remain, remind them to use office hours to get extra help!

* Use the prompts and talking points (üîë) below to review the following key points:

  * ‚úîÔ∏è Method overloading

* Open `06-Stu-Polymorphism/Solved/index.js` in your IDE and explain the following: 

  * When we open this file at the top of the file we see a helper function and also a constructor called `Student`.

  ```js
  const inRange = (x, min, max) => (x - min) * (x - max) <= 0;

  function Student(first, last, age) {
    this.firstName = first;
    this.lastName = last;
    this.age = age;
  ```

  * We also see a method on the `Student` constructor called `displayGrade()`. Our task was to flesh out this method by checking the data type for the value of `grade`. 
  
  * We check to see if there is no input for grade, and if so, we immediately throw an error.

  ```js
  this.displayGrade = function (grade) {
    const input = grade;
    if (!input) {
      throw new Error('no grade provided');
    }
  ```

  * Then we declare the variable `response` to be used in our conditional statements.

  ```js
  let response;
  ```
  
  * üîë We respond differently depending on whether or not the `input` is a string or a number. So first, we will check if the `input` is a number. If so, using a series of `if` statements and the helper function `inRange`, we will set the `response` variable to the letter grade and return it.

  ```js
  if (typeof input === 'number') {
    if (inRange(input, 90, 100)) {
      response = 'A';
    }
    if (inRange(input, 80, 89)) {
      response = 'B';
    }
    if (inRange(input, 70, 79)) {
      response = 'C';
    }
    if (inRange(input, 60, 69)) {
      response = 'D';
    }
    if (input < 60) {
      response = 'F';
    }

    return response;
  }
  ```
  
  * üîë If the `input` is a string, we set up a `switch` statement to handle different cases of letter grades, set the `response` variable to the range of grades, and return it.

  ```js
  if (typeof input === 'string') {
    switch (input) {
      case 'A':
        response = '90 - 100';
        break;
      case 'B':
        response = '80 - 89';
        break;
      case 'C':
        response = '70 - 79';
        break;
      case 'D':
        response = '60 - 69';
        break;
      case 'F':
        response = '0 - 59';
        break;
      default:
        response = '0';
        break;
    }
    return response;
  }
  ```

  * Finally, we create an instance of the `Student` and test our `displayGrade` method by passing it a `grade` of `95` and another try with `'B'`. When we run `node index.js`, we see the grades logged in the console:

  ```sh
  John.displayGrade(): A
  John.displayGrade(): 80 - 89
  ```

* Ask the class the following questions (‚òùÔ∏è) and call on students for the answers (üôã):

  * ‚òùÔ∏è What is the core concept behind method overloading?

  * üôã Method overloading allows a method to behave differently depending on the parameters that are passed to it.

  * ‚òùÔ∏è What can we do if we don't completely understand this?

  * üôã We can refer to supplemental material and stick around for office hours to ask for help.

* Answer any questions before proceeding to the next activity.

### 12. Instructor Demo: Promises (5 min)

* Open `07-Ins-Promises/index.js` in your IDE and explain the following:

  * The `promise` object represents the completion or the failure of an asynchronous operation and its result. 

  * üîë Let's use the example of a real-life promise. Let's say parents promised their child a Nintendo Switch if the child finished all their chores. If the `choresDone` is `true`, the promise will be resolved. But if not, there will be an error and the promise will be rejected.

  ```js
  const choresDone = false;

  // Promise
  const willGetSwitch = new Promise((resolve, reject) => {
    // Check for a desireable outcome, if so resolve the promise
    if (choresDone) {
      const reward = {
        name: 'Nintendo Switch',
        desired: true,
      };
      resolve(reward);

      // Otherwise reject the promise
    } else {
      const issue = new Error('Child did not finish chores as promised');
      reject(issue);
    }
  });
  ```

  * A promise is a returned object to which you attach callbacks, instead of passing callbacks into a function. Callbacks added with `then()` will be called **after** the success or failure of the asynchronous operation. 

  * In our case, we have a callback `playGames` that will be called only if the first promise is resolved.

  ```js
  const playGames = (reward) => {
    const message = `I am playing games on my new ${reward.name}`;
    return Promise.resolve(message);
  };
  ```

  * Multiple callbacks may be added by calling `then()` several times. Each callback is executed one after another in the order in which they were inserted.

  ```js
  willGetSwitch
    .then(playGames)
    .then((resolved) => console.log(resolved))
    .catch((err) => console.error(err));
  ```

  * The `catch()` is short for `then(null, failureCallback)` and will catch any errors that happened.

* Run `node index.js` in the command line to demonstrate the following:

  * If we try to run `index.js` with `choresDone` set to `false`, we get an error in the console. 

  ```
  Error: Child did not finish chores as promised
  ```

  * If we change `choresDone` to `true` and run `node index.js` again, we see that the promise resolved successfully and the child is playing games on his new Nintendo Switch.

  ```
  I am playing games on my new Nintendo Switch
  ```

* Ask the class the following questions (‚òùÔ∏è) and call on students for the answers (üôã):

  * ‚òùÔ∏è How can we write asynchronous functions in a cleaner way?

  * üôã We can use promises instead of callbacks.

* Answer any questions before proceeding to the next activity.

* In preparation for the activity, ask TAs to start directing students to the activity instructions found in `08-Stu_Promises/README.md`.

### 13. Student Do: Promises (15 min)

* Direct students to the activity instructions found in `08-Stu_Promises/README.md`.

* Break your students into pairs that will work together on this activity.

```md
# üêõ Refactor Function to use Promises

Work with a partner to resolve the following issue(s):

* Refactor the `practiceCoding()` function to use promises instead of callbacks.

## Expected Behavior

* When the user enters `node index.js coding`, the following should be logged in the console:

  Current user activity: coding
  We are coding in promises!

* When the user enters `node index.js nothing`, the following should be logged in the console:

  Current user activity: nothing
  Promise rejected: Error: Coding stopped - Student is distracted

## Actual Behavior

* When the user enters `node index.js coding`, the following is logged in the console:

  Current user activity: coding
  We are coding!

* When the user enters `node index.js nothing`, the following is logged in the console.

  Current user activity: nothing
  { issue: 'Distracted', message: 'Coding stopped' }

## Steps to Reproduce the Problem

1. Run `node index.js coding` to see the message logged in the console.

2. Run `node index.js nothing` to see the error message logged in the console.

---

## üí° Hints

* How can we use the resolve method to handle the fulfillment of a promise?

* How can we use the reject method to handle the failure of a promise?

## üèÜ Bonus

If you have completed this activity, work through the following challenge with your partner to further your knowledge:

* How could we resolve multiple promises at once?

Use [Google](https://www.google.com) or another search engine to research this.
```

* While breaking everyone into groups, be sure to remind students and the rest of the instructional staff that questions on Slack or otherwise are welcome and will be handled. It's a good way for your team to prioritize students that need extra help while circulating through room.

### 14. Instructor Review: Promises (10 min)

* Ask the class the following questions (‚òùÔ∏è) and call on students for the answers (üôã):

  * ‚òùÔ∏è How comfortable do you feel with promises? (Poll via Fist to Five, Slack, or Zoom)

* Assure students that we will cover the solution to help solidify their understanding. If questions remain, remind them to use office hours to get extra help!

* Use the prompts and talking points below to review the following key (üîë) points:

  * ‚úîÔ∏è `reject()`

  * ‚úîÔ∏è `resolve()`

  * ‚úîÔ∏è `.then()`

  * ‚úîÔ∏è `.catch()`

* Open `08-Stu_Promises/Solved/index.js` in your IDE and explain the following: 

  * We capture the user's input by setting it to a variable at the top of our application

  ```js
  const userInput = process.argv[2];
  console.log('Current user activity:', userInput);
  ```

  * If the user doesn't enter anything, we return an error message and include instruction on how to use the application. `process.exit()` will end execution of the program when called.

  ```js
  if (!userInput) {
    console.error(
      '\nPlease enter your current activity\nUsage: `node index.js <activity>`'
    );
    process.exit();
  }
  ```

  * Our application relies on checking to see if the student is coding. We check if the current student action is anything other than "coding" and store the boolean result in a variable called `studentDistracted`.

  ```js
  const studentDistracted = userInput !== 'coding';
  ```

  * We refactor the `practiceCoding()` function from using callbacks to using promises.

  ```js
  const practiceCoding = () =>
    new Promise((resolve, reject) => {

    }
  ```

  * üîë Following the same logic as the original `practiceCoding()` function, our promise calls the `reject()` method if `studentDistracted` is set to `true`. 

  ```js
  if (studentDistracted) {
    reject(new Error('Coding stopped - Student is distracted'));
  }
  ```
  
  * üîë Otherwise, we resolve the promise because the student is coding which is our desired outcome.

  ```js
  resolve('We are coding!');
  ```

  * üîë We call the `practiceCoding()` function and chain a `.then()` to define the code that ought to run after the promise has been resolved. Lastly, we chain a `.catch()` to log any errors in the console. 

  ```js
  practiceCoding()
    .then(() => console.log('We are coding in promises!'))
    .catch((err) => console.error('Promise rejected:', err));
  ```

* Ask the class the following questions (‚òùÔ∏è) and call on students for the answers (üôã):

  * ‚òùÔ∏è Why might we want to use promises over callbacks?

  * üôã While there are many reasons to use promises, one of the benefits is avoiding the excessive indentation in your code. This is sometimes referred to as "callback hell". Promises are easier to read and manage.

  * ‚òùÔ∏è What can we do if we don't completely understand this?

  * üôã We can refer to supplemental material, read the [MDN Web Docs on promises](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise), and stick around for Office Hours to ask for help.

* Answer any questions before proceeding to the next activity.

### 15. Instructor Demo: Promise.all() (5 min)

* Navigate to `09-Ins_Promise-All` and run `node index.js` in your command line to demonstrate the following:

  * üîë We see the statuses of three promises. `p1` resolved right away but the other two are pending.

  ```bash
  Status of p1: Promise { 'Resolved right away' }
  Status of p2: Promise { <pending> }
  Status of p3: Promise { <pending> }
  ```

  * üîë Then after a few seconds we see the returned array from the `Promise.all()`.

  ```bash
  The returned array from our Promise.all() call:
  [
    'Resolved right away',
    'Resolved after 1 second',
    'Resolved after 3 seconds'
  ]
  ```

* Open `09-Ins_Promise-All/index.js` in your IDE and explain the following:
  
  * üîë We see that `p1` is a promise that resolves right away. 

  ```js
  const p1 = new Promise((resolve, reject) => {
    const time = 0;
    if (time < 0) {
      reject(new Error('Something went wrong'));
    } else {
      resolve('Resolved right away');
    }
  });
  console.log('Status of p1:', p1);
  ```
  
  * üîë But `p2` and `p3` takes a few seconds to resolve. Therefore, when we try to log it in the console, we are logging the output of a promise that hasn't been fully resolved or rejected yet.

  ```js
  // Promise resolved after one second
  const p2 = new Promise((resolve, reject) => {
    const time = 1000;
    if (time < 0) {
      reject(new Error('Something went wrong'));
    } else {
      setTimeout(() => {
        resolve('Resolved after 1 second');
      }, time);
    }
  });
  console.log('Status of p2:', p2);

  // Promise resolved after three seconds
  const p3 = new Promise((resolve, reject) => {
    const time = 3000;
    if (time < 0) {
      reject(new Error('Something went wrong'));
    } else {
      setTimeout(() => {
        resolve('Resolved after 3 seconds');
      }, time);
    }
  });
  console.log('Status of p3:', p3);
  ```

  * üîë `Promise.all()` is useful when we have more than one promise and we would benefit from knowing when the operations for each promise have been resolved or completed. Imagine calling three different third-party APIs. It would be nice if we had a way to wait for all the results to come back before we do something else. Enter `Promise.all()`.

  * üîë When all of the promises are resolved (or rejected), we get a response from a `Promise.all()` being invoked. The results of `Promise.all()` include the results of all the promises that we pass in as an array.

  ```js
  Promise.all([p1, p2, p3])
  .then((values) => {
    console.log('\nThe returned array from our Promise.all() call:');
    console.log(values);
  })
  .catch((err) => new Error(err));
  ```
  
  * üîë One thing of note is that in this case, all three promises that we passed into our `Promise.all()` call were resolved and not rejected. If one of these were to fail, the `Promise.all()` would stop and return the result of the rejected promise. 

* Ask the class the following questions (‚òùÔ∏è) and call on students for the answers (üôã):

  * ‚òùÔ∏è How can we utilize `Promise.all()`?

  * üôã We can use `Promise.all()` to take in multiple promises and return a single `Promise` that resolves to an array of the results of the input promises.

* Answer any questions before proceeding to the next activity.

* In preparation for the activity, ask TAs to start directing students to the activity instructions found in `10-Stu_Promise-All/README.md`.

### 16. Student Do: Promise.all() (15 min)

* Direct students to the activity instructions found in `10-Stu_Promise-All/README.md`.

* Break your students into pairs that will work together on this activity.

```md
# üìñ Implement Promise.all() to Wait for Multiple API Calls

Work with a partner to implement the following user story:

* As a developer, I want to be able to wait for the results of multiple API calls before I display the end result.

## Acceptance Criteria

* It's done when the `callAPI` promise is rejected if the request takes longer than the `maxDuration`.

* It's done when the rejected promise throws a new error stating "This request timed out". 

* It's done when the `callAPI` promise is resolved if the request is made within the `maxDuration`.

* It's done when the resolved promise states "Response received: #### ms" including the duration. 

* It's done when `Promise.all()` is used to capture the array of promises and return the responses in the console.

## üìù Notes

Refer to the documentation: 

[MDN Web Docs on Promise.all()](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise/all)

## Assets

The following output demonstrates the expected console logs after running `node index.js` in the command line:

Promises array before the timeouts have finished:  [
  Promise { <pending> },
  Promise { <pending> },
  Promise { <pending> },
  Promise { <pending> }
]
Response from Promise.all(): [
  'Response received: 3000ms',
  'Response received: 4000ms',
  'Response received: 5000ms',
  'Response received: 6000ms'
]

---

## üí° Hints

* How are `.then()` and `.catch()` used in conjunction with promises?

## üèÜ Bonus

If you have completed this activity, work through the following challenge with your partner to further your knowledge:

* What is the state of each promise after the `setTimeout()` has begun but before it has ended?

Use [Google](https://www.google.com) or another search engine to research this.
```

* While breaking everyone into groups, be sure to remind students and the rest of the instructional staff that questions on Slack or otherwise are welcome and will be handled. It's a good way for your team to prioritize students that need extra help while circulating through room.

### 17. Instructor Review: Promise.all() (15 min)

* Ask the class the following questions (‚òùÔ∏è) and call on students for the answers (üôã):

  * ‚òùÔ∏è How comfortable do you feel with `Promise.all()`? (Poll via Fist to Five, Slack, or Zoom)

* Assure students that we will cover the solution to help solidify their understanding. If questions remain, remind them to use office hours to get extra help!

* Use the prompts and talking points below to review the following key (üîë) points:

  * ‚úîÔ∏è `resolve()`
  
  * ‚úîÔ∏è `reject()`

  * ‚úîÔ∏è `Promise.all()`

  * ‚úîÔ∏è `.then()`

* Open `10-Stu_Promise-All/Solved/index.js` in your IDE and explain the following: 

  * We have an array for different durations and then a max duration.

  ```js
  const apiCallDurations = [3000, 4000, 5000, 6000];
  const maxDuration = 9999;
  ```

  * üîë The key to any promise is implementing `resolve()` and `reject()`. First we set up a conditional statement to check whether the `duration` is greater than `maxDuration`. If so, we reject the promise.
  
  ```js
  const callAPI = (duration) =>
    new Promise((resolve, reject) => {
      setTimeout(() => {
        if (duration >= maxDuration) {
          reject(new Error(`This request timed out`));
        } 
  ```
  
  * üîë Otherwise we resolve the promise:

  ```js
    else {
    resolve(`Response received: ${duration}ms`);
    }
  }, duration);
  ```

  * `Promise.all()` accepts an array as an argument. In preparation, we declare an empty array to hold our promises.

  ```js
  const promises = [];
  ```

  * Next, we populate that `promises` array with some promises by mapping over `apiCallDurations` and pushing an instance of `callAPI(duration)` into it:

  ```js
  apiCallDurations.map((duration) => promises.push(callAPI(duration)));
  ```

  * We also included a console log to peek at our `promises` array.

  ```js
  console.log('Promises array before the timeouts have finished: ', promises);
  ```

  * üîë Finally, we call `Promise.all()` with the `promises` array. If all of the promises were resolved, we console log the response by chaining a `.then()`. If anything went wrong, we catch the errors in the `.catch()`.

  ```js
  Promise.all(promises)
    .then((response) => console.log('Response from Promise.all():', response))
    .catch((err) => console.error(err));
  ```

* Ask the class the following questions (‚òùÔ∏è) and call on students for the answers (üôã):

  * ‚òùÔ∏è At what point will the `Promise.all()` method reject a promise?

  * üôã The `Promise.all()` method will reject immediately when any of the input promises are rejected.

  * ‚òùÔ∏è What can we do if we don't completely understand this?

  * üôã We can refer to supplemental material, read the [MDN Web Docs on Promise.all()](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise/all) and stick around for Office Hours to ask for help.

* Answer any questions before ending the class.

### 18. END (0 min)

How did today‚Äôs lesson go? Your feedback is important. Please take 5 minutes to complete [this anonymous survey](https://forms.gle/RfcVyXiMmZQut6aJ6).

- - -

@TODO ¬© <year> Trilogy Education Services, LLC, a 2U, Inc. brand. Confidential and Proprietary. All Rights Reserved.
