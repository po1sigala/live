# Lesson Plan: Everything Async (10:00 AM) <!--links--> &nbsp; [‚¨ÖÔ∏è](../../09-Week_NodeJS/02-Day_ES6/09.2-LESSON-PLAN.md) &nbsp; [‚û°Ô∏è](../../10-Week/01-Day/01-Day-LessonPlan.md)

## Overview

In this lesson we will review callback functions and dive promises and async await.

## Instructor Notes

* Complete activities `31-Stu_Callback-Review` through `40-Stu_Mini-Project`

* While you would have naturally explained promises and asynchronous behavior on a need to know basis before today, now is the time to dive deep and provide more thorough instruction for these topics.

* The most important concept for students to walk away from today understanding better is promises. If they struggle to understand async/await, assure them that a deeper understanding of promises makes async/await easier to grasp.

* Congratulate the class on any wins today, many JavaScript developers in the field don't have a solid understanding of the topics we'll be covering today.

## Learning Objectives

* Explain ways asynchronous behavior can be handled with JavaScript

* Utilize the axios library to perform AJAX requests

* Chain promises together to perform asynchronous operations in sequence.

* Utilize Promise.all to combine multiple promises

* Utilize async/await syntax to write asynchronous code

## Time Tracker

[Unit 09-NodeJS Time Tracker](https://docs.google.com/spreadsheets/d/1rf4sCQ7lyZAg9LLEtHe7d3lVklgF4mCu3fmGvVF8kQo/edit?usp=sharing)

---

## Class Instruction

### 1. Instructor Do: Preview (10 mins)

* Welcome the class to our final lesson of Node.js. Inform everyone that the focus of today will be all things async. We'll conclude the lesson with a mini project where students will build a portfolio generating command line tool.

* Without showing any of the code, take a few minutes to demonstrate the completed [Mini Project](../../../../01-Class-Content/09-NodeJS/01-Activities/40-Stu_Mini-Project/Solved/Bonus).

* The application should prompt for some basic information such as a name and hobbies. Have volunteers from the class offer up answers to each question.

* Once all the prompts have been answered, there should be a new `index.html` file added to the project directory. Open it in your web browser for the class to see.

* Explain to the class that this assignment is similar to their homework in which they'll use similar techniques to generate a PDF resume.

* Finally inform the class that many professional developers don't understand the topics we'll be covering well. By walking away from today with an understanding of the material, students will set themselves up to be more competitive in the job market.

* Answer any high-level questions about the Mini Project or lesson ahead before students begin the first activity of the day.

### 2. Students Do: Callback Review (10 mins)

* Direct students to the instructions found in [31-Stu_Callback-Review](../../../../01-Class-Content/09-NodeJS/01-Activities/31-Stu_Callback-Review):

```md
# Callback Review

In this activity you will write code to read a file containing a list of dogs and cats, and write two new files to separate dog and cat entries.

## Instructions

* Open the `Unsolved/index.js` file and take a moment to examine the provided code:

  * The `fs.readFile` method is being used to read the `animals.json` file.

  * Since the JSON data retrieved using `fs.readFile` is a string, we're calling `JSON.parse` to parse the string to a JSON object.

  * We're allocating two empty arrays called `dogs` and `cats`.

* After understanding the provided code, write code to loop through `animalJSON` and for each animal object, check its `species` property. If an animal is a `dog`, push it to the `dogs` array, else push it to the `cats` array.

* After looping through every animal, convert both the `dogs` and `cats` arrays to JSON strings using `JSON.stringify`. Save the stringified versions of the arrays to new variables.

* Then, save the JSON string version of the `dogs` array to a new `dogs.json` file. Print a message after this completes indicating that it was successful.

* Then, save the JSON string version of the `cats` array to a new `cats.json` file. Print a message after this completes indicating that it was successful.

* You can verify that you've successfully completed this activity if after running your code you have a `dogs.json` file containing only dogs and a `cats.json` object containing only cats.

## üí°Hints

* Check out the [`fs.writeFile` documentation](https://nodejs.org/api/fs.html#fs_fs_writefile_file_data_options_callback). Keep in mind that the async version will utilize promises rather than callbacks.

* Check out the [`JSON.parse` documentation](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON/parse)

* Check out the [`JSON.stringify` documentation](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON/stringify)
```

### 3. Instructor Do: Review Callbacks Activity (5 mins)

* Once time's up open the [Solved version of the activity](../../../../01-Class-Content/09-NodeJS/01-Activities/31-Stu_Callback-Review/Solved) and first run the solution to de demonstrate its intended functionality.

* Then walk through the solution's code and demonstrate the following key point(s):

  * ‚úîÔ∏è We're using the `fs.readFile` function to read the contents of `animals.json`. All the other code is written inside of the `fs.readFile` callback function to ensure it only runs after `animals.json` has been read.

  * ‚úîÔ∏è Since any dead read with `fs.readFile` comes back as a string, we're using the `JSON.parse` method to turn the JSON string into a JSON object we can work with.

  * ‚úîÔ∏è We're using the `forEach` method to loop through the `animalJSON` and push each animal into either the `dogs` or `cats` array.

  * ‚úîÔ∏è Once the animals are pushed into their appropriate arrays, we're using `JSON.stringify` to turn the arrays into strings that can be saved to files. The additional arguments passed to JSON.stringify (`null, 2`) ensures that the JSON string is indented rather than all on one line.

  * ‚úîÔ∏è The `fs.writeFile` method is used to write the `dogs.json` and `cats.json` files.

* Ask the class the following question(s) and call on students for the corresponding answer(s):

  * ‚òùÔ∏è Which of these callback functions are asynchronous? Which are synchronous?

  * üôã The callbacks used with `fs.readFile` and `fs.writeFile` are asynchronous, but the callback used with `forEach` is synchronous.

* Answer any remaining questions about the activity students may have before going into a demonstration of `axios`.

### 4. Instructor Do: Axios Demo (5 mins)

* Explain that in this demonstration we'll cover making AJAX requests from a node application.

* Ask the class the following question(s) and call on students for the corresponding answer(s):

  * ‚òùÔ∏è How have we performed AJAX requests in the past?

  * üôã We used the jQuery `ajax` method.

* Explain that since jQuery is a front-end library, it depends on certain browser APIs that don't exist in a node context. So while jQuery can be downloaded as a node module, it's not meant for use on the backend, so we need another solution such as the axios library.

* Open the [32-Ins_Axios-Demo](../../../../01-Class-Content/09-NodeJS/01-Activities/32-Ins_Axios-Demo) in your editor and walk the class through the small amount of code:

```js
const axios = require("axios");

axios
  .get("https://www.omdbapi.com/?t=The%20Matrix&apikey=trilogy")
  .then(function(res) {
    console.log(res.data);
  });
```

* Demonstrate the following key point(s):

  * ‚úîÔ∏è We're requiring the `axios` library. Axios is a third-party npm package, i.e. it's not built-in to node.

  * ‚úîÔ∏è Axios has a `get` method that works similarly to the `$.get` in jQuery. It expects to be provided a URL endpoint to query.

  * ‚úîÔ∏è Similar to jQuery, an axios query returns a promise object. More on this shortly, but for now it's important to know that we use `.then` to handle the response from the AJAX request.

* Run the code and demonstrate the output in your console.

* Answer any questions before students work with axios in the next activity.

### 5. Students Do: Axios (10 mins)

* Direct students to the instructions found in [32-Stu_Axios](../../../../01-Class-Content/09-NodeJS/01-Activities/33-Stu_Axios):

```md
# Axios

In this activity you will utilize the axios library to make a request to the Github API and save a list of all of your repositories.

## Instructions

* Change directories into the `Unsolved` folder and run `npm install` from your terminal.

* Once the project dependencies finish installing, examine the starter code in `Unsolved/index.js`:

  * The provided starter code prompts the user for their GitHub username and then uses the answer to construct a URL that can be used to query the GitHub API.

* Use the `axios` module to send a GET request to the `queryUrl`. The response object returned from the request should contain a `data` property which should be an array of the user's GitHub repos.

* Loop through the array of repos and save only the names of the repos to an array.

* Join the array of repo names to a string separated with a newline character (`\n`).

* Save the string containing the repo names to a new `repos.txt` file. Once this completes print a message to the console indicating the number of repos saved.

* You'll be able to verify that you've successfully completed this activity if your code successfully saves a list of all of a given user's GitHub repos.

## üí° Hints

* Take a look at the API response from the GitHub API to get an idea of how the data is structured. Example: <https://api.github.com/users/fabpot/repos?per_page=100>.

  * Avoid continually refreshing this page since there's a limit for non-authenticated requests to the GitHub API.

* Check out the [`fs.writeFile` documentation](https://nodejs.org/api/fs.html#fs_fs_writefile_file_data_options_callback). Keep in mind that the async version will utilize promises rather than callbacks.

* Check out the [axios documentation](https://github.com/axios/axios) and look for examples for the `get` method.
```

### 6. Instructor Do: Review Axios (5 mins)

* Once time's up open the [Solved version of the activity](../../../../01-Class-Content/09-NodeJS/01-Activities/33-Stu_Axios/Solved) and first run the solution to de demonstrate its intended functionality.

* Then walk through the solution's code and demonstrate the following key point(s):

  * ‚úîÔ∏è We're requiring `fs`, `axios`, and `inquirer` at the top of the file.

  * ‚úîÔ∏è Once an answer has been provided by the inquirer prompt, it's used to create a `queryUrl` that can be used to retrieve information about a given user's GitHub repos.

  * ‚úîÔ∏è After axios is used to perform an AJAX request to the URL, an array of only repo names is created from the response data using the `map` method.

  * ‚úîÔ∏è The array of repo names are joined into a string separated by a new line character and then written to a `repos.txt` file.

* Answer any lingering questions before moving on to the next demonstration.

### 7. Instructor Do: Introduce Promises (5 mins)

* Explain to the class that we've been using promises for a while now -- since learning jQuery -- without really talking about them. Any time we wrote code that used `.then`, we were working with a promise.

* Explain that promises are special JavaScript objects used for handle asynchronous behavior. Promises are returned from `$.ajax` method, as well as the `axios.get` method. Promises have a `.then` method as that accept a function to execute when the data is ready.

* Promises have a few advantages to asynchronous callbacks alone, some of which may not be immediately apparent, but we'll work up to that.

* Open [34-Ins_Introduce-Promises](../../../../01-Class-Content/09-NodeJS/01-Activities/34-Ins_Introduce-Promises) and walk through the code and demonstrate the following key point(s):

  * ‚úîÔ∏è This example is similar to the callback activity completed earlier.

  * ‚úîÔ∏è Node has a built-in `util` module that has a few useful utility functions.

  * ‚úîÔ∏è The `util.promisify` method can be used to take a function that uses a Node.js style callback and create a new version of the function that uses promises. A Node.js style callback is a function that has a `(err, data) =>` signature.

  * ‚úîÔ∏è We're using the `util.promisify` method to create promise-based versions of `fs.writeFile` and `fs.readFile`.

* Explain that we'll soon be able to go over some advantages to promises over callbacks alone, but for now the main takeaway is that they're a construct for handle asynchronous code and the `util.promisify` method can be used to create promise-based functions from functions using Node.js style callbacks.

### 8. Students Do: Joke Saver (10 mins)

* Direct students to the instructions found in [35-Stu-Joke-Saver](../../../../01-Class-Content/09-NodeJS/01-Activities/35-Stu-Joke-Saver):

```md
# Joke Saver

In this activity you will write code to get a random joke from an API, append the joke to a file, and then read out all saved jokes from the file.

## Instructions

* Change directories into the `Unsolved` folder and run `npm install`.

* Once the installation completes, open `Unsolved/index.js` and examine the code.

  * A request is being made to the `icanhazdadjoke` API using axios.

  * This API requires some additional configuration be passed to axios in order to work.

* Run the `index.js` file to examine the response from the API. You should notice that an object containing a random joke is returned each time.

* Append the `joke` property of the response data to a file named `jokes.txt`.

* After appending the joke, read from the `jokes.txt` file and print its entire contents to the console.

* You can verify you've successfully completed this activity if every time the program is run a new joke is saved to the `jokes.txt` file and all the jokes are printed to the console.

## üí°Hints

* Check out the documentation for [fs.appendFile](https://nodejs.org/api/fs.html#fs_fs_appendfile_path_data_options_callback). Keep in mind that the async version will utilize promises rather than callbacks.

* Check out the documentation for [fs.readFile](https://nodejs.org/api/fs.html#fs_fs_readfile_path_options_callback). Keep in mind that the async version will utilize promises rather than callbacks.

## üèÜBonus

* Chain the calls to `axios.get`, `fs.appendFile`, and `fs.readFile` rather than nest them. See more about promise chaining from the [MDN documentation](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Using_promises#Chaining).
```

### 9. Instructor Do: Review Joke Saver (5 mins)

* Once time's up open the [Solved version of the activity](../../../../01-Class-Content/09-NodeJS/01-Activities/35-Stu-Joke-Saver/Solved) and first run the basic solution to de demonstrate its intended functionality.

* Then walk through the solution's code and demonstrate the following key point(s):

  * ‚úîÔ∏è We're using `utils.promisify` to create promise-based versions of `fs.readFile` and `fs.appendFile`.

  * ‚úîÔ∏è We're appending the joke retrieved from the API to the `jokes.txt` file with a newline at the end.

  * ‚úîÔ∏è Inside of the `.then` of the `appendFileAsync` function, we're calling `readFileAsync` to read the file's contents. Since both functions run asynchronously, this is how we can ensure the file isn't read before it's been written to.

* Explain that so far, promises aren't solving any problems for us that callbacks couldn't have otherwise done alone.

* Open the [Bonus version of the activity](../../../../01-Class-Content/09-NodeJS/01-Activities/35-Stu-Joke-Saver/Solved/Bonus) and demonstrate the code.

  ```js
  axios
    .get("https://icanhazdadjoke.com/", config)
    .then(function(res) {
      const { joke } = res.data;

      return appendFileAsync("jokes.txt", joke + "\n");
    })
    .then(function() {
      return readFileAsync("jokes.txt", "utf8");
    })
    .then(function(data) {
      console.log("Saved dad jokes:");
      console.log(data);
    })
    .catch(function(err) {
      console.log(err);
    });
  ```

* Explain that functionally these examples are the same, but there's a key difference in the way the code is written.

* Ask the class the following question(s) and call on students for the corresponding answer(s):

  * ‚òùÔ∏è How is the code in the bonus solution arranged differently than the code in the basic solution?

  * üôã Promises are being chained, rather than being nested inside of each other.

* Explain that promises, similar to jQuery methods, are chainable. Whatever is returned from the function passed into a promise's `.then` method is available inside of the next chained promise. If what's being returned is a promise object itself, the next `.then` only runs when the returned promise resolves.

* This is useful as it allows us to write clearer code that's easier to understand and have more control over the sequencing of async behavior.

* If promises didn't exist and we only had callback functions, we'd eventually find ourselves in what's referred to as ["callback hell"](http://callbackhell.com/), where our code nesting becomes so deep it's difficult to understand and we have to scroll horizontally in our editors to read everything.

* Take a moment to answer any remaining questions but assure the class that we'll have plenty of opportunities to continue practicing.

### 10. Instructor Do: Introduce Promise.all (10 mins)

* Ask the class the following question(s) and call on students for the corresponding answer(s):

  * ‚òùÔ∏è How can we handle the order in which multiple promise-based functions are executed?

  * üôã We can either nest the next promise-based function inside of the `.then` of the previous one, or we can chain promises.

* Explain that at times, we may want to wait for multiple promises to resolve and do some work on all of the data.

* Say for example, we wanted to search the OMDB API for multiple movies, wait for all the requests to come back, and then do something with the highest rated movie?

* Normally this would be difficult to do since the promises will all resolve asynchronously. We could chain or nest them and push the responses into an array, but we'd have to manually write out this code. What if we had an unknown number of movies we needed to search for? It could be one movie, or maybe a hundred.

* Open the example in [36-Ins_Promise-All](../../../../01-Class-Content/09-NodeJS/01-Activities/36-Ins_Promise-All) and walk through the code and demonstrate the following key point(s):

  * ‚úîÔ∏è We have an array of movie names and use the map method to create an array of promise objects made by calls for each movie to the OMDB API.

  ```js
    const favoriteMovies = [
    "The Matrix",
    "Eternal Sunshine of the Spotless Mind",
    "Mr. Nobody"
  ];

  // Save promises to an array
  const promises = favoriteMovies.map(function(movie) {
    return axios.get(`https://www.omdbapi.com/?t=${movie}&apikey=trilogy`);
  });
  ```

  * ‚úîÔ∏è We're passing the array of promises into the built-in `Promise.all` method. This method takes an array of promise objects and returns a new promise object that only resolves when _all_ of the promises in the array have resolved, regardless of their order.

  * ‚úîÔ∏è Inside the `.then` method for `Promise.all`, we get an array of all of the responses from all of the AJAX requests. We're using the `map` method to create a new array containing only the `data` property of each response.

  ```js
  const movieData = responses.map(function(response) {
      return response.data;
    });
  ```

  * ‚úîÔ∏è Then, we're using the built-in Array.prototype.sort method to sort the movies by their IMDB rating. The `sort` method returns a new sorted array, but by using array destructuring we can collect only the first entry which should be the highest rated movie.

  ```js
  const [bestMovie] = movieData.sort(function(a, b) {
      return b.imdbRating - a.imdbRating;
    });
  ```

  * ‚úîÔ∏è Then, we're printing the name of the best movie to the console.

  * ‚úîÔ∏è The function passed to the `.catch` method at the end gets called if _any_ of the promises passed to `Promise.all` error.

* Explain to the class that any time they find themselves in a situation where they want to run async functionality inside of a loop, they should probably consider using `Promise.all`.

* Answer any remaining questions before proceeding to the next activity, or if time permits demonstrate what happens if no movies are passed to `Promise.all`, or poll the class for more movies to add.

### 11. Students Do: Promise.all (10 mins)

* Direct students to the instructions found in [37-Stu_Promise-All](../../../../01-Class-Content/09-NodeJS/01-Activities/37-Stu_Promise-All):

```md
# Promise All

In this activity you will read JSON from separate JSON files, combine the data into one combined JSON file.

## Instructions

* Change directories into the `Unsolved` folder and run `npm install` from your terminal.

* Once the installation completes examine the code in `Unsolved/index.js`.

  * The Array `map` method is used to loop over the array of file names.

  * Inside of the `map` method, the `readFileAsync` is called with the file name and returned.

  * The `filePromises` array contains an array of pending promise objects.

* In order to handle resolving all of the promises in `filePromises` at once, you'll need to call the `Promise.all` method and pass in the `filePromises` array.

* Since `Promise.all` returns a promise itself, you'll chain a `.then` method call off of the `Promise.all` call. The result of this promise will be an array containing the data read from each file.

* Since the data read from each file is a string, you'll need to use the `map` method again to convert each JSON string to a JSON object.

* From here, you'll need to use the `sort` method to sort animals by age.

* Then, call `JSON.stringify` on the entire sorted array to create a string version that can be written to a file.

* Then, write all the animals to a new `combined.json` file.

* Once this completes, print a message to the console indicating it was successful.

* You can verify that you completed this activity successfully if a `combined.json` file is created containing all animals when your code is run.

## üí°Hints

* Check out the [MDN documentation for the `Promise.prototype.all`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise/all)

* Don't hesitate to refer back to the previous activity examples.

## üèÜ Bonus

* Add code to sort each animal by age before saving them to the `combined.json` file.
```

### 12. Instructor Do: Review Promise.all (5 mins)

* Once time's up open the [Solved version of the activity](../../../../01-Class-Content/09-NodeJS/01-Activities/37-Stu_Promise-All/Solved) and first run the basic solution to de demonstrate its intended functionality.

* Then, walk through the code and point out the following key key point(s):

  * ‚úîÔ∏è We have an array of animal JSON files. Using the `map` method we're reading each file and returning a promise object to create a new array of promises.

  * ‚úîÔ∏è We're passing the array of promises to the `Promise.all` method. Once all of the promises have resolved we have an array containing the result of all the file reads inside of the `.then`.

  * ‚úîÔ∏è We're going looping through the `animalStings` and parsing them to JSON objects. This will allow us to stringify the entire array of objects before saving it to the `combined.json` file.

* The only additional step required in the [Bonus solution](../../../../01-Class-Content/09-NodeJS/01-Activities/37-Stu_Promise-All/Solved/Bonus) would have been to sort the animals by age before saving them. Time permitting feel free to discuss the `sort` method more in depth, or otherwise slack out a link to the [MDN documentation](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/sort) on the topic.

### 13. Instructor Do: Introduce Async/Await (10 mins)

* Explain that promises aren't the most intuitive way to handle asynchronous behavior, especially for developers coming from other programming languages. As the number of web developers increases, ideas found in other languages often make their way in to JavaScript.

* The ES2017 JavaScript update gave us a feature found in C#: **async/await**.

* In JavaScript, async/await uses promises under the hood, but allows us to write asynchronous code in a way that _looks_ synchronous. As a result, code written with async/await is often easier to read and understand.

* Open the example in [38-Ins_Async-Await](../../../../01-Class-Content/09-NodeJS/01-Activities/38-Ins_Async-Await) and walk through the code:

  ```js
  const axios = require("axios");
  const inquirer = require("inquirer");

  getMovie();

  async function getMovie() {
    try {
      const { movie } = await inquirer.prompt({
        message: "Search a movie:",
        name: "movie"
      });

      const { data } = await axios.get(
        `https://www.omdbapi.com/?t=${movie}&apikey=trilogy`
      );

      console.log(data);

    } catch (err) {
      console.log(err);
    }
  }
  ```

* Be sure to demonstrate the following key point(s):

  * ‚úîÔ∏è Async/await is used with functions and methods that return promise objects such as `axios.get` and `inquirer.prompt`.

  * ‚úîÔ∏è Code using the `await` syntax must be inside of a function declared with the `async` identifier.

  * ‚úîÔ∏è Code using the `await` syntax must be inside of a function declared with the `async` identifier.

  * ‚úîÔ∏è Using the `await` identifier, we can assign the result of a promise-based function to a variable.

  * ‚úîÔ∏è We typically use `try/catch` blocks to catch errors when using async/await, though the `.catch` method can still be used since we're still working with promises.

* Take a few minutes to answer any questions about the example before students try out async/await themselves in the next activity.

### 14. Students Do: Async/Await (15 mins)

* Direct students to the instructions found in [37-Stu_Promise-All](../../../../01-Class-Content/09-NodeJS/01-Activities/39-Stu_Async-Await):

```md
# Async Await

In this activity you will convert a previous promise-based activity to utilize async await.

## Instructions

* Change directories into the `Unsolved` folder and run `npm install` from your terminal.

* Take a moment to examine the contents of `Unsolved/index.js`. This file:

  * Contains an async function called `combineAnimals` that gets called when the file loads.

  * The `combineAnimals` function contains a try/catch block.
  
  * The goal of this activity is to mirror the functionality found in the previous `37-Stu_Promise-All` activity: animals should be read from each file and then combined into a new `combined.json` file.

* Write code inside of the `try` block to read from each file (`dog.json`, `cat.json`, `goldfish.json`, `hamster.json`) one at a time using the async/await syntax.

* Parse the data from each file to objects using `JSON.parse`.

* Store the animal objects into an array and use `JSON.stringify` to convert the array of objects to an JSON string.

* Save the new combined animal JSON to a `combined.json` file.

* Print a message to the console indicating that this was successful.

## üí°Hints

* Check out the [MDN documentation on async/await](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/async_function)

## üèÜ Bonus

* Rather than manually writing out code to read each file one at a time, find a way to do so using a loop instead using async/await.

* Sort animals by age before saving them to the `combined.json` file.
```

### 15. Instructor Do: Review Async/Await (10 mins)

* Once time's up open the [Solved version of the activity](../../../../01-Class-Content/09-NodeJS/01-Activities/39-Stu_Async-Await/Solved) and first run the basic solution to de demonstrate its intended functionality.

* Then, walk through the code and demonstrate the following key point(s):

  * ‚úîÔ∏è Code using the `await` syntax must be inside of a function declared with the `async` identifier.

  * ‚úîÔ∏è We can await reading from each file one at a time. This is equivalent to chaining promise functions in sequence.

  * ‚úîÔ∏è Since data read from a file comes in as a string, we need to parse the strings to JSON to work with them.

  * ‚úîÔ∏è `try/catch` blocks are used to handle any errors that may occur.

* Answer any questions about the basic activity before moving on to the [Bonus solution](../../../../01-Class-Content/09-NodeJS/01-Activities/39-Stu_Async-Await/Solved/Bonus).

* Then, walk through the bonus solution's code and demonstrate the following key point(s):

  * ‚úîÔ∏è When using async/await, we can run asynchronous code inside of a loop and the promises will be resolved synchronously, i.e. one after the other.

  * ‚úîÔ∏è We can `await` without storing the value of the resolved promise in a variable and the next lines of code will still wait to be executed.

  * Take a few minutes to answer any remaining questions before the break.

---

### 16. Everyone Do: BREAK (40 mins)

---

### 17. Instructor Do: Introduce Mini Project (5 mins)

* Take a few minutes to once again demonstrate the completed [mini project](../../../../01-Class-Content/09-NodeJS/01-Activities/40-Stu_Mini-Project/Solved/Bonus) and answer any questions students may have.

### 18. Students Do: Mini Project (60 mins)

* Direct students to the instructions found in [40-Stu_Mini-Project](../../../../01-Class-Content/09-NodeJS/01-Activities/40-Stu_Mini-Project):

```md
# Instructions

* You have been tasked with creating a CLI Tool that generates an HTML Portfolio page.

  * Your application will ask the user for information, and output that information into an HTML document.

* You will need two files for this:

  * `index.js`
  * `package.json`

* When creating programs we always want to get an MVP (minimum viable product).

  * Our MVP for this project is just an HTML page displaying the users provides responses with no styling whatsoever.

* When you complete the MVP, you can begin to style the page that is generated.

## Hint(s)

* To create your HTML it would be easiest to use a dummy `index.html` document. This will allow you to have HTML syntax highlighting making it easier to write your HTML.
```

### 19. Instructor Do: Review Mini Project (10 mins)

* Once time's up open the [Solved version of the activity](../../../../../../../../../../../../01-Class-Content/09-NodeJS/01-Activities/40-Stu_Mini-Project) and first run the basic solution to de demonstrate its intended functionality.

* Then, walk through the code and demonstrate the following key point(s):

  * ‚úîÔ∏è We're chaining the promises to ensure that a response has been collected from `inquirer.prompt` and the HTML string has been created before writing it to a file.

  * ‚úîÔ∏è Tagged template literals can be used to construct an HTML string that can then be saved to an HTML file.

* Answer any high-level questions before demonstrating the bonus solution using async/await. Point out the following key point(s):

  * ‚úîÔ∏è Code using the `await` syntax must be inside of a function declared with the `async` identifier.

  * ‚úîÔ∏è We're using a `try/catch` block to handle any errors than may occur when using async/await.

* Answer any remaining questions before dismissing the class.

## Lesson Plan Feedback

How did today's class go?

[Went Well](http://www.surveygizmo.com/s3/4325914/FS-Curriculum-Feedback?format=pt&sentiment=positive&lesson=9.03)

[Went Poorly](http://www.surveygizmo.com/s3/4325914/FS-Curriculum-Feedback?format=pt&sentiment=negative&lesson=9.03)
