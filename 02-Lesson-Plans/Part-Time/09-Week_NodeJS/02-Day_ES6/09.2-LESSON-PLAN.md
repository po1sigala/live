# 09.2 Part-Time Lesson Plan: Node

## Overview 

In this lesson we will be taking a deeper dive into the world that is Node. We will be learning how to take advantage of native modules that come baked into Node itself. We will access the file system, pass command line arguments into our applications, get acquainted with Node Package Manager and finally build our own CLI apps using a package called inquirer.

## Instructor Notes

* Complete activities `11-Ins_process.argv` through `20-Stu_Inquirer`

* We can explain to students that npm is much like linking a CDN link for a framework directly in our HTML, only we will download it into our project and store it in a folder called "node_modules"

* At this point students should have both Node and NPM installed, as they are packaged together when installed. To ensure that npm is installed properly please have the students run `npm --version` in the terminal. Anything other than a version number should be indicate to the the TAs that student needs assistance.

* Remind students to do a `git pull` of the class repo to have today's activities ready and open in VS Code. 

* If you are comfortable doing so, live code the solutions to the activities. If not, no worries. Use the solutions provided and follow the prompts and talking points for review. 

* Let students know that the Bonus for each activity is meant to give them "food for thought". Rather than extra coding practice, it is a self-study on related topics that are beyond the scope of this unit for those who want to dig deeper and further their knowledge on this topic.

## Learning Objectives

By the end of class, students will be able to:

* Run Node.js applications from the command line with arguments

* Import and use the native `fs` module to read and write to the file system

* Initialize projects and install third-party modules like Inquirer using npm

* Use "dependencies" and investigate the content of `package.json`


## Time Tracker
@TODO ADD ACTIVITY TITLES for Instructor Demo, Student Do, and Instructor Review
| Start  | #   | Activity Name                  | Duration |
| ------ | --- | ------------------------------ | -------- |
| 6:30PM | 1   | Instructor Do: Stoke Curiosity | 0:10     |
| 6:40PM | 2   | Instructor Demo:               | 0:05     |
| 6:45PM | 3   | Student Do:                    | 0:15     |
| 7:00PM | 4   | Instructor Review:             | 0:10     |
| 7:10PM | 5   | Instructor Demo:               | 0:05     |
| 7:15PM | 6   | Student Do:                    | 0:15     |
| 7:30PM | 7   | Instructor Review:             | 0:10     |
| 7:40PM | 8   | Instructor Demo:               | 0:05     |
| 7:45PM | 9   | Student Do:                    | 0:15     |
| 8:00PM | 10  | BREAK                          | 0:15     |
| 8:15PM | 11  | Instructor Review:             | 0:10     |
| 8:25PM | 12  | Instructor Demo:               | 0:05     |
| 8:30PM | 13  | Student Do:                    | 0:15     |
| 8:45PM | 14  | Instructor Review:             | 0:10     |
| 8:55PM | 15  | Instructor Demo:               | 0:05     |
| 9:00PM | 16  | Student Do:                    | 0:15     |
| 9:15PM | 17  | Instructor Review:             | 0:15     |
| 9:30PM | 18  | END                            | 0:00     |

---

## Class Instruction

### 1. Instructor Do: Stoke Curiosity (10 min)

* Welcome students to class.

* Ask the class the following questions (‚òùÔ∏è) and call on students for the answers (üôã):

* ‚òùÔ∏è What are some of the new syntax rules you guys have learned this week?

* üôã This week we learned about arrow functions, `let`, `const`, and template strings.
  
* ‚òùÔ∏è What are some of the differences between `this` in Node compared to `this` in the browser?

* üôã In the browser `this` refers to the window object, while in node, the `this` keyword refers to the global object. The `this` keyword is all about context, and therefore it changes based on where you run it. 

* ‚òùÔ∏è Take moment to think about some things that are now possible because javascript runs outside the browser. Can you name a few examples? 

* üôã The ability to run javascript outside of the browser now allows us to create web servers, our own APIs, command line applications and have manipulate the file system. A lot of applications that we use every day like Slack, Discord, and even VSCode are written in javascript and packaged in a binary using something called [Electron](https://www.electronjs.org/).
  * Please note that while we won't cover electron in this course, it is important to understand the options developers have because javascript can be run outside of the browser.

### 2. Instructor Demo: `process.argv` (5 min) 

* Open [11-Ins_process.argv](../../../../01-Class-Content/09-NodeJS/01-Activities/11-Ins_process.argv/index.js) in your terminal and demonstrate the following:

* Run `node index.js` from the command line and demonstrate the following: 

  * üîë  When we run this code in the terminal we see that the output is an array that contains three items

    ```sh
    [
    '/usr/local/bin/node',
    '/Users/johnmccambridge/coding/fullstack-ground/01-Class-Content/09-NodeJS/01-Activities/11-Ins_process.argv/index.js'
    ]
    ```

  * üîë  When we add additional arguments to the command, `node index.js Hello World!` we get this following result:

    ```sh
    [
    '/usr/local/bin/node',
    '/Users/johnmccambridge/coding/fullstack-ground/01-Class-Content/09-NodeJS/01-Activities/11-Ins_process.argv/index.js',
    'hello',
    'world!'
    ]
    ```
    * üîë We store command line arguments in an object property, `process.argv`. These can be thought of as *argument values* passed to execution *process* at runtime. This will return an array, and therefore we can isolate just the additional arguments by accessing the correct index position.

    ```js
    console.log(process.argv);
    console.log(process.argv[2])
    ```



* Ask the class the following questions (‚òùÔ∏è) and call on students for the answers (üôã):

  * ‚òùÔ∏è What is returned by this application?

  * üôã Running the application returns an array.

  * ‚òùÔ∏è What are the items in the array?'

  * üôã The first item in the array is the installation location of Node itself. The second item in the array is the **absolute path** to the application. The third and fourth arguments are what we pass into the command line split on a space.
  
  * ‚òùÔ∏è What do you think would happen if we wrapped "Hello Word!" in quotes? `node index.js "Hello World!"` 
  
  * üôã As you would expect, the entire string is passed as one argument rather than two different arguments split on the space.

  * ‚òùÔ∏è What does it mean for us if we can pass arguments to our Node application?
  
  * üôã We can work with those values to create dynamic, interactive applications.

* Answer any questions before proceeding to the next activity.

* In preparation for the activity, ask TAs to start directing students to the activity instructions found in [12-Stu_Parameter-Check](../../../../01-Class-Content/09-NodeJS/01-Activities/12-Stu_Parameter-Check/README.md).

### 3. Student Do: `process.argv` (15 min) 

* Direct students to the activity instructions found in [12-Stu_Parameter-Check](../../../../01-Class-Content/09-NodeJS/01-Activities/12-Stu_Parameter-Check/README.md).

* Break your students into pairs that will work together on this activity.

```md
# Parameter Check

In this activity, you will write a Node.js command line application that accepts two arguments and returns true if the two values are equal and false if they are not.

## Instructions

* Create a file, `index.js`, in your working directory.

* Write a script using `process.argv` to accept two command line arguments and compare their values.


## Hint(s)

* Start by simply logging the value of each argument to console.

* There's more than one way to solve this problem!

## Bonus

* How many ways can you solve this problem?

```

* While breaking everyone into groups, be sure to remind students and the rest of the instructional staff that questions on Slack or otherwise are welcome and will be handled. It's a good way for your team to prioritize students that need extra help while circulating through room.

### 4. Instructor Review: `process.argv` (10 min) 

* Ask the class the following questions (‚òùÔ∏è) and call on students for the answers (üôã):

  * ‚òùÔ∏è How comfortable do you feel with `process.argv`? (Poll via Fist to Five, Slack, or Zoom)

* Assure students that we will cover the solution to help solidify their understanding. If questions remain, remind them to use office hours to get extra help!

* Use the prompts and talking points below to review the following key (üîë) points:

  * ‚úîÔ∏è Value stored in `process.argv` are access by an array index

  * ‚úîÔ∏è This is one of those concepts where you have to remember that there is no one correct way to solve the problem.

* Open [12-Solved](../../../../01-Class-Content/09-NodeJS/01-Activities/12-Stu_Parameter-Check/Solved/index.js) in your IDE and explain the following: 

  * When we run our app we see a list of boolean values. All of them are checking for the same condition, but each uses a different method

    ```sh
    node index.js 3 4
    node index.js 7 7
    ```

  * üîë  We store the second and third elements in the array to variables

    ```js
    var a = process.argv[2];
    var b = process.argv[3];
    ```

  * üîë Here we can see that there is more than one way to check if our statement is true

    ```js
    // using a conditional statement
    if (a === b) {
        console.log(true);
    } else {
        console.log(false);
    }

    //using a ternary operator
    console.log(a === b ? true : false)

    // comparing variables
    console.log(a === b);

    // comparing argument values directly
    console.log(process.argv[2] === process.argv[3]);
    ```

* Ask the class the following questions (‚òùÔ∏è) and call on students for the answers (üôã):

  * ‚òùÔ∏è How could we improve our code for when a user fails to enter two arguments

  * üôã We could check if `a` or `b` is falsy, and instead console log a message with directions

  * ‚òùÔ∏è What can we do if we don't completely understand this?

  * üôã Be sure to meet with your TAs during office hours or consult with the [node documentation](https://nodejs.org/api/process.html#process_process_argv).

* Answer any questions before proceeding to the next activity.

### 5. Instructor Demo: Read/Write File (5 min) 

* Open [13-Ins-Read-WriteFile](../../../../01-Class-Content/09-NodeJS/01-Activities/13-Ins-Read-WriteFile/index.js) in your browser and demonstrate the following:

* Run `node index.js` from the command line and demonstrate the following: 

  * üîë When we run this application we can see the output is the content of the companion `.csv` file in the project folder:

    ```sh
    10,123,76,5003,9,0.127,40,-1,2^4
    ```

  * üîë This is made possible though the use of Node's native `fs` module. The `fs` module is part of the **standard library** that includes dozens of **modules** that extend the basic functionality of Node.

  * üîë In order to use these modules, we need to *import* them into our app using `require` statements. Here we are importing `fs` and assigning it to variable of the same name.

    ```js
    var fs = require("fs");
    ```

  * üîë The `fs` method `readFile` accepts three arguments: 1. the file we want to read, the encoding format we want to use to read the file, and a callback.

    ```js
    fs.readFile("data.csv", "utf8", function(error, data) {

    if (error) {
        return console.log(error);
    }

    console.log(data);
    });
    ```
* Comment out the `readFile` function and comment in the `writeFile` function in [13-Ins-Read-WriteFile](../../../../01-Class-Content/09-NodeJS/01-Activities/13-Ins-Read-WriteFile/index.js).
  
  * üîë `fs.writeFile` will not only generate non-existent files but will also overwrite them if they already exist
  
  * üîë Our code is similar, but different from the previous demo in a few key ways. Take note of the fact that we don't start out with a `.txt` file in our working directory.

    ```js
    fs.writeFile("log.txt", process.argv[2], function(err) {

    if (err) {
        return console.log(err);
    }

    console.log("Success!");
    ```

 * üîë  When we run the the above code using `node index.js Hello` we will get a newly created `log.txt` file with the text 'Hello' in it.

* Ask the class the following questions (‚òùÔ∏è) and call on students for the answers (üôã):

  * ‚òùÔ∏è What do you think this application does?

  * üôã This application will _read a file_, `data.csv`, and will log the results stored in a variable, `data`.

  * ‚òùÔ∏è Why do you think we need to import modules if they are built-in to Node to begin with?

  * üôã We import modules into our application so that we are only loading exactly what we need. This will speed up the performance of our applications. 
  
  * ‚òùÔ∏è What is different about the code in the `writeFile` example?
  
  * üôã Rather than `readFile`, we are using the `fs` method `writeFile`. Rather than specifying an encoding format, our second argument is `process.argv[2]`.

  * ‚òùÔ∏è What happens when we run our application multiple times?

  * üôã `writeFile` overwrites existing files.

  * ‚òùÔ∏è How do we think we can resolve this issue?

  * üôã We need a method that can _append_ text to files.

* Answer any questions before proceeding to the next activity.

* In preparation for the activity, ask TAs to start directing students to the activity instructions found in [14-Stu-appendFile](../../../../01-Class-Content/09-NodeJS/01-Activities/14-Stu_appendFile/README.md).

### 6. Student Do: Append File (15 min) 

* Direct students to the activity instructions found in [14-Stu-appendFile](../../../../01-Class-Content/09-NodeJS/01-Activities/14-Stu_appendFile/README.md).

* Break your students into pairs that will work together on this activity.

```md
# appendFile

In this activity, you will create a "commit logger" that records commit messages (for poetic purposes) using `fs`.

## Instructions

* In your working directory, create a Node application, `index.js`, that accepts a command line argument, and, each time it is run, will write the argument to file _without_ overwriting the existing text.

* You may need to consult the Node.js `fs` documentation for the appropriate method and its usage.

## Hint(s)

* If `fs.readFile` reads a file and `fs.writeFile` writes, but _overwrites_, a file, what method do you think will allow you to _append_ text to a file?

## Bonus

* How would you add arguments on new lines? 

```

* While breaking everyone into groups, be sure to remind students and the rest of the instructional staff that questions on Slack or otherwise are welcome and will be handled. It's a good way for your team to prioritize students that need extra help while circulating through room.

### 7. Instructor Review: Append File (10 min) 

* Ask the class the following questions (‚òùÔ∏è) and call on students for the answers (üôã):

  * ‚òùÔ∏è How comfortable do you feel with appending to files? (Poll via Fist to Five, Slack, or Zoom)

* Assure students that we will cover the solution to help solidify their understanding. If questions remain, remind them to use office hours to get extra help!

* Use the prompts and talking points below to review the following key (üîë) points:

  * ‚úîÔ∏è `appendFile` appends text to file rather than overwriting the file

* Open [Stu-appendFile/Solved](../../../../01-Class-Content/09-NodeJS/01-Activities/14-Stu_appendFile/Solved/index.js) in your IDE and explain the following: 

  * When we run our command line application with the following we should see this text appended to the file in [14-Stu-appendFile](../../../../01-Class-Content/09-NodeJS/01-Activities/14-Stu_appendFile/Solved/log.txt).

  ```sh
    node index.js "first"
    node index.js "commit early and often"
    node index.js "everyone wants a log"
  ```

  * The application now is adding text to our file rather than overwriting it

  * üîë  Our application is very similar to the previous demo, but here we have refactored it to use `appendFile` rather than `writeFile`:

    ```js
    fs.appendFile("log.txt", process.argv[2] + '\n', function(err) {
        if (err) {
        console.log(err);
        } else {
        console.log("Commit logged!");
        }
    });
    ```

* Ask the class the following questions (‚òùÔ∏è) and call on students for the answers (üôã):

  * ‚òùÔ∏è What does the `\n` do when we concatenate it with the value store in `process.argv[2]`?
  
  * üôã This creates a new line character
  
  * ‚òùÔ∏è What can we do if we don't completely understand this?

  * üôã The solution can be easily found by searching for, and reading, the [Node.js documentation for the File System module](https://nodejs.org/api/fs.html#fs_fs_appendfile_path_data_options_callback).


* Answer any questions before proceeding to the next activity.

### 8. Instructor Demo: Modularization Using Require/Exports (5 min) 

* Open the [15-Ins-Modularization](../../../../01-Class-Content/09-NodeJS/01-Activities/15-Ins_Modularization) directory in your IDE and demonstrate the following:

* Run `node index.js` from the command line and demonstrate the following: 

  * üîë We notice that the output of this file is: 

    ```sh
    apple
    1
    ```

  * üîë  We are importing a dependency, `badmath`, and logging the results of `badmath.pie` and `badmath.predictable`. 

    ```js
    var badmath = require("./badmath.js");

    console.log(badmath.pie);

    console.log(badmath.predictable());
    ```

* Ask the class the following questions (‚òùÔ∏è) and call on students for the answers (üôã):

  * ‚òùÔ∏è How would we build this?

  * üôã @TODO { YES, HOW? } 

* Answer any questions before proceeding to the next activity.

* In preparation for the activity, ask TAs to start directing students to the activity instructions found in `@TODO/folder/file`.

### 9. Student Do: { ACTIVITY NAME } (15 min) 

* Direct students to the activity instructions found in `@TODO/folder/file`.

* Break your students into pairs that will work together on this activity.

  ```md
  @TODO ADD INSTRUCTIONS TABBED
  ```

* While breaking everyone into groups, be sure to remind students and the rest of the instructional staff that questions on Slack or otherwise are welcome and will be handled. It's a good way for your team to prioritize students that need extra help while circulating through room.

### 10. BREAK (15 min)

### 11. Instructor Review: { ACTIVITY NAME } (10 min) 

* Ask the class the following questions (‚òùÔ∏è) and call on students for the answers (üôã):

  * ‚òùÔ∏è How comfortable do you feel with `@TODO TOPIC`? (Poll via Fist to Five, Slack, or Zoom)

* Assure students that we will cover the solution to help solidify their understanding. If questions remain, remind them to use office hours to get extra help!

* Use the prompts and talking points below to review the following key (üîë) points:

  * ‚úîÔ∏è @TODO { THIS }

  * ‚úîÔ∏è @TODO { THAT }

  * ‚úîÔ∏è @TODO { THE OTHER }

* Open `@TODO/folder/file` in your IDE and explain the following: 

  * @TODO { WE DO THIS AND THE RESULT IS THAT }

    ```
    @TODO ADD CODE SNIPPET, TABBED
    ```

  * üîë @TODO DON'T FORGET TO USE THE KEY EMOJI ON KEY POINTS, BUT ONLY KEY POINTS, NOT _EVERY_ POINT

* Ask the class the following questions (‚òùÔ∏è) and call on students for the answers (üôã):

  * ‚òùÔ∏è @TODO { DO WE END OUR REVIEWS WITH A QUESTION? }

  * üôã @TODO { YES, WE DO! }

  * ‚òùÔ∏è What can we do if we don't completely understand this?

  * üôã @TODO We can refer to supplemental material, read the [{ DOCS }]({ URL }), and stick around for Office Hours to ask for help.

* Answer any questions before proceeding to the next activity.

### 12. Instructor Demo: { ACTIVITY NAME } (5 min) 

@TODO USE THE FOLLOWING FOR BROWSER AND/OR COMMAND LINE DEMOS, RESPECTIVELY. REMOVE IF UNUSED

* Open `@TODO/folder/file` in your browser and demonstrate the following:

* Run `@TODO/folder/file { AND ARGS, IF ANY }` from the command line and demonstrate the following: 

  * üîë @TODO { WHEN WE DO THIS, IT DOES THAT. }

  * üîë @TODO { WE ALSO SEE THESE THINGS. }

* Ask the class the following questions (‚òùÔ∏è) and call on students for the answers (üôã):

  * ‚òùÔ∏è How would we build this?

  * üôã @TODO { YES, HOW? } 

* Answer any questions before proceeding to the next activity.

* In preparation for the activity, ask TAs to start directing students to the activity instructions found in `@TODO/folder/file`.

### 13. Student Do: { ACTIVITY NAME } (15 min)

* Direct students to the activity instructions found in `@TODO/folder/file`.

* Break your students into pairs that will work together on this activity.

```md
@TODO ADD INSTRUCTIONS TABBED
```

* While breaking everyone into groups, be sure to remind students and the rest of the instructional staff that questions on Slack or otherwise are welcome and will be handled. It's a good way for your team to prioritize students that need extra help while circulating through room.

### 14. Instructor Review: { ACTIVITY NAME } (10 min) 

* Ask the class the following questions (‚òùÔ∏è) and call on students for the answers (üôã):

  * ‚òùÔ∏è How comfortable do you feel with `@TODO TOPIC`? (Poll via Fist to Five, Slack, or Zoom)

* Assure students that we will cover the solution to help solidify their understanding. If questions remain, remind them to use office hours to get extra help!

* Use the prompts and talking points below to review the following key (üîë) points:

  * ‚úîÔ∏è @TODO { THIS }

  * ‚úîÔ∏è @TODO { THAT }

  * ‚úîÔ∏è @TODO { THE OTHER }

* Open `@TODO/folder/file` in your IDE and explain the following: 

  * @TODO { WE DO THIS AND THE RESULT IS THAT }

    ```
    @TODO ADD CODE SNIPPET, TABBED
    ```

  * üîë @TODO DON'T FORGET TO USE THE KEY EMOJI ON KEY POINTS, BUT ONLY KEY POINTS, NOT _EVERY_ POINT

* Ask the class the following questions (‚òùÔ∏è) and call on students for the answers (üôã):

  * ‚òùÔ∏è @TODO { DO WE END OUR REVIEWS WITH A QUESTION? }

  * üôã @TODO { YES, WE DO! }

  * ‚òùÔ∏è What can we do if we don't completely understand this?

  * üôã @TODO We can refer to supplemental material, read the [{ DOCS }]({ URL }), and stick around for Office Hours to ask for help.

* Answer any questions before proceeding to the next activity.

### 15. Instructor Demo: { ACTIVITY NAME } (5 min) 

@TODO USE THE FOLLOWING FOR BROWSER AND/OR COMMAND LINE DEMOS, RESPECTIVELY. REMOVE IF UNUSED

* Open `@TODO/folder/file` in your browser and demonstrate the following:

* Run `@TODO/folder/file { AND ARGS, IF ANY }` from the command line and demonstrate the following: 

  * üîë @TODO { WHEN WE DO THIS, IT DOES THAT. }

  * üîë @TODO { WE ALSO SEE THESE THINGS. }

* Ask the class the following questions (‚òùÔ∏è) and call on students for the answers (üôã):

  * ‚òùÔ∏è How would we build this?

  * üôã @TODO { YES, HOW? } 

* Answer any questions before proceeding to the next activity.

* In preparation for the activity, ask TAs to start directing students to the activity instructions found in `@TODO/folder/file`.

### 16. Student Do: { ACTIVITY NAME } (15 min) 

* Direct students to the activity instructions found in `@TODO/folder/file`.

* Break your students into pairs that will work together on this activity.

```md
@TODO ADD INSTRUCTIONS
```

* While breaking everyone into groups, be sure to remind students and the rest of the instructional staff that questions on Slack or otherwise are welcome and will be handled. It's a good way for your team to prioritize students that need extra help while circulating through room.

### 17. Instructor Review: { ACTIVITY NAME } (15 min)

* Ask the class the following questions (‚òùÔ∏è) and call on students for the answers (üôã):

  * ‚òùÔ∏è How comfortable do you feel with `@TODO TOPIC`? (Poll via Fist to Five, Slack, or Zoom)

* Assure students that we will cover the solution to help solidify their understanding. If questions remain, remind them to use office hours to get extra help!

* Use the prompts and talking points below to review the following key (üîë) points:

  * ‚úîÔ∏è @TODO { THIS }

  * ‚úîÔ∏è @TODO { THAT }

  * ‚úîÔ∏è @TODO { THE OTHER }

* Open `@TODO/folder/file` in your IDE and explain the following: 

  * @TODO { WE DO THIS AND THE RESULT IS THAT }

    ```
    @TODO ADD CODE SNIPPET, TABBED
    ```

  * üîë @TODO DON'T FORGET TO USE THE KEY EMOJI ON KEY POINTS, BUT ONLY KEY POINTS, NOT _EVERY_ POINT

* Ask the class the following questions (‚òùÔ∏è) and call on students for the answers (üôã):

  * ‚òùÔ∏è @TODO { DO WE END OUR REVIEWS WITH A QUESTION? }

  * üôã @TODO { YES, WE DO! }

  * ‚òùÔ∏è What can we do if we don't completely understand this?

  * üôã @TODO We can refer to supplemental material, read the [{ DOCS }]({ URL }), and stick around for Office Hours to ask for help.

* Answer any questions before ending the class.

### 18. END (0 min)

How did today‚Äôs lesson go? Your feedback is important. Please take 5 minutes to complete [this anonymous survey](https://forms.gle/RfcVyXiMmZQut6aJ6).

---
¬© 2020 Trilogy Education Services, LLC, a 2U, Inc. brand.  Confidential and Proprietary.  All Rights Reserved.