# 09.2 Part-Time Lesson Plan: Node

## Overview 

In this lesson we will be taking a deeper dive into the world that is Node. We will be learning how to take advantage of native modules that come baked into Node itself. We will access the file system, pass command line arguments into our applications, get acquainted with Node Package Manager and finally build our own CLI apps using a package called inquirer.

## Instructor Notes

* Complete activities `11-Ins_process.argv` through `20-Stu_Inquirer`

* We can explain to students that npm is much like linking a CDN link for a framework directly in our HTML, only we will download it into our project and store it in a folder called "node_modules"

* At this point students should have both Node and NPM installed, as they are packaged together when installed. To ensure that npm is installed properly please have the students run `npm --version` in the terminal. Anything other than a version number should be indicate to the the TAs that student needs assistance.

* Remind students to do a `git pull` of the class repo to have today's activities ready and open in VS Code. 

* If you are comfortable doing so, live code the solutions to the activities. If not, no worries. Use the solutions provided and follow the prompts and talking points for review. 

* Let students know that the Bonus for each activity is meant to give them "food for thought". Rather than extra coding practice, it is a self-study on related topics that are beyond the scope of this unit for those who want to dig deeper and further their knowledge on this topic.

## Learning Objectives

By the end of class, students will be able to:

* Run Node.js applications from the command line with arguments

* Import and use the native `fs` module to read and write to the file system

* Initialize projects and install third-party modules like Inquirer using npm

* Use "dependencies" and investigate the content of `package.json`


## Time Tracker
@TODO ADD ACTIVITY TITLES for Instructor Demo, Student Do, and Instructor Review
| Start  | #   | Activity Name                        | Duration |
| ------ | --- | ------------------------------       | -------- |
| 6:30PM | 1   | Instructor Do: Stoke Curiosity       | 0:10     |
| 6:40PM | 2   | Instructor Demo: `process.argv`      | 0:05     |
| 6:45PM | 3   | Student Do: `process.argv`           | 0:15     |
| 7:00PM | 4   | Instructor Review: `process.argv`    | 0:10     |
| 7:10PM | 5   | Instructor Demo: Read/Write File     | 0:05     |
| 7:30PM | 7   | Instructor Review: Read/Write File   | 0:10     |
| 7:15PM | 6   | Student Do: Append File              | 0:15     |
| 7:40PM | 8   | Instructor Demo: Append File         | 0:05     |
| 7:45PM | 9   | Student Do: Modularization           | 0:15     |
| 8:00PM | 10  | BREAK                                | 0:15     |
| 8:15PM | 11  | Instructor Review: Modularization    | 0:10     |
| 8:25PM | 12  | Instructor Demo: `npm`               | 0:05     |
| 8:30PM | 13  | Student Do: Package.json and NPM     | 0:15     |
| 8:45PM | 14  | Instructor Review: `npm `            | 0:10     |
| 8:55PM | 15  | Instructor Demo: Inquirer            | 0:05     |
| 9:00PM | 16  | Student Do: Inquirer Users           | 0:15     |
| 9:15PM | 17  | Instructor Review: Inquirer Users    | 0:15     |
| 9:30PM | 18  | END                                  | 0:00     |

---

## Class Instruction

### 1. Instructor Do: Stoke Curiosity (10 min)

* Welcome students to class.

* Ask the class the following questions (â˜ï¸) and call on students for the answers (ğŸ™‹):

* â˜ï¸ What are some of the new syntax rules you guys have learned this week?

* ğŸ™‹ This week we learned about arrow functions, `let`, `const`, and template strings.
  
* â˜ï¸ What are some of the differences between `this` in Node compared to `this` in the browser?

* ğŸ™‹ In the browser `this` refers to the window object, while in node, the `this` keyword refers to the global object. The `this` keyword is all about context, and therefore it changes based on where you run it. 

* â˜ï¸ Take moment to think about some things that are now possible because javascript runs outside the browser. Can you name a few examples? 

* ğŸ™‹ The ability to run javascript outside of the browser now allows us to create web servers, our own APIs, command line applications and have manipulate the file system. A lot of applications that we use every day like Slack, Discord, and even VSCode are written in javascript and packaged in a binary using something called [Electron](https://www.electronjs.org/).
  * Please note that while we won't cover electron in this course, it is important to understand the options developers have because javascript can be run outside of the browser.

### 2. Instructor Demo: `process.argv` (5 min) 

* Open [11-Ins_process.argv](../../../../01-Class-Content/09-NodeJS/01-Activities/11-Ins_process.argv/index.js) in your terminal and demonstrate the following:

* Run `node index.js` from the command line and demonstrate the following: 

  * ğŸ”‘  When we run this code in the terminal we see that the output is an array that contains three items

    ```sh
    [
    '/usr/local/bin/node',
    '/Users/johnmccambridge/coding/fullstack-ground/01-Class-Content/09-NodeJS/01-Activities/11-Ins_process.argv/index.js'
    ]
    ```

  * ğŸ”‘  When we add additional arguments to the command, `node index.js Hello World!` we get this following result:

    ```sh
    [
    '/usr/local/bin/node',
    '/Users/johnmccambridge/coding/fullstack-ground/01-Class-Content/09-NodeJS/01-Activities/11-Ins_process.argv/index.js',
    'hello',
    'world!'
    ]
    ```
    * ğŸ”‘ We store command line arguments in an object property, `process.argv`. These can be thought of as *argument values* passed to execution *process* at runtime. This will return an array, and therefore we can isolate just the additional arguments by accessing the correct index position.

    ```js
    console.log(process.argv);
    console.log(process.argv[2])
    ```



* Ask the class the following questions (â˜ï¸) and call on students for the answers (ğŸ™‹):

  * â˜ï¸ What is returned by this application?

  * ğŸ™‹ Running the application returns an array.

  * â˜ï¸ What are the items in the array?'

  * ğŸ™‹ The first item in the array is the installation location of Node itself. The second item in the array is the **absolute path** to the application. The third and fourth arguments are what we pass into the command line split on a space.
  
  * â˜ï¸ What do you think would happen if we wrapped "Hello Word!" in quotes? `node index.js "Hello World!"` 
  
  * ğŸ™‹ As you would expect, the entire string is passed as one argument rather than two different arguments split on the space.

  * â˜ï¸ What does it mean for us if we can pass arguments to our Node application?
  
  * ğŸ™‹ We can work with those values to create dynamic, interactive applications.

* Answer any questions before proceeding to the next activity.

* In preparation for the activity, ask TAs to start directing students to the activity instructions found in [12-Stu_Parameter-Check](../../../../01-Class-Content/09-NodeJS/01-Activities/12-Stu_Parameter-Check/README.md).

### 3. Student Do: `process.argv` (15 min) 

* Direct students to the activity instructions found in [12-Stu_Parameter-Check](../../../../01-Class-Content/09-NodeJS/01-Activities/12-Stu_Parameter-Check/README.md).

* Break your students into pairs that will work together on this activity.

```md
# Parameter Check

In this activity, you will write a Node.js command line application that accepts two arguments and returns true if the two values are equal and false if they are not.

## Instructions

* Create a file, `index.js`, in your working directory.

* Write a script using `process.argv` to accept two command line arguments and compare their values.


## Hint(s)

* Start by simply logging the value of each argument to console.

* There's more than one way to solve this problem!

## Bonus

* How many ways can you solve this problem?

```

* While breaking everyone into groups, be sure to remind students and the rest of the instructional staff that questions on Slack or otherwise are welcome and will be handled. It's a good way for your team to prioritize students that need extra help while circulating through room.

### 4. Instructor Review: `process.argv` (10 min) 

* Ask the class the following questions (â˜ï¸) and call on students for the answers (ğŸ™‹):

  * â˜ï¸ How comfortable do you feel with `process.argv`? (Poll via Fist to Five, Slack, or Zoom)

* Assure students that we will cover the solution to help solidify their understanding. If questions remain, remind them to use office hours to get extra help!

* Use the prompts and talking points below to review the following key (ğŸ”‘) points:

  * âœ”ï¸ Value stored in `process.argv` are access by an array index

  * âœ”ï¸ This is one of those concepts where you have to remember that there is no one correct way to solve the problem.

* Open [12-Solved](../../../../01-Class-Content/09-NodeJS/01-Activities/12-Stu_Parameter-Check/Solved/index.js) in your IDE and explain the following: 

  * When we run our app we see a list of boolean values. All of them are checking for the same condition, but each uses a different method

    ```sh
    node index.js 3 4
    node index.js 7 7
    ```

  * ğŸ”‘  We store the second and third elements in the array to variables

    ```js
    var a = process.argv[2];
    var b = process.argv[3];
    ```

  * ğŸ”‘ Here we can see that there is more than one way to check if our statement is true

    ```js
    // using a conditional statement
    if (a === b) {
        console.log(true);
    } else {
        console.log(false);
    }

    //using a ternary operator
    console.log(a === b ? true : false)

    // comparing variables
    console.log(a === b);

    // comparing argument values directly
    console.log(process.argv[2] === process.argv[3]);
    ```

* Ask the class the following questions (â˜ï¸) and call on students for the answers (ğŸ™‹):

  * â˜ï¸ How could we improve our code for when a user fails to enter two arguments

  * ğŸ™‹ We could check if `a` or `b` is falsy, and instead console log a message with directions

  * â˜ï¸ What can we do if we don't completely understand this?

  * ğŸ™‹ Be sure to meet with your TAs during office hours or consult with the [node documentation](https://nodejs.org/api/process.html#process_process_argv).

* Answer any questions before proceeding to the next activity.

### 5. Instructor Demo: Read/Write File (5 min) 

* Open [13-Ins-Read-WriteFile](../../../../01-Class-Content/09-NodeJS/01-Activities/13-Ins-Read-WriteFile/index.js) in your browser and demonstrate the following:

* Run `node index.js` from the command line and demonstrate the following: 

  * ğŸ”‘ When we run this application we can see the output is the content of the companion `.csv` file in the project folder:

    ```sh
    10,123,76,5003,9,0.127,40,-1,2^4
    ```

  * ğŸ”‘ This is made possible though the use of Node's native `fs` module. The `fs` module is part of the **standard library** that includes dozens of **modules** that extend the basic functionality of Node.

  * ğŸ”‘ In order to use these modules, we need to *import* them into our app using `require` statements. Here we are importing `fs` and assigning it to variable of the same name.

    ```js
    var fs = require("fs");
    ```

  * ğŸ”‘ The `fs` method `readFile` accepts three arguments: 1. the file we want to read, the encoding format we want to use to read the file, and a callback.

    ```js
    fs.readFile("data.csv", "utf8", function(error, data) {

    if (error) {
        return console.log(error);
    }

    console.log(data);
    });
    ```
* Comment out the `readFile` function and comment in the `writeFile` function in [13-Ins-Read-WriteFile](../../../../01-Class-Content/09-NodeJS/01-Activities/13-Ins-Read-WriteFile/index.js).
  
  * ğŸ”‘ `fs.writeFile` will not only generate non-existent files but will also overwrite them if they already exist
  
  * ğŸ”‘ Our code is similar, but different from the previous demo in a few key ways. Take note of the fact that we don't start out with a `.txt` file in our working directory.

    ```js
    fs.writeFile("log.txt", process.argv[2], function(err) {

    if (err) {
        return console.log(err);
    }

    console.log("Success!");
    ```

 * ğŸ”‘  When we run the the above code using `node index.js Hello` we will get a newly created `log.txt` file with the text 'Hello' in it.

* Ask the class the following questions (â˜ï¸) and call on students for the answers (ğŸ™‹):

  * â˜ï¸ What do you think this application does?

  * ğŸ™‹ This application will _read a file_, `data.csv`, and will log the results stored in a variable, `data`.

  * â˜ï¸ Why do you think we need to import modules if they are built-in to Node to begin with?

  * ğŸ™‹ We import modules into our application so that we are only loading exactly what we need. This will speed up the performance of our applications. 
  
  * â˜ï¸ What is different about the code in the `writeFile` example?
  
  * ğŸ™‹ Rather than `readFile`, we are using the `fs` method `writeFile`. Rather than specifying an encoding format, our second argument is `process.argv[2]`.

  * â˜ï¸ What happens when we run our application multiple times?

  * ğŸ™‹ `writeFile` overwrites existing files.

  * â˜ï¸ How do we think we can resolve this issue?

  * ğŸ™‹ We need a method that can _append_ text to files.

* Answer any questions before proceeding to the next activity.

* In preparation for the activity, ask TAs to start directing students to the activity instructions found in [14-Stu-appendFile](../../../../01-Class-Content/09-NodeJS/01-Activities/14-Stu_appendFile/README.md).

### 6. Student Do: Append File (15 min) 

* Direct students to the activity instructions found in [14-Stu-appendFile](../../../../01-Class-Content/09-NodeJS/01-Activities/14-Stu_appendFile/README.md).

* Break your students into pairs that will work together on this activity.

```md
# appendFile

In this activity, you will create a "commit logger" that records commit messages (for poetic purposes) using `fs`.

## Instructions

* In your working directory, create a Node application, `index.js`, that accepts a command line argument, and, each time it is run, will write the argument to file _without_ overwriting the existing text.

* You may need to consult the Node.js `fs` documentation for the appropriate method and its usage.

## Hint(s)

* If `fs.readFile` reads a file and `fs.writeFile` writes, but _overwrites_, a file, what method do you think will allow you to _append_ text to a file?

## Bonus

* How would you add arguments on new lines? 

```

* While breaking everyone into groups, be sure to remind students and the rest of the instructional staff that questions on Slack or otherwise are welcome and will be handled. It's a good way for your team to prioritize students that need extra help while circulating through room.

### 7. Instructor Review: Append File (10 min) 

* Ask the class the following questions (â˜ï¸) and call on students for the answers (ğŸ™‹):

  * â˜ï¸ How comfortable do you feel with appending to files? (Poll via Fist to Five, Slack, or Zoom)

* Assure students that we will cover the solution to help solidify their understanding. If questions remain, remind them to use office hours to get extra help!

* Use the prompts and talking points below to review the following key (ğŸ”‘) points:

  * âœ”ï¸ `appendFile` appends text to file rather than overwriting the file

* Open [Stu-appendFile/Solved](../../../../01-Class-Content/09-NodeJS/01-Activities/14-Stu_appendFile/Solved/index.js) in your IDE and explain the following: 

  * When we run our command line application with the following we should see this text appended to the file in [14-Stu-appendFile](../../../../01-Class-Content/09-NodeJS/01-Activities/14-Stu_appendFile/Solved/log.txt).

  ```sh
    node index.js "first"
    node index.js "commit early and often"
    node index.js "everyone wants a log"
  ```

  * The application now is adding text to our file rather than overwriting it

  * ğŸ”‘  Our application is very similar to the previous demo, but here we have refactored it to use `appendFile` rather than `writeFile`:

    ```js
    fs.appendFile("log.txt", process.argv[2] + '\n', function(err) {
        if (err) {
        console.log(err);
        } else {
        console.log("Commit logged!");
        }
    });
    ```

* Ask the class the following questions (â˜ï¸) and call on students for the answers (ğŸ™‹):

  * â˜ï¸ What does the `\n` do when we concatenate it with the value store in `process.argv[2]`?
  
  * ğŸ™‹ This creates a new line character
  
  * â˜ï¸ What can we do if we don't completely understand this?

  * ğŸ™‹ The solution can be easily found by searching for, and reading, the [Node.js documentation for the File System module](https://nodejs.org/api/fs.html#fs_fs_appendfile_path_data_options_callback).


* Answer any questions before proceeding to the next activity.

### 8. Instructor Demo: Modularization (5 min) 

* Open the [15-Ins-Modularization](../../../../01-Class-Content/09-NodeJS/01-Activities/15-Ins_Modularization) directory in your IDE and demonstrate the following:

* Run `node index.js` from the command line and demonstrate the following: 

  * ğŸ”‘ We notice that the output of this file is: 

    ```sh
    apple
    1
    ```

  * ğŸ”‘  We are importing a dependency, `badmath`, and logging the results of `badmath.pie` and `badmath.predictable`. 

    ```js
    var badmath = require("./badmath.js");

    console.log(badmath.pie);

    console.log(badmath.predictable());
    ```

* Open the [badmath.js](01-Class-Content/09-NodeJS/01-Activities/15-Ins_Modularization/badmath.js) file and explain the following:

  * We declare a `pie` and `predictable` variables:

  ```js
  var pie = "apple";

  var predictable = function(){
    return 1;
  }
  ```

  * ğŸ”‘ We _export_ our `pie` and `predictable` variables as an object stored in `module.exports`:

  ```js
  module.exports = {
    pie: pie,
    predictable: predictable
  };
  ```

* Ask the class the following questions (â˜ï¸) and call on students for the answers (ğŸ™‹):

  * â˜ï¸ What is referenced by the keyword **module**?'

  * ğŸ™‹ Our file, `badmath.js`.

  * â˜ï¸ Where can we look if we want to learn more about `module.exports`?

  * ğŸ™‹ If we want to learn more, we can read about it in the [module.exports documentation](https://nodejs.org/api/modules.html#modules_module_exports)

* Answer any questions before proceeding to the next activity.

* In preparation for the activity, ask TAs to start directing students to the activity instructions found in [16-Stu-maths](../../../../01-Class-Content/09-NodeJS/01-Activities/16-Stu_maths/README.md).

### 9. Student Do: Modularization (15 min) 

* Direct students to the activity instructions found in [16-Stu-maths](../../../../01-Class-Content/09-NodeJS/01-Activities/16-Stu_maths/README.md).

* Break your students into pairs that will work together on this activity.

    ```md
    # Maths Module

    The JavaScript `Math` library contains many useful properties and methods. But it's missing a few of the basics. In this activity, you will create your own `maths` module then import it into a Node application to access its properties and methods.

    Running `node index.js sum 3 4` will return 7.

    ## Instructions

    * Create two files, `index.js` and `maths.js`, then import `maths.js` into `index.js`.

    * Write four methods for the results of the four basic mathematical operations in `maths.js`: `sum`, `difference`, `product`, and `quotient`; and then export them.

    * In `index.js`, create variables to capture the values passed from the command line in `process.argv`: `operation`, `numOne` and `numTwo`.

    * Next, write a `switch` statement that accepts an `operation` parameter.

    * Within each `case` of the `switch`, use the corresponding `maths` methods to perform the operation on the numbers taken from the command line using `process.argv`.

    ## Hint(s)

    * You will need to use `parseInt()`. But why?

    ## Bonus

    * You can also export your functions directly. How? 

    ```

* While breaking everyone into groups, be sure to remind students and the rest of the instructional staff that questions on Slack or otherwise are welcome and will be handled. It's a good way for your team to prioritize students that need extra help while circulating through room.

### 10. BREAK (15 min)

### 11. Instructor Review: Modularization (10 min) 

* Ask the class the following questions (â˜ï¸) and call on students for the answers (ğŸ™‹):

  * â˜ï¸ How comfortable do you feel with modularization? (Poll via Fist to Five, Slack, or Zoom)

* Assure students that we will cover the solution to help solidify their understanding. If questions remain, remind them to use office hours to get extra help!

* Use the prompts and talking points below to review the following key (ğŸ”‘) points:

  * âœ”ï¸ This exercise combines the concepts of `process.argv` with the idea of `module.exports`.

  * âœ”ï¸ We exported an object containing all our math methods like sum, difference, product and quotient

  * We capture the exported object on the other side by using a require statement at the top of the file

* Open [index.js](../../../../01-Class-Content/09-NodeJS/01-Activities/16-Stu_maths/Solved/index.js) in your IDE and explain the following: 

  * When we run the commands below, we can see the output of each math operation in the terminal.

    ```sh
    node index.js sum 3 4
    node index.js difference 3 4
    node index.js product 3 4
    node index.js quotient 3 4
    ```

  * We import our `maths` module and declare three variables, `operation`, `numOne` and `numTwo` to store the values passed to `process.argv` from the command line:

    ```js
    const maths = require('./maths');

    const operation = process.argv[2];

    const numOne = parseInt(process.argv[3]);
    const numTwo = parseInt(process.argv[4]);
    ```

  * We use a `switch` statement to evaluate the `operation` case and call the corresponding method from our `maths` module:

    ```js
    switch (operation) {
        case 'sum':
            console.log(maths.sum(numOne, numTwo));
            break;
        case 'difference':
            console.log(maths.difference(numOne, numTwo));
            break;
        case 'product':
            console.log(maths.product(numOne, numTwo));
            break;
        case 'quotient':
            console.log(maths.quotient(numOne, numTwo));
            break;
        default:
            console.log('Check your maths!');
    }
    ```

  * ğŸ”‘  Open [maths.js](../../../../01-Class-Content/09-NodeJS/01-Activities/16-Stu_maths/Solved/maths.js) show that we export our methods directly by declaring them inside of the `exports` object:

    ```js
    module.exports = {
        sum: (a, b) => a + b,
        difference: (a, b) => a - b,
        product: (a, b) => a * b,
        quotient: (a, b) => a / b,
    };
    ```

* Ask the class the following questions (â˜ï¸) and call on students for the answers (ğŸ™‹):

  * â˜ï¸ Why do we need to use `parseInt` when getting the numbers from the command line?

  * ğŸ™‹ In order to preform math operations in code, the data type for those numbers has to "number".

* Answer any questions before proceeding to the next activity.

### 12. Instructor Demo: Node Package Manager (NPM) (5 min) 

* Run [npm/index.js](../../../../01-Class-Content/09-NodeJS/01-Activities/17-Ins-npm/npm/index.js) from the command line and demonstrate the following: 

  * ğŸ”‘  When we run this javascript file with node, we will see an error message with a code of `MODULE_NOT_FOUND`

  * ğŸ”‘  We will also see the error `Error: Cannot find module 'badmath'`. This refers to the module we are attempting to import on line one of `index.js`

    ```js
    const badmath = require('badmath');
    ```

  * To resolve this issue we would need to run the following commands to initialize npm inside this repository. This will a `package.json` file which will keep track of what packages are needed to use the project properly.

    ```sh
    npm init -y
    npm i badmath
    ```

  * ğŸ”‘ The `-y` flag tells npm to answer "yes" to each question it normally asks during the init process. This is to save us some time. 

  * The second command `npm i` is shorthand for `npm install`. These two commands can be used interchangeably. `npm i badmath` will reach out to npm's registry and install the latest version of the package you named after the command. In our case, we are installing `badmath`. 
 
* Open the [init](../../../../01-Class-Content/09-NodeJS/01-Activities/17-Ins-npm/init) folder to examine the additional file. 

  * ğŸ”‘  You will notice a difference immediately. This folder comes with a `package.json` file. This describes the repository itself as well as any scripts, dependencies, and licenses associated with the project.

  * ğŸ”‘  We can also see when we examine the content of the `package.json` file that one of our required dependencies is `badmath`.

    ```json
    "dependencies": {
        "badmath": "^1.0.1"
    },
    ```
  * Running `npm install` inside the [init directory](../../../../01-Class-Content/09-NodeJS/01-Activities/17-Ins-npm/init) will instruct npm to examine the content of the `package.json` and install anything listed in the dependencies section.
  
  * ğŸ”‘ You will also notice a `package-lock.json` file that gets created. This keeps track of specific version numbers, but for the most part we don't need to interact with this file in any way.

* Ask the class the following questions (â˜ï¸) and call on students for the answers (ğŸ™‹):

  * â˜ï¸ How would we make our own `package.json` file?

  * ğŸ™‹ We would run `npm init`
  
  * â˜ï¸ What should we do if there is already a `package.json` in a project we cloned?

  * ğŸ™‹ We would run `npm install` to get all the needed dependencies.
  
  * â˜ï¸ Where can we find out what other npm commands are available?

  * ğŸ™‹ We can check out the [npm docs](https://docs.npmjs.com/cli-documentation/).

* Answer any questions before proceeding to the next activity.

* In preparation for the activity, ask TAs to start directing students to the activity instructions found in [18-Stu-Package-npm](../../../../01-Class-Content/09-NodeJS/01-Activities/18-Stu-Package-npm/README.md).

### 13. Student Do: Package.json and NPM (15 min)

* Direct students to the activity instructions found in [18-Stu-Package-npm](../../../../01-Class-Content/09-NodeJS/01-Activities/18-Stu-Package-npm/README.md).

* Break your students into pairs that will work together on this activity.

```md
## NPM

This activity contains two parts where you will be creating a `package.json` and also installing dependencies from an existing `package.json`. 

1. npm initialization
2. npm install

Please refer to the `/init` and `/package` folders and their respective `README.md` files.
```

* While breaking everyone into groups, be sure to remind students and the rest of the instructional staff that questions on Slack or otherwise are welcome and will be handled. It's a good way for your team to prioritize students that need extra help while circulating through room.

### 14. Instructor Review: Node Package Manager (NPM) (10 min) 

* Ask the class the following questions (â˜ï¸) and call on students for the answers (ğŸ™‹):

  * â˜ï¸ How comfortable do you feel with npm? (Poll via Fist to Five, Slack, or Zoom)

* Assure students that we will cover the solution to help solidify their understanding. If questions remain, remind them to use office hours to get extra help!

* Use the prompts and talking points below to review the following key (ğŸ”‘) points:

  * âœ”ï¸ In one activity we started from scratch by creating a `package.json` file using `npm init`

  * âœ”ï¸ In the other activity we used the existing `package.json` to install the dependencies already outlined in the file.

* Open the [init](../../../../01-Class-Content/09-NodeJS/01-Activities/18-Stu-Package-npm/init/README.md) readme in your IDE and explain the following: 

  * We start out here by running `npm init -y`, which will generate the `package.json` file. Optionally, we can run the command without the `-y` flag to allow for more custom responses.

    ```sh
    npm init -y
    npm install inquirer --save
    ```

  * ğŸ”‘  The second command will install inquirer and also add the package, inquirer, to our dependency list in `package.json`
  
* Open [package](../../../../01-Class-Content/09-NodeJS/01-Activities/18-Stu-Package-npm/package/README.md) in your IDE and explain the following: 

  * This exercise has us simply run the install command, because as you can see the `package.json` already exists for this project. Furthermore, this file contains "inquirer" as a dependency.

    ```sh
    npm install
    ```

  * ğŸ”‘  Running `npm install` is a great first step with any project or exercise that you cloned down from another user or organization.

  * ğŸ”‘  Sometimes you want to install a package, but not as part of your production app. In this case, you can use `npm install jest --save-dev`.

* Ask the class the following questions (â˜ï¸) and call on students for the answers (ğŸ™‹):

  * â˜ï¸ What does the `--save` flag do, and is it always necessary?

  * ğŸ™‹ The save flag ensures that we add our dependency to the list outlined inside the package.json. Newer versions of `npm` will do this automatically so it isn't always required.

  * â˜ï¸ How do we install a specific package?

  * ğŸ™‹ We can run `npm install <package name>`
  
  * â˜ï¸ How do we create a package.json file and skip the questions?

  * ğŸ™‹ We can run `npm init -y`

* Answer any questions before proceeding to the next activity.

### 15. Instructor Demo: Inquirer (5 min) 

* Open [19-Ins_Inquirer-Demo](../../../../01-Class-Content/09-NodeJS/01-Activities/19-Ins_Inquirer-Demo/) in your browser and demonstrate the following:

* Run [19-Ins_Inquirer-Demo](../../../../01-Class-Content/09-NodeJS/01-Activities/19-Ins_Inquirer-Demo/index.js) from the command line and demonstrate the following: 

  * ğŸ”‘ This is a folder for a new activity, and we can a `package.json` that exists already. This is an indicator that we should run the following command:

    ```sh
    npm install
    ```
  
  * ğŸ”‘ When we run `node index.js` we notice that unlike previous node applications we have built, this one is not only outputting text to the terminal, it is also asking us for some input.

    ```sh
    ? What is your user name?
    ? What is your password?
    ? Re-enter password to confirm:
    ```

  * ğŸ”‘ The application asks for our username, a password and then a confirmation. If the passwords match, the application then logs "Success!

* Open [index.js](../../../../01-Class-Content/09-NodeJS/01-Activities/19-Ins_Inquirer-Demo/index.js) and examine the code:
  
  * At the top of the file, we import `inquirer`

    ```js
    var inquirer = require("inquirer");
    ```

  * ğŸ”‘  We use the `prompt` method to ask the user for input

    ```js
    inquirer
        .prompt([
        {
            type: "input",
            message: "What is your user name?",
            name: "username"
        },
        {
            type: "password",
            message: "What is your password?",
            name: "password"
        },
        {
            type: "password",
            message: "Re-enter password to confirm:",
            name: "confirm"
        }
        ])
    ```

  * The prompts are an array of objects have a `name`, `type`, and `message` property.
  
  * The input of each prompt will be stored in an object property that corresponds to the `name` value. The `type` values are built in to `inquirer` and what allows us to enter _secure_ passwords.
  
  * The `message` property is the prompt that the user ends up seeing. 

  * Once all of the prompts are answered, we can _then_ work with the user `response`. Here, the `response` parameter in the `.then` callback corresponds with the user input, which `inquirer` store in an object. 

    ```js
    .then((response) =>
        response.confirm === response.password
            ? console.log('Success!')
            : console.log('You forgot your password already?!'));
    ```

  * Here we are checking to see if the confirmed password input is strictly equal to the password the user provided in the previous response. We then use a conditional (ternary) operator to check if the passwords match. If so, we log "success!", otherwise let the user know they forgot their password.
 
* Ask the class the following questions (â˜ï¸) and call on students for the answers (ğŸ™‹):

  * â˜ï¸ Based on the name alone, what do you think the `inquirer` package allows us to do?

  * ğŸ™‹ Based on the dictionary definition of _inquire_, it might be used to ask for information from someone, that someone being the user of our application. 

* Answer any questions before proceeding to the next activity.

* In preparation for the activity, ask TAs to start directing students to the activity instructions found in `@TODO/folder/file`.

### 16. Student Do: Inquirer Users (15 min) 

* Direct students to the activity instructions found in [20-Stu-Inquirer-Users](../../../../01-Class-Content/09-NodeJS/01-Activities/20-Stu_Inquirer-Users/README.md).

* Break your students into pairs that will work together on this activity.

```md
# Inquirer Users

In this activity, you will build a simple command line application that accepts user input and writes it to a `.json` file. 


## Instructions

* Initialize your repository and install the `inquirer` dependency.

    * Is there another dependency you will need? 

* Prompt your user with the following questions:

    * "What is your name?"

    * "What languages do you know?"

    * What is your preferred method of communication?"

* Then write the user response to a file. 


## Hint(s)

* You will need to use `JSON.stringify()`.

* You will need to consult the `inquirer` documentation on how to prompt users for checkboxes and lists.


## Bonus

* How would you format your JSON?

* Can you generate the name of your user file from their input?
```

* While breaking everyone into groups, be sure to remind students and the rest of the instructional staff that questions on Slack or otherwise are welcome and will be handled. It's a good way for your team to prioritize students that need extra help while circulating through room.

### 17. Instructor Review: Inquirer Users (15 min)

* Ask the class the following questions (â˜ï¸) and call on students for the answers (ğŸ™‹):

  * â˜ï¸ How comfortable do you feel with inquirer? (Poll via Fist to Five, Slack, or Zoom)

* Assure students that we will cover the solution to help solidify their understanding. If questions remain, remind them to use office hours to get extra help!

* Use the prompts and talking points below to review the following key (ğŸ”‘) points:

  * âœ”ï¸ Our application requires two dependencies, one third-party (`inquirer`) the other standard library (`fs`).

  * âœ”ï¸ We use two new `type` properties to prompt our user for a `"checkbox"` and a `"list"`, both of which require a `choices` property and a corresponding array of options.

  * âœ”ï¸ We use the `JSON.stringify` optional `replacer` (`null`) and `space` (`\t`) parameters to format our `data` object with pretty-print appearance. 

* Open [20-Stu-Inquirer-Users](../../../../01-Class-Content/09-NodeJS/01-Activities/20-Stu_Inquirer-Users/Solved/index.js) in your IDE and explain the following: 

  * ğŸ”‘ Our application requires two dependencies, one third-party (`inquirer`) the other standard library (`fs`).

    ```js
    const inquirer = require('inquirer');
    const fs = require('fs');
    ```

  * ğŸ”‘ We use two new `type` properties to prompt our user for a `"checkbox"` and a `"list"`, both of which require a `choices` property and a corresponding array of options.

    ```js
      inquirer.prompt([
        {
            type: "input",
            name: "name",
            message: "What is your name?"
        },
        {
            type: "checkbox",
            message: "What languages do you know?",
            name: "stack",
            choices: [
                "HTML", 
                "CSS", 
                "JavaScript", 
                "MySQL"
            ]
        },
        {
            type: "list",
            message: "What is your preferred method of communication?",
            name: "contact",
            choices: [
                "email",
                "phone",
                "telekinesis"
            ]
        }
    ])
    ```
  
  * We pass the output of the `prompt` method to our Promise callback as `data`.

    ```js
      .then((data) => {
        const filename = `${data.name.toLowerCase().split(' ').join('')}.json`;

        fs.writeFile(filename, JSON.stringify(data, null, '\t'), (err) =>
            err ? console.log(err) : console.log('Success!')
        );
    });
    ```
  * We are creating a filename by removing the spaces and setting all letters to lowercase. We then concat the filename using the `.join` method. Finally, we add `.json` to the filename.
  
  * ğŸ”‘ We use the `fs.writeFile` method to create a new file using our `filename` variable. We use the `JSON.stringify` optional `replacer` (`null`) and `space` (`\t`) parameters to format our `data` object with pretty-print appearance.


* Ask the class the following questions (â˜ï¸) and call on students for the answers (ğŸ™‹):

  * â˜ï¸ Why do we need to use `JSON.stringify` when passing in the data?

  * ğŸ™‹ The data needs to be converted to a string, because as is, `data` is not of type `string`. We can learn more about this method at [MDN's documentation for JSON.stringify()](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON/stringify).
  
  * â˜ï¸ What can we do if we don't completely understand this?

  * ğŸ™‹ The inquirer documentation has some examples of how to use their package on their [github page](https://github.com/SBoudrias/Inquirer.js#readme)
  


* Answer any questions before ending the class.

### 18. END (0 min)

How did todayâ€™s lesson go? Your feedback is important. Please take 5 minutes to complete [this anonymous survey](https://forms.gle/RfcVyXiMmZQut6aJ6).

---
Â© 2020 Trilogy Education Services, LLC, a 2U, Inc. brand.  Confidential and Proprietary.  All Rights Reserved.