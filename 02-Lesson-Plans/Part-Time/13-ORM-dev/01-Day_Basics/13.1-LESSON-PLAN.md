# 13.1 Part-Time Lesson Plan: Object Relational Mapping (ORM)

## Overview 

@TODO Write a two or three-sentence overview of the lesson plan.

## Instructor Notes

* Complete activities `01-Ins_Sequelize-Setup` through `10-Stu_Async-Await`

* @TODO Each Instructor Note block begins with the bullet above, outlining what activities will be covered during class.

* @TODO Empathize with the instructor. If you only had one hour to prepare for class, what are the things you would want to know up front? What are the potential pitfalls in class? Where are students going to get hung up? 

* @TODO Set the instructor up for success.

* Remind students to do a `git pull` of the class repo to have today's activities ready and open in VS Code. 

* If you are comfortable doing so, live code the solutions to the activities. If not, no worries. Use the solutions provided and follow the prompts and talking points for review. 

* Let students know that the Bonus for each activity is meant to give them "food for thought". Rather than extra coding practice, it is a self-study on related topics that are beyond the scope of this unit for those who want to dig deeper and further their knowledge on this topic.

## Learning Objectives

By the end of class, students will be able to:

* @TODO Bullet the learning objectives for the lesson plan. Refer to your Activity Planner.

* @TODO When writing learning objectives, refer to this list of measurable verbs used to assess learning outcomes https://www.clinton.edu/curriculumcommittee/listofmeasurableverbs.cxml

* @TODO For example, "Initialize projects and install third-party packages using npm"

* @TODO If it's a concept and not a demonstrable skill, use "explain". For example, "Explain the client-server model"

* @TODO Don't use "Understand..." as it is not measurable

* @TODO Aim for at least 3 points, but no more than 6. If you find yourself listing more than six points you may need to rethink the scope of your points or the lesson plan itself. 

## Slide Deck

* @TODO [Unit XX Slide Deck]()

## Time Tracker
| Start  | #   | Activity Name                       | Duration |
|---     |---  |---                                  |---       |
| 6:30PM | 1   | Instructor Do: Stoke Curiosity      | 0:10     |
| 6:40PM | 2   | Instructor Demo: Sequelize Setup    | 0:05     |
| 6:45PM | 3   | Student Do: Sequelize Setup         | 0:15     |
| 7:00PM | 4   | Instructor Review: Sequelize Setup  | 0:10     |
| 7:10PM | 5   | Instructor Demo: Models             | 0:05     |
| 7:15PM | 6   | Student Do: Models                  | 0:15     |
| 7:30PM | 7   | Instructor Review: Models           | 0:10     |
| 7:40PM | 8   | Instructor Demo: Create             | 0:05     |
| 7:45PM | 9   | Student Do: Create Read             | 0:15     |
| 8:00PM | 10  | BREAK                               | 0:15     |
| 8:15PM | 11  | Instructor Review: Create Read      | 0:10     |
| 8:25PM | 12  | Instructor Demo: Update Delete      | 0:05     |
| 8:30PM | 13  | Student Do: Update Delete           | 0:15     |
| 8:45PM | 14  | Instructor Review: Update Delete    | 0:10     |
| 8:55PM | 15  | Instructor Demo: Async Await        | 0:05     |
| 9:00PM | 16  | Student Do: Async Await             | 0:15     |
| 9:15PM | 17  | Instructor Review: Async Await      | 0:15     |
| 9:30PM | 18  | END                                 | 0:00     |

---

## Class Instruction

### 1. Instructor Do: Stoke Curiosity (10 min)

* Welcome students to class.

* Open the [slide deck]() and follow these prompts on their corresponding slides:

  * **@TODO TITLE OF SLIDE**: @TODO ADD TALKING POINTS

  * **@TODO TITLE OF SLIDE**: @TODO ELABORATE ON SLIDE CONTENT
  
  * **@TODO TITLE OF SLIDE**: @TODO TRANSITION INTO MINI-PROJECT DEMO

* Navigate to `@TODO/folder/file` in your command line and demonstrate the following:

  * @TODO { WHAT ARE WE GOING TO BE BUILD? }

  * @TODO { ISN'T THIS NEAT! A SOPHISTICATED OR MODERN APPLICATION OF A KEY TOPIC. }

* Ask the class the following questions (☝️) and call on students for the answers (🙋):

  * ☝️ What are we learning?

  * 🙋 @TODO { YES, WHAT? }.

  * ☝️ How does this project build off or extend previously learned material?

  * 🙋 @TODO {YES, WHAT? }.

  * ☝️ How does this project relate to your career goals?

  * 🙋 @TODO { HOW DO COMPANIES USE IT IN INTERESTING WAYS? HOW POPULAR OR IN-DEMAND IS IT? WHY IS THE PROJECT ENTICING TO EMPLOYERS? }

* Answer any questions before proceeding to the next activity.

### 2. Instructor Demo: Sequelize Setup (5 min) 

* Open `01-Ins_Sequelize-Setup/package.json` in your IDE and explain the following:

  * 🔑 We include `sequelize` as a dependency. We also include `mysql2` to specify which flavor of SQL the Sequelize library should use.

    ```json
    "dependencies": {
      "express": "^4.17.1",
      "mysql2": "^2.2.5",
      "sequelize": "^6.3.5"
    }
    ```

* Open `01-Ins_Sequelize-Setup/config/connection.js` in your IDE and explain the following:

  * 🔑 We use the `Sequelize()` constructor to create a new database connection, specifying the user credentials and location of the MySQL database.

    ```js
    const sequelize = new Sequelize(
      // Database name
      'library_db',
      // User
      'root',
      // Password
      'myPassword',
      {
        // Database location
        host: 'localhost',
        dialect: 'mysql',
        port: 3306
      }
    );
    ```

* Open `01-Ins_Sequelize-Setup/server.js` in your IDE and explain the following:

  * 🔑 We import the connection object.

    ```js
    const sequelize = require('./config/connection');
    ```
  
  * 🔑 We use the `sync()` method to connect to the database.

    ```js
    sequelize.sync().then(() => {
      app.listen(PORT, () => console.log('Now listening'));
    });
    ```

* Run `01-Ins_Sequelize-Setup/server.js` from the command line and demonstrate the following: 

  * 🔑 Sequelize executes a simple `SELECT 1+1 AS result` query to verify the database connection.

* Ask the class the following questions (☝️) and call on students for the answers (🙋):

  * ☝️ What dependencies are needed to set up Sequelize?

  * 🙋 The `sequelize` and `mysql2` npm packages.

  * ☝️ How would we connect to a different database?

  * 🙋 Change the credentials in the `Sequelize()` constructor.

* Answer any questions before proceeding to the next activity.

* In preparation for the activity, ask TAs to start directing students to the activity instructions found in `02-Stu_Sequelize-Setup`.

### 3. Student Do: Sequelize Setup (15 min) 

* Direct students to the activity instructions found in `02-Stu_Sequelize-Setup`.

* Break your students into pairs that will work together on this activity.

  ```md
  # 📖 Replace Hard-Coded Credentials With Environment Variables

  Work with a partner to implement the following user story:

  * As a developer, I want to protect my database credentials by not hard-coding them in the project files.

  ## Acceptance Criteria

  * It's done when the database name, user, and password are moved to environment variables.

  * It's done when Sequelize is able to connect to the database using the `dotenv` npm package.

  ## 📝 Note(s)

  Refer to the documentation: 

  * [dotenv npm package](https://www.npmjs.com/package/dotenv)

  ---

  ## 💡 Hint(s)

  * How does the `dotenv` npm package use `.env` files?

  ## 🏆 Bonus

  * If you have fully completed the above tasks, here is something you and your partner can work through as an added challenge to further your knowledge:

    * How can you set environment variables from the command line? 

  * Use [Google](https://www.google.com) or another search engine to research the above.
  ```

* While breaking everyone into groups, be sure to remind students and the rest of the instructional staff that questions on Slack or otherwise are welcome and will be handled. It's a good way for your team to prioritize students that need extra help while circulating through room.

### 4. Instructor Review: Sequelize Setup (10 min) 

* Ask the class the following questions (☝️) and call on students for the answers (🙋):

  * ☝️ How comfortable do you feel with the `dotenv` package and connecting to Sequelize? (Poll via Fist to Five, Slack, or Zoom)

* Assure students that we will cover the solution to help solidify their understanding. If questions remain, remind them to use office hours to get extra help!

* Use the prompts and talking points below to review the following key (🔑) points:

  * ✔️ `.env` files

  * ✔️ `dotenv` npm package

  * ✔️ Sequelize connections

* Open `02-Stu_Sequelize-Setup/Solved/package.json` in your IDE and explain the following: 

  * 🔑 We added the `dotenv` npm package as a dependency.

    ```json
    "dependencies": {
      "dotenv": "^8.2.0",
      "express": "^4.17.1",
      "mysql2": "^2.2.5",
      "sequelize": "^6.3.5"
    }
    ```

* Open `02-Stu_Sequelize-Setup/Solved/.env.EXAMPLE` in your IDE and explain the following: 

  * 🔑 We created a `.env` file to store our environment variables. Note that this file is called `.env.EXAMPLE` so Git would actually track it for the activity, but in an actual project it would be called `.env`.

    ```text
    DB_NAME=library_db
    DB_PASSWORD=
    DB_USER=
    ```

* Open `02-Stu_Sequelize-Setup/Solved/.gitignore` in your IDE and explain the following: 

  * 🔑 We added `.env` to the `.gitignore` file to ensure our credentials don't accidentally get added and committed to the repository.

    ```text
    node_modules
    .DS_Store
    .env
    ```

* Open `02-Stu_Sequelize-Setup/Solved/config/connection.js` in your IDE and explain the following: 

  * 🔑 We enabled the `dotenv` package to allow our `.env` variables to be read by the Node.js script.

    ```js
    require('dotenv').config();
    ```

  * 🔑 We used `process.env` environment variables in place of hardcoded values to connect to the database.

    ```js
    const sequelize = new Sequelize(
      process.env.DB_NAME,
      process.env.DB_USER,
      process.env.DB_PASSWORD,
      {
        host: 'localhost',
        dialect: 'mysql',
        port: 3306
      }
    );
    ```

* Ask the class the following questions (☝️) and call on students for the answers (🙋):

  * ☝️ What problem does the `dotenv` package solve?

  * 🙋 It gives you a way to avoid hardcoding your credentials in a JS file.

  * ☝️ Why wouldn't you want to commit the `.env` file with Git?

  * 🙋 Other team members would have different credentials. If the repository is public, anyone can see the credentials.

  * ☝️ What can we do if we don't completely understand this?

  * 🙋 We can refer to supplemental material, read the [dotenv npm package documentation](https://www.npmjs.com/package/dotenv) and [Sequelize documentation](https://sequelize.org/), and stick around for Office Hours to ask for help.

* Answer any questions before proceeding to the next activity.

### 5. Instructor Demo: Models (5 min) 

@TODO USE THE FOLLOWING FOR BROWSER AND/OR COMMAND LINE DEMOS, RESPECTIVELY. REMOVE IF UNUSED

* Open `@TODO/folder/file` in your browser and demonstrate the following:

* Run `@TODO/folder/file { AND ARGS, IF ANY }` from the command line and demonstrate the following: 

  * 🔑 @TODO { WHEN WE DO THIS, IT DOES THAT. }

  * 🔑 @TODO { WE ALSO SEE THESE THINGS. }

* Ask the class the following questions (☝️) and call on students for the answers (🙋):

  * ☝️ How would we build this?

  * 🙋 @TODO { YES, HOW? }

* Answer any questions before proceeding to the next activity.

* In preparation for the activity, ask TAs to start directing students to the activity instructions found in `@TODO/folder/file`.

### 6. Student Do: Models (15 min) 

* Direct students to the activity instructions found in `@TODO/folder/file`.

* Break your students into pairs that will work together on this activity.

```md
@TODO ADD INSTRUCTIONS
```

* While breaking everyone into groups, be sure to remind students and the rest of the instructional staff that questions on Slack or otherwise are welcome and will be handled. It's a good way for your team to prioritize students that need extra help while circulating through room.

### 7. Instructor Review: Models (10 min) 

* Ask the class the following questions (☝️) and call on students for the answers (🙋):

  * ☝️ How comfortable do you feel with `@TODO TOPIC`? (Poll via Fist to Five, Slack, or Zoom)

* Assure students that we will cover the solution to help solidify their understanding. If questions remain, remind them to use office hours to get extra help!

* Use the prompts and talking points below to review the following key (🔑) points:

  * ✔️ @TODO { THIS }

  * ✔️ @TODO { THAT }

  * ✔️ @TODO { THE OTHER }

* Open `@TODO/folder/file` in your IDE and explain the following: 

  * @TODO { WE DO THIS AND THE RESULT IS THAT }

  ```
  @TODO ADD CODE SNIPPET, TABBED
  ```

  * 🔑 @TODO DON'T FORGET TO USE THE KEY EMOJI ON KEY POINTS, BUT ONLY KEY POINTS, NOT _EVERY_ POINT

* Ask the class the following questions (☝️) and call on students for the answers (🙋):

  * ☝️ @TODO { DO WE END OUR REVIEWS WITH A QUESTION? }

  * 🙋 @TODO { YES, WE DO! }

  * ☝️ What can we do if we don't completely understand this?

  * 🙋 @TODO We can refer to supplemental material, read the [{ DOCS }]({ URL }), and stick around for Office Hours to ask for help.

* Answer any questions before proceeding to the next activity.

### 8. Instructor Demo: Create (5 min) 

@TODO USE THE FOLLOWING FOR BROWSER AND/OR COMMAND LINE DEMOS, RESPECTIVELY. REMOVE IF UNUSED

* Open `@TODO/folder/file` in your browser and demonstrate the following:

* Run `@TODO/folder/file { AND ARGS, IF ANY }` from the command line and demonstrate the following: 

  * 🔑 @TODO { WHEN WE DO THIS, IT DOES THAT. }

  * 🔑 @TODO { WE ALSO SEE THESE THINGS. }

* Ask the class the following questions (☝️) and call on students for the answers (🙋):

  * ☝️ How would we build this?

  * 🙋 @TODO { YES, HOW? } 

* Answer any questions before proceeding to the next activity.

* In preparation for the activity, ask TAs to start directing students to the activity instructions found in `@TODO/folder/file`.

### 9. Student Do: Create Read (15 min) 

* Direct students to the activity instructions found in `@TODO/folder/file`.

* Break your students into pairs that will work together on this activity.

  ```md
  @TODO ADD INSTRUCTIONS TABBED
  ```

* While breaking everyone into groups, be sure to remind students and the rest of the instructional staff that questions on Slack or otherwise are welcome and will be handled. It's a good way for your team to prioritize students that need extra help while circulating through room.

### 10. BREAK (15 min)

### 11. Instructor Review: Create Read (10 min) 

* Ask the class the following questions (☝️) and call on students for the answers (🙋):

  * ☝️ How comfortable do you feel with `@TODO TOPIC`? (Poll via Fist to Five, Slack, or Zoom)

* Assure students that we will cover the solution to help solidify their understanding. If questions remain, remind them to use office hours to get extra help!

* Use the prompts and talking points below to review the following key (🔑) points:

  * ✔️ @TODO { THIS }

  * ✔️ @TODO { THAT }

  * ✔️ @TODO { THE OTHER }

* Open `@TODO/folder/file` in your IDE and explain the following: 

  * @TODO { WE DO THIS AND THE RESULT IS THAT }

    ```
    @TODO ADD CODE SNIPPET, TABBED
    ```

  * 🔑 @TODO DON'T FORGET TO USE THE KEY EMOJI ON KEY POINTS, BUT ONLY KEY POINTS, NOT _EVERY_ POINT

* Ask the class the following questions (☝️) and call on students for the answers (🙋):

  * ☝️ @TODO { DO WE END OUR REVIEWS WITH A QUESTION? }

  * 🙋 @TODO { YES, WE DO! }

  * ☝️ What can we do if we don't completely understand this?

  * 🙋 @TODO We can refer to supplemental material, read the [{ DOCS }]({ URL }), and stick around for Office Hours to ask for help.

* Answer any questions before proceeding to the next activity.

### 12. Instructor Demo: { ACTIVITY NAME } (5 min) 

@TODO USE THE FOLLOWING FOR BROWSER AND/OR COMMAND LINE DEMOS, RESPECTIVELY. REMOVE IF UNUSED

* Open `@TODO/folder/file` in your browser and demonstrate the following:

* Run `@TODO/folder/file { AND ARGS, IF ANY }` from the command line and demonstrate the following: 

  * 🔑 @TODO { WHEN WE DO THIS, IT DOES THAT. }

  * 🔑 @TODO { WE ALSO SEE THESE THINGS. }

* Ask the class the following questions (☝️) and call on students for the answers (🙋):

  * ☝️ How would we build this?

  * 🙋 @TODO { YES, HOW? } 

* Answer any questions before proceeding to the next activity.

* In preparation for the activity, ask TAs to start directing students to the activity instructions found in `@TODO/folder/file`.

### 13. Student Do: { ACTIVITY NAME } (15 min)

* Direct students to the activity instructions found in `@TODO/folder/file`.

* Break your students into pairs that will work together on this activity.

```md
@TODO ADD INSTRUCTIONS TABBED
```

* While breaking everyone into groups, be sure to remind students and the rest of the instructional staff that questions on Slack or otherwise are welcome and will be handled. It's a good way for your team to prioritize students that need extra help while circulating through room.

### 14. Instructor Review: { ACTIVITY NAME } (10 min) 

* Ask the class the following questions (☝️) and call on students for the answers (🙋):

  * ☝️ How comfortable do you feel with `@TODO TOPIC`? (Poll via Fist to Five, Slack, or Zoom)

* Assure students that we will cover the solution to help solidify their understanding. If questions remain, remind them to use office hours to get extra help!

* Use the prompts and talking points below to review the following key (🔑) points:

  * ✔️ @TODO { THIS }

  * ✔️ @TODO { THAT }

  * ✔️ @TODO { THE OTHER }

* Open `@TODO/folder/file` in your IDE and explain the following: 

  * @TODO { WE DO THIS AND THE RESULT IS THAT }

    ```
    @TODO ADD CODE SNIPPET, TABBED
    ```

  * 🔑 @TODO DON'T FORGET TO USE THE KEY EMOJI ON KEY POINTS, BUT ONLY KEY POINTS, NOT _EVERY_ POINT

* Ask the class the following questions (☝️) and call on students for the answers (🙋):

  * ☝️ @TODO { DO WE END OUR REVIEWS WITH A QUESTION? }

  * 🙋 @TODO { YES, WE DO! }

  * ☝️ What can we do if we don't completely understand this?

  * 🙋 @TODO We can refer to supplemental material, read the [{ DOCS }]({ URL }), and stick around for Office Hours to ask for help.

* Answer any questions before proceeding to the next activity.

### 15. Instructor Demo: { ACTIVITY NAME } (5 min) 

@TODO USE THE FOLLOWING FOR BROWSER AND/OR COMMAND LINE DEMOS, RESPECTIVELY. REMOVE IF UNUSED

* Open `@TODO/folder/file` in your browser and demonstrate the following:

* Run `@TODO/folder/file { AND ARGS, IF ANY }` from the command line and demonstrate the following: 

  * 🔑 @TODO { WHEN WE DO THIS, IT DOES THAT. }

  * 🔑 @TODO { WE ALSO SEE THESE THINGS. }

* Ask the class the following questions (☝️) and call on students for the answers (🙋):

  * ☝️ How would we build this?

  * 🙋 @TODO { YES, HOW? } 

* Answer any questions before proceeding to the next activity.

* In preparation for the activity, ask TAs to start directing students to the activity instructions found in `@TODO/folder/file`.

### 16. Student Do: { ACTIVITY NAME } (15 min) 

* Direct students to the activity instructions found in `@TODO/folder/file`.

* Break your students into pairs that will work together on this activity.

```md
@TODO ADD INSTRUCTIONS
```

* While breaking everyone into groups, be sure to remind students and the rest of the instructional staff that questions on Slack or otherwise are welcome and will be handled. It's a good way for your team to prioritize students that need extra help while circulating through room.

### 17. Instructor Review: { ACTIVITY NAME } (15 min)

* Ask the class the following questions (☝️) and call on students for the answers (🙋):

  * ☝️ How comfortable do you feel with `@TODO TOPIC`? (Poll via Fist to Five, Slack, or Zoom)

* Assure students that we will cover the solution to help solidify their understanding. If questions remain, remind them to use office hours to get extra help!

* Use the prompts and talking points below to review the following key (🔑) points:

  * ✔️ @TODO { THIS }

  * ✔️ @TODO { THAT }

  * ✔️ @TODO { THE OTHER }

* Open `@TODO/folder/file` in your IDE and explain the following: 

  * @TODO { WE DO THIS AND THE RESULT IS THAT }

    ```
    @TODO ADD CODE SNIPPET, TABBED
    ```

  * 🔑 @TODO DON'T FORGET TO USE THE KEY EMOJI ON KEY POINTS, BUT ONLY KEY POINTS, NOT _EVERY_ POINT

* Ask the class the following questions (☝️) and call on students for the answers (🙋):

  * ☝️ @TODO { DO WE END OUR REVIEWS WITH A QUESTION? }

  * 🙋 @TODO { YES, WE DO! }

  * ☝️ What can we do if we don't completely understand this?

  * 🙋 @TODO We can refer to supplemental material, read the [{ DOCS }]({ URL }), and stick around for Office Hours to ask for help.

* Answer any questions before ending the class.

### 18. END (0 min)

How did today’s lesson go? Your feedback is important. Please take 5 minutes to complete [this anonymous survey](https://forms.gle/RfcVyXiMmZQut6aJ6).

---
© 2020 Trilogy Education Services, LLC, a 2U, Inc. brand.  Confidential and Proprietary.  All Rights Reserved.