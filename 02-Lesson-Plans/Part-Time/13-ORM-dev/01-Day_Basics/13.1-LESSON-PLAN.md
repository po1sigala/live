# 13.1 Part-Time Lesson Plan: Object Relational Mapping (ORM)

## Overview 

In today's class, students will be introduced to the Sequelize ORM. They will work with a Book model and use Sequelize's CRUD methods within Express.js routes. Students will also use `async / await` syntax to create a synchronous seeds script.

## Instructor Notes

* Complete activities `01-Ins_Sequelize-Setup` through `10-Stu_Async-Await`

* You will be using MySQL for today's activities. Be sure to have your MySQL server up and running. Go ahead and create the `library_db` database ahead of time, or demonstrate it live in class.

* The first activity, `01-Ins_Sequelize-Setup`, hardcodes the database credentials in the `connection.js` file. Every subsequent activity uses a `.env` file. Make sure you create one or rename the existing `.env.EXAMPLE` file before demonstrating each activity.

* All of the activities will be using Insomnia Core to test the routes, instead of relying on a front end. Be sure to have it installed and ready for all activities.

* Activities `05-Ins_Create` through `08-Stu_Update-Delete` include a `/seed` POST route to make it easier to populate the database with books. Starting from activity `09-Ins_Async-Await`, we switch to using a proper seed script in the `seeds` directory.

* To demo the mini project, you'll need to create a `traveller_db` database. Use the `seed.js` file located in `28-Stu_Mini-Project/Main/seeds` to populate the database before the demo.

* Remind students to do a `git pull` of the class repo to have today's activities ready and open in VS Code. 

* If you are comfortable doing so, live code the solutions to the activities. If not, no worries. Use the solutions provided and follow the prompts and talking points for review. 

* Let students know that the Bonus for each activity is meant to give them "food for thought". Rather than extra coding practice, it is a self-study on related topics that are beyond the scope of this unit for those who want to dig deeper and further their knowledge on this topic.

## Learning Objectives

By the end of class, students will be able to:

* Connect to a database using Sequelize and environment variables

* Create and configure a Sequelize model

* Perform CRUD operations with Sequelize methods

* Write a script to seed a database with initial data

* Convert asynchronous code to synchronous code using `async / await`

## Slide Deck

* [Unit 13 Slide Deck](https://docs.google.com/presentation/d/1_0n8JjM6cgmDyUfqGC6crF47JItD0mn9vzvQeYqZ5OE/)

## Time Tracker
| Start  | #   | Activity Name                       | Duration |
|---     |---  |---                                  |---       |
| 6:30PM | 1   | Instructor Do: Stoke Curiosity      | 0:10     |
| 6:40PM | 2   | Instructor Demo: Sequelize Setup    | 0:05     |
| 6:45PM | 3   | Student Do: Sequelize Setup         | 0:15     |
| 7:00PM | 4   | Instructor Review: Sequelize Setup  | 0:10     |
| 7:10PM | 5   | Instructor Demo: Models             | 0:05     |
| 7:15PM | 6   | Student Do: Models                  | 0:15     |
| 7:30PM | 7   | Instructor Review: Models           | 0:10     |
| 7:40PM | 8   | Instructor Demo: Create             | 0:05     |
| 7:45PM | 9   | Student Do: Create Read             | 0:15     |
| 8:00PM | 10  | BREAK                               | 0:15     |
| 8:15PM | 11  | Instructor Review: Create Read      | 0:10     |
| 8:25PM | 12  | Instructor Demo: Update Delete      | 0:05     |
| 8:30PM | 13  | Student Do: Update Delete           | 0:15     |
| 8:45PM | 14  | Instructor Review: Update Delete    | 0:10     |
| 8:55PM | 15  | Instructor Demo: Async Await        | 0:05     |
| 9:00PM | 16  | Student Do: Async Await             | 0:15     |
| 9:15PM | 17  | Instructor Review: Async Await      | 0:15     |
| 9:30PM | 18  | END                                 | 0:00     |

---

## Class Instruction

### 1. Instructor Do: Stoke Curiosity (10 min)

* Welcome students to class.

* Open the [slide deck](https://docs.google.com/presentation/d/1_0n8JjM6cgmDyUfqGC6crF47JItD0mn9vzvQeYqZ5OE/) and follow these prompts on their corresponding slides:

  * **Object Relational Mapping**
  
    * This unit is all about using Object Relational Mappers, or ORMs, to model your database data on the JavaScript side

  * **What are some of the challenges with using plain SQL in JavaScript?**
  
    * Prone to accidental syntax errors

    * Complicated queries can be hard to follow

    * Requires extra work to validate and secure data

    * Similar routes can lead to repetitive queries being written

    * Data relationships aren't obvious just by looking at the code
  
  * **What is Object-Oriented Programming?**

    * Code is organized using objects instead of functions

    * Objects can inherit properties and methods from other objects

    * Multiple objects can be created from the same blueprint classes or constructor functions
  
  * **How could objects help us manage SQL queries in JavaScript?**
  
    * Object methods could be set up to run generic SQL queries based on the method’s parameters

    * Objects could be structured to mimic how the data is stored in the database, eliminating ambiguity

    * Objects could be imported into any other module that needs to execute its SQL queries
  
  * **Is there a library that might already do this for us?**
  
    * Of course there is! Sequelize is an Object Relational Mapper (ORM) that can be installed with npm. It provides the following benefits:

      * Allows you to model your data as JavaScript classes 

      * Abstracts SQL queries to simpler object methods

      * Provides built-in validation checks for securing data

      * Makes it easier to visualize and join relational data

      * And more!
  
  * **How can we learn to use and implement Sequelize?**

    * Sequelize and other ORMs were created to make managing and using data easier, but they still come with a learning curve!

    * You can try the following strategies to learn Sequelize:

      * Read the official documentation and practice with the provided examples.

      * Reverse-engineer finished code to see how something was accomplished.

      * Build something from scratch.

      * Debug a broken app.

      * And most importantly, ask questions!
  
  * **Mini Project**

    * The mini project for this unit uses Sequelize to manage the data for a set of travel-related API routes

* Navigate to `28-Stu_Mini-Project/Main` in your command line.

* If you haven't already, rename the `.env.EXAMPLE` file and fill in your credentials. Use the `seeds/seed.js` script to populate the database with test data.

* Run `npm start` from the command line to start the server.

* Open Insomnia Core and demonstrate the following:

  * We can make a GET request to `http://localhost:3001/api/travellers` to see all travellers in the database.

  * We can make a GET request to `http://localhost:3001/api/locations` to see all locations in the database.

  * We can make a POST request to `http://localhost:3001/api/trips` with the following JSON to create a new relationship between traveller and location:

    ```json
    {
      "traveller_id": 1,
      "location_id": 1,
      "trip_budget": 2000
    }
    ```

  * We can make a GET request to `http://localhost:3001/api/travellers/1` to see the traveller with their related trip information included.

  * We are using Sequelize on the back end to manage all of this data and track how one dataset relates to another.

* Ask the class the following questions (☝️) and call on students for the answers (🙋):

  * ☝️ What are we learning?

  * 🙋 Sequelize, object relational mapping, data management, etc.

  * ☝️ How does this project build off or extend previously learned material?

  * 🙋 We are continuing to use SQL and databases but will focus on a more object-oriented approach.

  * ☝️ How does this project relate to your career goals?

  * 🙋 Big apps have complex data and require better ways to manage and visualize how the pieces connect.

* Answer any questions before proceeding to the next activity.

### 2. Instructor Demo: Sequelize Setup (5 min) 

* Open `01-Ins_Sequelize-Setup/package.json` in your IDE and explain the following:

  * 🔑 We include `sequelize` as a dependency. We also include `mysql2` to specify which flavor of SQL the Sequelize library should use.

    ```json
    "dependencies": {
      "express": "^4.17.1",
      "mysql2": "^2.2.5",
      "sequelize": "^6.3.5"
    }
    ```

* Open `01-Ins_Sequelize-Setup/config/connection.js` in your IDE and explain the following:

  * 🔑 We use the `Sequelize()` constructor to create a new database connection, specifying the user credentials and location of the MySQL database.

    ```js
    const sequelize = new Sequelize(
      // Database name
      'library_db',
      // User
      'root',
      // Password
      'myPassword',
      {
        // Database location
        host: 'localhost',
        dialect: 'mysql',
        port: 3306
      }
    );
    ```

* Open `01-Ins_Sequelize-Setup/server.js` in your IDE and explain the following:

  * 🔑 We import the connection object.

    ```js
    const sequelize = require('./config/connection');
    ```
  
  * 🔑 We use the `sync()` method to connect to the database.

    ```js
    sequelize.sync().then(() => {
      app.listen(PORT, () => console.log('Now listening'));
    });
    ```

* Run `npm start` in the `01-Ins_Sequelize-Setup` directory from the command line and demonstrate the following: 

  * 🔑 Sequelize executes a simple `SELECT 1+1 AS result` query to verify the database connection.

* Ask the class the following questions (☝️) and call on students for the answers (🙋):

  * ☝️ What dependencies are needed to set up Sequelize?

  * 🙋 The `sequelize` and `mysql2` npm packages.

  * ☝️ How would we connect to a different database?

  * 🙋 Change the credentials in the `Sequelize()` constructor in `connection.js`.

  * ☝️ Why would hardcoding these credentials be a bad idea?

  * 🙋 Other team members would have different credentials. If the repository is public, anyone can see the credentials.

* Answer any questions before proceeding to the next activity.

* In preparation for the activity, ask TAs to start directing students to the activity instructions found in `02-Stu_Sequelize-Setup/README.md`.

### 3. Student Do: Sequelize Setup (15 min) 

* Direct students to the activity instructions found in `02-Stu_Sequelize-Setup/README.md`.

* Break your students into pairs that will work together on this activity.

  ```md
  # 📖 Replace Hard-Coded Credentials With Environment Variables

  Work with a partner to implement the following user story:

  * As a developer, I want to protect my database credentials by not hard-coding them in the project files.

  ## Acceptance Criteria

  * It's done when the database name, user, and password are moved to environment variables.

  * It's done when Sequelize is able to connect to the database using the `dotenv` npm package.

  ## 📝 Note(s)

  Refer to the documentation: 

  * [dotenv npm package](https://www.npmjs.com/package/dotenv)

  ---

  ## 💡 Hint(s)

  * How does the `dotenv` npm package use `.env` files?

  ## 🏆 Bonus

  * If you have fully completed the above tasks, here is something you and your partner can work through as an added challenge to further your knowledge:

    * How can you set environment variables from the command line? 

  * Use [Google](https://www.google.com) or another search engine to research the above.
  ```

* While breaking everyone into groups, be sure to remind students and the rest of the instructional staff that questions on Slack or otherwise are welcome and will be handled. It's a good way for your team to prioritize students that need extra help while circulating through room.

### 4. Instructor Review: Sequelize Setup (10 min) 

* Ask the class the following questions (☝️) and call on students for the answers (🙋):

  * ☝️ How comfortable do you feel with the `dotenv` package and connecting to Sequelize? (Poll via Fist to Five, Slack, or Zoom)

* Assure students that we will cover the solution to help solidify their understanding. If questions remain, remind them to use office hours to get extra help!

* Use the prompts and talking points below to review the following key (🔑) points:

  * ✔️ `.env` files

  * ✔️ `dotenv` npm package

* Open `02-Stu_Sequelize-Setup/Solved/package.json` in your IDE and explain the following: 

  * 🔑 We added the `dotenv` npm package as a dependency.

    ```json
    "dependencies": {
      "dotenv": "^8.2.0",
      "express": "^4.17.1",
      "mysql2": "^2.2.5",
      "sequelize": "^6.3.5"
    }
    ```

* Open `02-Stu_Sequelize-Setup/Solved/.env.EXAMPLE` in your IDE and explain the following: 

  * 🔑 We created a `.env` file to store our environment variables.

    ```text
    DB_NAME=library_db
    DB_PASSWORD=
    DB_USER=
    ```

* Fill in your credentials and rename the `.env.EXAMPLE` file to `.env` while explaining the following:

  * We called the file `.env.EXAMPLE` for activity purposes, but in actual projects it would just be `.env`.

* Open `02-Stu_Sequelize-Setup/Solved/.gitignore` in your IDE and explain the following: 

  * 🔑 We added `.env` to the `.gitignore` file to ensure our credentials don't accidentally get added and committed to the repository.

    ```text
    node_modules
    .DS_Store
    .env
    ```

* Open `02-Stu_Sequelize-Setup/Solved/config/connection.js` in your IDE and explain the following: 

  * 🔑 We enabled the `dotenv` package to allow our `.env` variables to be read by the Node.js script.

    ```js
    require('dotenv').config();
    ```

  * 🔑 We used `process.env` environment variables in place of hardcoded values to connect to the database.

    ```js
    const sequelize = new Sequelize(
      process.env.DB_NAME,
      process.env.DB_USER,
      process.env.DB_PASSWORD,
      {
        host: 'localhost',
        dialect: 'mysql',
        port: 3306
      }
    );
    ```

* Run `npm start` in the `02-Stu_Sequelize-Setup/Solved` directory from the command line and demonstrate the following:

  * Sequelize is still able to connect to the database using the `process.env` variables.

* Ask the class the following questions (☝️) and call on students for the answers (🙋):

  * ☝️ What problem does the `dotenv` package solve?

  * 🙋 It gives you a way to avoid hardcoding your credentials in a JS file.

  * ☝️ What can we do if we don't completely understand this?

  * 🙋 We can refer to supplemental material, read the [dotenv npm package documentation](https://www.npmjs.com/package/dotenv) and [Sequelize documentation](https://sequelize.org/), and stick around for Office Hours to ask for help.

* Answer any questions before proceeding to the next activity.

### 5. Instructor Demo: Models (5 min) 

* Run `npm start` in the `03-Ins_Models` directory from the command line and demonstrate the following:

  * 🔑 Sequelize executed a SQL `CREATE TABLE` statement when the `sync()` method was called.

  * 🔑 Sequelize performed this table creation based on a data model.

* Open `03-Ins_Models/models/Book.js` in your IDE and explain the following:

  * 🔑 Sequelize models are defined as JavaScript classes.

    ```js
    class Book extends Model {}
    ```

  * 🔑 The `init()` method allows us to define which properties the model has. These properties will become the table columns in MySQL.

    ```js
    Book.init(
      {
        title: {
          type: DataTypes.STRING
        },
        author: {
          type: DataTypes.STRING
        },
        isbn: {
          type: DataTypes.STRING
        },
        pages: {
          type: DataTypes.INTEGER
        },
        edition: {
          type: DataTypes.INTEGER
        },
        isPaperback: {
          type: DataTypes.BOOLEAN
        }
      }
    );
    ```

  * 🔑 We did not need to specify an `id` field, because Sequelize will generate a primary key automatically. In the future, however, it would be better practice to define it ourselves.

  * 🔑 We pass a second object to the `init()` method to link the model to the `sequelize` connection object and define any other options we might want.

    ```js
    {
      sequelize,
      timestamps: false,
      underscored: true,
      modelName: 'book'
    }
    ```

  * For instance, `timestamps: false` stops Sequelize from auto-creating date columns in the MySQL table. We can also enforce column names to be underscored instead of camelCase.

* Open `03-Ins_Models/server.js` in your IDE and explain the following:

  * 🔑 We imported the model in the application to ensure Sequelize sees it and syncs it with the database.

    ```js
    const Book = require('./models/Book');
    ```

  * 🔑 In the `sync()` method, we added a `force: true` option to tell Sequelize to drop the tables if they exist and recreate them. This is helpful when you are still experimenting with your models.

    ```js
    sequelize.sync({ force: true }).then(() => {
      app.listen(PORT, () => console.log('Now listening'));
    });
    ```

* Reopen `03-Ins_Models/models/Book.js` and set `timestamps` to  `true`. Run `npm start` in the `03-Ins_Models` directory from the command line to demonstrate the following:

  * Sequelize executed a `DROP TABLE IF EXISTS` statement due to the `force: true` flag.

  * Sequelize included `created_at` and `updated_at` fields in the `CREATE TABLE` statement due to the `timestamps: true` flag.

* Ask the class the following questions (☝️) and call on students for the answers (🙋):

  * ☝️ How are Sequelize models written?

  * 🙋 As JavaScript classes

  * ☝️ What does the model become when Sequelize syncs with the database?

  * 🙋 A MySQL table

  * ☝️ Why would you want to remove the `force: true` flag before deploying?

  * 🙋 You don't want to keep dropping the tables and losing your data

* Answer any questions before proceeding to the next activity.

* In preparation for the activity, ask TAs to start directing students to the activity instructions found in `04-Stu_Models/README.md`.

### 6. Student Do: Models (15 min) 

* Direct students to the activity instructions found in `04-Stu_Models/README.md`.

* Break your students into pairs that will work together on this activity.

  ```md
  # 🐛 MySQL Table isn't Being Created to Specifications

  Work with a partner to resolve the following issue(s):

  * As a developer, I want a MySQL table with the same name as the Sequelize model.

  * As a developer, I want a more descriptive primary key name in the MySQL table.

  ## Expected Behavior

  When Sequelize syncs the model with the database, the table name should be `book` (singular) and the primary key named `book_id`.

  ## Actual Behavior

  The table name is `books`, and the primary key is `id`.

  ## Steps to Reproduce the Problem

  1. Run `npm start` from the command line to start the server and sync the database.

  2. Run `mysql -u root -p` to log into the MySQL shell.

  3. In the MySQL shell, run `USE library_db;` to switch to the library database.

  4. Try to run `DESCRIBE book;`, and it will fail, because the table name is `books`.

  5. Run `DESCRIBE books;` and note that the primary key is named `id` and not `book_id`.

  ---

  ## 💡 Hint(s)

  * What options does Sequelize provide when it comes to naming tables and fields?

  ## 🏆 Bonus

  * If you have fully completed the above tasks, here is something you and your partner can work through as an added challenge to further your knowledge:

    * How can we apply model-based rules to all models in the Sequelize connection logic?

  * Use [Google](https://www.google.com) or another search engine to research the above.
  ```

* While breaking everyone into groups, be sure to remind students and the rest of the instructional staff that questions on Slack or otherwise are welcome and will be handled. It's a good way for your team to prioritize students that need extra help while circulating through room.

### 7. Instructor Review: Models (10 min) 

* Ask the class the following questions (☝️) and call on students for the answers (🙋):

  * ☝️ How comfortable do you feel with Sequelize models? (Poll via Fist to Five, Slack, or Zoom)

* Assure students that we will cover the solution to help solidify their understanding. If questions remain, remind them to use office hours to get extra help!

* Use the prompts and talking points below to review the following key (🔑) points:

  * ✔️ Sequelize column options

  * ✔️ Sequelize table options

* Open `04-Stu_Models/Solved/models/Book.js` in your IDE and explain the following: 

  * 🔑 We added a `book_id` column with `primaryKey` and `autoIncrement` properties to replace Sequelize's auto-generated `id`.

    ```js
    book_id: {
      type: DataTypes.INTEGER,
      primaryKey: true,
      autoIncrement: true
    }
    ```

  * 🔑 In the configuration object, we added a `freezeTableName` property to prevent Sequelize from pluralizing the model name for the table name.

    ```js
    {
      sequelize,
      timestamps: false,
      freezeTableName: true,
      underscored: true,
      modelName: 'book'
    }
    ```

* Ask the class the following questions (☝️) and call on students for the answers (🙋):

  * ☝️ Why would we want to override Sequelize's default behavior?

  * 🙋 To remove any ambiguity about what the model is doing.

  * ☝️ What can we do if we don't completely understand this?

  * 🙋 We can refer to supplemental material, read the [Sequelize docs on models](https://sequelize.org/master/manual/model-basics.html), and stick around for Office Hours to ask for help.

* Answer any questions before proceeding to the next activity.

### 8. Instructor Demo: Create (5 min) 

* Open `05-Ins_Create/routes/api/bookRoutes.js` in your IDE and explain the following:

  * 🔑 We imported the `Book` model so our Express.js routes can perform queries on it.

    ```js
    const Book = require('../../models/Book');
    ```

  * 🔑 In the POST route, we use the model's `create()` method to create a new book record in the database.

    ```js
    router.post('/', (req, res) => {
      Book.create({
        title: req.body.title,
        author: req.body.author,
        is_paperback: true
      });
    });
    ```

  * 🔑 Sequelize is Promise-based, so we add a `then()` and `catch()` to return the newly created book or an error message.

    ```js
    .then((newBook) => {
      res.json(newBook);
    })
    .catch((err) => {
      res.json(err);
    });
    ```

  * 🔑 We have a second POST route called `/seed` that uses the model's `bulkCreate()` method to insert multiple records in the database.

    ```js
    router.post('/seed', (req, res) => {
      Book.bulkCreate([
        {
          title: 'Make It Stick: The Science of Successful Learning',
          author: 'Peter Brown',
          isbn: '978-0674729018',
          pages: 336,
          edition: 1,
          is_paperback: false
        }
      ]);
    });
    ```

  * The `bulkCreate()` method could also be moved to a separate Node.js script to ensure it only happens once.

* Rename the `.env.EXAMPLE` file and fill in your credentials. Run `npm start` from the `05-Ins_Create` directory. With the app running, open Insomnia Core and demonstrate the following:

  * We can make a POST request to `http://localhost:3001/api/books/` to create a single book with the following JSON:

    ```json
    {
      "title": "Don't Make Me Think",
      "author": "Steve Krug",
      "is_paperback": true
    }
    ```

  * We can also make a POST request to `http://localhost:3001/api/books/seed` to create multiple books at once.

* Ask the class the following questions (☝️) and call on students for the answers (🙋):

  * ☝️ What Sequelize methods can we use to insert data into a database?

  * 🙋 `create()` and `bulkCreate()`

  * ☝️ How can we test these methods as part of our Express.js routes?

  * 🙋 Make POST requests with Insomnia Core

* Answer any questions before proceeding to the next activity.

* In preparation for the activity, ask TAs to start directing students to the activity instructions found in `06-Stu_Create-Read/README.md`.

### 9. Student Do: Create Read (15 min) 

* Direct students to the activity instructions found in `06-Stu_Create-Read/README.md`.

* Break your students into pairs that will work together on this activity.

  ```md
  # 📐 Add Comments to Implementation of Sequelize Query Methods

  Work with a partner to add comments describing the functionality of the code found in [Unsolved/routes/api/bookRoutes.js](./Unsolved/routes/api/bookRoutes.js).

  ## 📝 Note(s)

  Refer to the documentation: 

  * [Sequelize docs on model querying](https://sequelize.org/master/manual/model-querying-basics.html)

  ---

  ## 🏆 Bonus

  * If you have fully completed the above tasks, here is something you and your partner can work through as an added challenge to further your knowledge:

    * What is the difference between Sequelize's `create()` and `build()` methods?

  * Use [Google](https://www.google.com) or another search engine to research the above.
  ```

* While breaking everyone into groups, be sure to remind students and the rest of the instructional staff that questions on Slack or otherwise are welcome and will be handled. It's a good way for your team to prioritize students that need extra help while circulating through room.

### 10. BREAK (15 min)

### 11. Instructor Review: Create Read (10 min) 

* Ask the class the following questions (☝️) and call on students for the answers (🙋):

  * ☝️ How comfortable do you feel with Sequelize queries? (Poll via Fist to Five, Slack, or Zoom)

* Assure students that we will cover the solution to help solidify their understanding. If questions remain, remind them to use office hours to get extra help!

* Use the prompts and talking points below to review the following key (🔑) points:

  * ✔️ `findAll()`

  * ✔️ `findByPk()`

  * ✔️ Query parameters

* Open `06-Stu_Create-Read/Solved/routes/api/bookRoutes.js` in your IDE and explain the following: 

  * 🔑 We use the `findAll()` method to get all books from the database and send them as JSON in the response.

    ```js
    router.get('/', (req, res) => {
      Book.findAll().then((bookData) => {
        res.json(bookData);
      });
    });
    ```

  * 🔑 We add optional parameters to the `findAll()` method to specify a sort order, filter results with a `WHERE` clause, and exclude certain attributes from the results.
  
    ```js
    router.get('/paperbacks', (req, res) => {
      Book.findAll({
        // Order by title in ascending order
        order: ['title'],
        where: {
          // Only get books that have this boolean set to TRUE
          is_paperback: true
        },
        attributes: {
          // Don't include these fields in the returned data
          exclude: ['is_paperback', 'edition']
        }
      }).then((bookData) => {
        res.json(bookData);
      });
    });
    ```

  * 🔑 We use the `findByPk()` method to get a single record based on its `book_id` primary key.

    ```js
      router.get('/:id', (req, res) => {
      Book.findByPk(req.params.id).then((bookData) => {
        res.json(bookData);
      });
    });
    ```

* Ask the class the following questions (☝️) and call on students for the answers (🙋):

  * ☝️ What is the plain SQL equivalent of `findAll()`?

  * 🙋 `SELECT * FROM book`

  * ☝️ What is the plain SQL equivalent of `findByPk()`?

  * 🙋 `SELECT * FROM book WHERE book_id = x`

  * ☝️ What can we do if we don't completely understand this?

  * 🙋 We can refer to supplemental material, read the [Sequelize docs on querying](https://sequelize.org/master/manual/model-querying-basics.html), and stick around for Office Hours to ask for help.

* Answer any questions before proceeding to the next activity.

### 12. Instructor Demo: UPDATE, DELETE (5 min) 

@TODO USE THE FOLLOWING FOR BROWSER AND/OR COMMAND LINE DEMOS, RESPECTIVELY. REMOVE IF UNUSED

* Open `07-Ins_Update/routes/api/bookRoutes` in your IDE and demonstrate the following:

* Run `npm start` from the command line and demonstrate the following: 

  * 🔑 Before we run the `put` route, we need to first get the `isbn` of a book that is already in the database. We can copy the `isbn` from one our books in the `/seed` route.
  <code>
  {
      title: 'The Pragmatic Programmer: Your Journey To Mastery',
      author: 'David Thomas',
      isbn: '9780135957059',
      pages: 352,
      edition: 2,
      is_paperback: false,
    },
  </code>

  * 🔑 Open Insomnia Core and make a `PUT` request to the `localhost:3001/api/isbn` with following data in JSON format.
  <code>
  {
      "title": "Grokking Algorithms: An illustrated guide for programmers and other curious people",
      "author": "Aditya Bhargava",
      "edition": "1"
    },
  </code>

* Ask the class the following questions (☝️) and call on students for the answers (🙋):

  * ☝️ How would we build this?

  * 🙋 @TODO { YES, HOW? } 

* Answer any questions before proceeding to the next activity.

* In preparation for the activity, ask TAs to start directing students to the activity instructions found in `@TODO/folder/file`.

### 13. Student Do: { ACTIVITY NAME } (15 min)

* Direct students to the activity instructions found in `@TODO/folder/file`.

* Break your students into pairs that will work together on this activity.

```md
@TODO ADD INSTRUCTIONS TABBED
```

* While breaking everyone into groups, be sure to remind students and the rest of the instructional staff that questions on Slack or otherwise are welcome and will be handled. It's a good way for your team to prioritize students that need extra help while circulating through room.

### 14. Instructor Review: { ACTIVITY NAME } (10 min) 

* Ask the class the following questions (☝️) and call on students for the answers (🙋):

  * ☝️ How comfortable do you feel with `@TODO TOPIC`? (Poll via Fist to Five, Slack, or Zoom)

* Assure students that we will cover the solution to help solidify their understanding. If questions remain, remind them to use office hours to get extra help!

* Use the prompts and talking points below to review the following key (🔑) points:

  * ✔️ @TODO { THIS }

  * ✔️ @TODO { THAT }

  * ✔️ @TODO { THE OTHER }

* Open `@TODO/folder/file` in your IDE and explain the following: 

  * @TODO { WE DO THIS AND THE RESULT IS THAT }

    ```
    @TODO ADD CODE SNIPPET, TABBED
    ```

  * 🔑 @TODO DON'T FORGET TO USE THE KEY EMOJI ON KEY POINTS, BUT ONLY KEY POINTS, NOT _EVERY_ POINT

* Ask the class the following questions (☝️) and call on students for the answers (🙋):

  * ☝️ @TODO { DO WE END OUR REVIEWS WITH A QUESTION? }

  * 🙋 @TODO { YES, WE DO! }

  * ☝️ What can we do if we don't completely understand this?

  * 🙋 @TODO We can refer to supplemental material, read the [{ DOCS }]({ URL }), and stick around for Office Hours to ask for help.

* Answer any questions before proceeding to the next activity.

### 15. Instructor Demo: { ACTIVITY NAME } (5 min) 

@TODO USE THE FOLLOWING FOR BROWSER AND/OR COMMAND LINE DEMOS, RESPECTIVELY. REMOVE IF UNUSED

* Open `@TODO/folder/file` in your browser and demonstrate the following:

* Run `@TODO/folder/file { AND ARGS, IF ANY }` from the command line and demonstrate the following: 

  * 🔑 @TODO { WHEN WE DO THIS, IT DOES THAT. }

  * 🔑 @TODO { WE ALSO SEE THESE THINGS. }

* Ask the class the following questions (☝️) and call on students for the answers (🙋):

  * ☝️ How would we build this?

  * 🙋 @TODO { YES, HOW? } 

* Answer any questions before proceeding to the next activity.

* In preparation for the activity, ask TAs to start directing students to the activity instructions found in `@TODO/folder/file`.

### 16. Student Do: { ACTIVITY NAME } (15 min) 

* Direct students to the activity instructions found in `@TODO/folder/file`.

* Break your students into pairs that will work together on this activity.

```md
@TODO ADD INSTRUCTIONS
```

* While breaking everyone into groups, be sure to remind students and the rest of the instructional staff that questions on Slack or otherwise are welcome and will be handled. It's a good way for your team to prioritize students that need extra help while circulating through room.

### 17. Instructor Review: { ACTIVITY NAME } (15 min)

* Ask the class the following questions (☝️) and call on students for the answers (🙋):

  * ☝️ How comfortable do you feel with `@TODO TOPIC`? (Poll via Fist to Five, Slack, or Zoom)

* Assure students that we will cover the solution to help solidify their understanding. If questions remain, remind them to use office hours to get extra help!

* Use the prompts and talking points below to review the following key (🔑) points:

  * ✔️ @TODO { THIS }

  * ✔️ @TODO { THAT }

  * ✔️ @TODO { THE OTHER }

* Open `@TODO/folder/file` in your IDE and explain the following: 

  * @TODO { WE DO THIS AND THE RESULT IS THAT }

    ```
    @TODO ADD CODE SNIPPET, TABBED
    ```

  * 🔑 @TODO DON'T FORGET TO USE THE KEY EMOJI ON KEY POINTS, BUT ONLY KEY POINTS, NOT _EVERY_ POINT

* Ask the class the following questions (☝️) and call on students for the answers (🙋):

  * ☝️ @TODO { DO WE END OUR REVIEWS WITH A QUESTION? }

  * 🙋 @TODO { YES, WE DO! }

  * ☝️ What can we do if we don't completely understand this?

  * 🙋 @TODO We can refer to supplemental material, read the [{ DOCS }]({ URL }), and stick around for Office Hours to ask for help.

* Answer any questions before ending the class.

### 18. END (0 min)

How did today’s lesson go? Your feedback is important. Please take 5 minutes to complete [this anonymous survey](https://forms.gle/RfcVyXiMmZQut6aJ6).

---
© 2020 Trilogy Education Services, LLC, a 2U, Inc. brand.  Confidential and Proprietary.  All Rights Reserved.