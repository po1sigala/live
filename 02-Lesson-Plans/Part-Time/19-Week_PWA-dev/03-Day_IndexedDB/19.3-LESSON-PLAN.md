# 19.3 Part-Time Lesson Plan: 



## Learning Objectives

By the end of class, students will be able to:



* Explain a practical use case for implementing Git hooks.



## Class Instruction



### 11. Everyone Do: Git (20 min)

* Open the [Git Docs on Git Hooks](https://git-scm.com/book/en/v2/Customizing-Git-Git-Hooks) in your browser and explain the following:

  * When working with a team, we often have a certain set of practices that we want everyone to follow when using a repository. Git hooks provide a convenient way to execute custom scripts when a certain action is performed to remind the team of the established rules.

  * For example, if we want to add a reminder to our teammates about the way the commit message should be styled, we can set up a Git hook to listen for a commit event and then execute a script to send an automated reminder.

  * Each Git hook is local to a single repository and we must install the hook in each repository where we want the script to execute.

  * To install a Git hook, we either start with a pre-written sample hook provided by Git or write a custom hook on our own.

* Direct students to the activity instructions found in `27-Evr_Git-Hooks/README.md`.

* While everyone is working on the activity, be sure to remind students and the rest of the instructional staff that questions on Slack or otherwise are welcome and will be addressed. It's a good way for your team to prioritize students who need extra help.

* Open your command line and demonstrate the following:

  * ðŸ”‘ We initialize a new repository and enter `ls .git/hooks` to see a list of pre-written sample hooks that Git provides with each new repository:

    ```bash
    mkdir hook-test
    cd hook-test
    git init
    ls .git/hooks
    ```

  * Let's explore one of these hooks. We enter `code .git/hooks/pre-commit.sample` to open the `pre-commit` hook in VS Code.

  * ðŸ”‘ We see that Git hooks are written as shell hooks, and this hook is executed before a commit is made to check if files that use non-ASCII names are being used. To apply this hook to our repository, we simply rename it and remove the `.sample` extension:
  
    ```bash
    mv .git/hooks/pre-commit.sample .git/hooks/pre-commit
    ```

  * ðŸ”‘ We can also write our own custom hooks. To start, we add a new file in the `hooks` directory to hold our custom hook and set the permissions to execute:

    ```bash
    touch .git/hooks/post-checkout
    chmod +x .git/hooks/post-checkout
    code .git/hooks/post-checkout
    ```

  * We then add the shell script logic to set a safe list of issue/feature names, get the current branch, and check if the name matches a name in the safe list:

  ```bash
  #!/bin/sh
  safelist=("main", "develop", "staging")
  branch=$(git branch --show-current)
  if [[ ! ${safelist[*]} =~ "$branch" ]] && [[ ! "$branch" =~ ^(issue/|feature/).* ]]
  then
    echo "Warning!"
    echo 'If feature or issue branch, please use "issue/" or "feature/" prefix.'
  fi
  ```

 * We can now use our new Git hook to set a reminder to use the team's naming convention within the repository.  

* Answer any questions before students go on break.

### 12. BREAK (40 min)

### 13. Instructor Demo: Mini-Project (5 min) 



### 14. Student Do: Mini-Project (60 min)



### 15. Instructor Review: Mini-Project (10 min)  



### 17. END (0 min)

How did todayâ€™s lesson go? Your feedback is important. Please take 5 minutes to complete this [anonymous survey](https://forms.gle/RfcVyXiMmZQut6aJ6).

---
Â© 2021 Trilogy Education Services, LLC, a 2U, Inc. brand. Confidential and Proprietary. All Rights Reserved.
