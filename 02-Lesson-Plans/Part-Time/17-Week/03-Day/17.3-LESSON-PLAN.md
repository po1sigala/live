## 17.3 Lesson Plan - IndexedDB (10:00 AM) <!--links--> &nbsp; [⬅️]() &nbsp; [➡️]()

## Overview

This lesson introduces IndexedDB.

## Instructor Notes

* Complete activities...

* Ensure that...

* If students continually question why they are learning IndexedDB...


## Learning Objectives

* Explain the pros and cons of storing client side data with cookies and IndexedDB.

* Request an IndexedDB instance.

* Create an object store and add data with the `add` method.

* Search for an item by keyPath with the `get` method.

* Create and search by index with the `getAll` method.

* Utilize Cursors to iterate through and update object store data.

* Complete the mini project.

## Slides

[]()

## Time Tracker

[]()

- - -

### 1. Instructor Do: Intro To IndexedDB (10 mins)

* Welcome students to class and covering the following talking points.

  * How do we store data client-side? 

  * What is a cookie? 

  * What is IndexedDB? 

  * Why IndexedDB? 

### 2. Instructor Do: Creating an IndexedDB Connection (5 mins)

* The call to the open() function returns an `IDBOpenDBRequest` object with a result (success) or error value that you handle as an event. The result for the `open` function is an instance of an IDBDatabase. The second parameter to `the` open method is the version of the database, more on this later.

### 3. Student Do: Creating an IndexedDB Connection (10 mins)

* Students create a basic request for an indexedDB instance.

### 4. Instructor Do: Review Creating an IndexedDB Connection (5 mins)

* Review

### 5. Instructor Do: Create an Object Store (5 mins)

* You create the db schema in the `onupgradeneeded` handler. The first part of creating a schema is creating an object store. The version of the database determines the database schema — the object stores in the database and their structure. If the database doesn't already exist, it is created by the `open` operation, then an `onupgradeneeded` event is triggered and you create the database schema in the handler for this event. If the database does exist but you are specifying an upgraded version number, an `onupgradeneeded` event is triggered right away, allowing you to provide an updated schema in its handler.

### 6. Student Do: Create an Object Store (15 mins)

  * Students create an object store.

### 7. Instructor Do: Review Create an Object Store (5 mins)

  * Review

### 8. Instructor Do: Defining Object Store Data with Indexes (5 mins)

  * In order to query data in our objectStore, we have to create indexes that we can search. 
  
  ```js 
  var myIDBIndex = objectStore.createIndex(indexName, keyPath); 
  ```

* indexName: What you use to access that index. 
* keyPath: The actual name of the "column."

### 9. Student Do: Defining Object Store Data with Indexes (10 mins)

* Students create an index on their object store.

### 10. Instructor Do: Review Defining Object Store Data with Indexes (5 mins)

* Review.

### 11. Instructor Do: Adding and Getting Object Store Data (5 mins)
  
* Demo how to add data and retrieve data from an object store.

### 12. Student Do: Adding and Getting Object Store Data (15 mins)

* Students will create add and retrieve data from an objectStore using a keyPath and index.

### 13. Instructor Do: Review Adding Objects to the Store (5 mins)

* Review.

### 14. Instructor Do: Retrieving and Updating Data With Cursors (5 mins)

* Demo how to open a Cursor and iterate through data.

### 15. Student Do: Retrieving and Updating Data With Cursors (15 mins)

* Students will iterate through data with a Cursor and update items conditionally.

### 16. Instructor Do: Review Retrieving Data With Cursors (5 mins)

* Review.

### 17. BREAK (40 mins)

### 18. Intro Mini Project (5 mins)

* Overview of mini project.

### 19. Student Do: Mini Project (60 mins)

* Complete mini project.

### 20. Instructor Do: Review Mini Project (10 mins)

* Review.

### 21. END (0 mins)